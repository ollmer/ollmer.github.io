// threejs.org/license
'use strict';var THREE={REVISION:"73"};"function"===typeof define&&define.amd?define("three",THREE):"undefined"!==typeof exports&&"undefined"!==typeof module&&(module.exports=THREE);
void 0!==self.requestAnimationFrame&&void 0!==self.cancelAnimationFrame||function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestanimationframe;++c)self.requestanimationframe=self[b[c]+"requestanimationframe"],self.cancelanimationframe=self[b[c]+"cancelanimationframe"]||self[b[c]+"cancelrequestanimationframe"];void 0="==self.requestAnimationFrame&&void" 0!="=self.setTimeout&&(self.requestAnimationFrame=function(b){var" c="Date.now(),g=Math.max(0,16-(c-a)),f=self.setTimeout(function(){b(c+" g)},g);a="c+g;return" f});void="" a="Date.now();self.performance.now=function(){return" date.now()-a}}();void="">a?-1:0<a?1:+a}); 0="==Function.prototype.name&&void" 3="==arguments.length?this.fromArray(arguments):this.set(a)};" void="" 0!="=Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return" this.tostring().match(="" ^\s*function\s*(\s*)\s*\(="" )[1]}});three.mouse="{LEFT:0,MIDDLE:1,RIGHT:2};THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;" three.doubleside="2;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.MinEquation=103;THREE.MaxEquation=104;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;" three.srcalphafactor="204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.NeverDepth=0;THREE.AlwaysDepth=1;THREE.LessDepth=2;THREE.LessEqualDepth=3;THREE.EqualDepth=4;THREE.GreaterEqualDepth=5;THREE.GreaterDepth=6;THREE.NotEqualDepth=7;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=300;THREE.CubeReflectionMapping=301;" three.cuberefractionmapping="302;THREE.EquirectangularReflectionMapping=303;THREE.EquirectangularRefractionMapping=304;THREE.SphericalReflectionMapping=305;THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;" three.shorttype="1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.HalfFloatType=1025;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGBEFormat=THREE.RGBAFormat;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;" three.rgba_s3tc_dxt5_format="2004;THREE.RGB_PVRTC_4BPPV1_Format=2100;THREE.RGB_PVRTC_2BPPV1_Format=2101;THREE.RGBA_PVRTC_4BPPV1_Format=2102;THREE.RGBA_PVRTC_2BPPV1_Format=2103;THREE.LoopOnce=2200;THREE.LoopRepeat=2201;THREE.LoopPingPong=2202;" three.projector="function(){console.error("THREE.Projector" has="" been="" moved="" to="" examples="" js="" renderers="" projector.js.");this.projectvector="function(a,b){console.warn("THREE.Projector:" .projectvector()="" is="" now="" vector.project().");a.project(b)};this.unprojectvector="function(a,b){console.warn("THREE.Projector:" .unprojectvector()="" vector.unproject().");a.unproject(b)};this.pickingray="function(a,b){console.error("THREE.Projector:" .pickingray()="" raycaster.setfromcamera().")}};="" three.canvasrenderer="function(){console.error("THREE.CanvasRenderer" canvasrenderer.js");this.domelement="document.createElement("canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};THREE.Color=function(a){return" three.color.prototype="{constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a" instanceof="" three.color?this.copy(a):"number"="==typeof" a?this.sethex(a):"string"="==typeof" a&&this.setstyle(a);return="" this},sethex:function(a){a="Math.floor(a);this.r=(a">>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&(d-=1);return d<1="" 6?a+6*(c-a)*d:.5="">d?c:d<2 3?a+6*(c-a)*(2="" 3-d):a}return="" function(b,="" c,d){b="THREE.Math.euclideanModulo(b,1);c=THREE.Math.clamp(c,0,1);d=THREE.Math.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5">=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=
Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=parseFloat(c[1])/
360,e=parseInt(c[2],10)/100,g=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,g)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=three.colorkeywords[a], 0="==b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return" void="" 0!="=c?this.setHex(c):console.warn("THREE.Color:" unknown="" color="" "+a));return="" this},clone:function(){return="" new="" this.constructor(this.r,this.g,this.b)},copy:function(a){this.r="a.r;this.g=a.g;this.b=a.b;return" this},copygammatolinear:function(a,b){void="" this},copylineartogamma:function(a,b){void="" c="0<b?1/b:1;this.r=Math.pow(a.r,c);this.g=Math.pow(a.g,c);this.b=Math.pow(a.b,c);return" this},convertgammatolinear:function(){var="" a="this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return" this},convertlineartogamma:function(){this.r="Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return" this},gethex:function(){return="" 255*this.r<<16^255*this.g<<8^255*this.b<<0},gethexstring:function(){return("000000"+this.gethex().tostring(16)).slice(-6)},gethsl:function(a){a="a||{h:0,s:0,l:0};var" b="this.r,c=this.g,d=this.b,e=Math.max(b,c,d),g=Math.min(b,c,d),f,h=(g+e)/2;if(g===e)g=f=0;else{var" l="e-g,g=.5">=h?l/(e+g):
l/(2-e-g);switch(e){case b:f=(c-d)/l+(c<d?6:0);break;case 0="==b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return" c:f="(d-b)/l+2;break;case" d:f="(b-c)/l+4}f/=6}a.h=f;a.s=g;a.l=h;return" a},getstyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsethsl:function(a,b,c){var="" d="this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return" this},add:function(a){this.r+="a.r;this.g+=a.g;this.b+=a.b;return" this},addcolors:function(a,b){this.r="a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return" this},addscalar:function(a){this.r+="a;this.g+=a;this.b+=a;return" this},multiply:function(a){this.r*="a.r;this.g*=a.g;this.b*=a.b;return" this},multiplyscalar:function(a){this.r*="a;this.g*=a;this.b*=a;return" this},lerp:function(a,b){this.r+="(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return" this},equals:function(a){return="" a.r="==this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void" this},toarray:function(a,b){void="" this.r;a[b+1]="this.g;a[b+2]=this.b;return" a}};="" three.colorkeywords="{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643," darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,="" grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,="" lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,="" palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,="" tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};three.quaternion="function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void" 0!="=d?d:1};" three.quaternion.prototype="{constructor:THREE.Quaternion,get" x(){return="" this._x},set="" x(a){this._x="a;this.onChangeCallback()},get" y(){return="" this._y},set="" y(a){this._y="a;this.onChangeCallback()},get" z(){return="" this._z},set="" z(a){this._z="a;this.onChangeCallback()},get" w(){return="" this._w},set="" w(a){this._w="a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return" this},clone:function(){return="" new="" this.constructor(this._x,this._y,this._z,this._w)},="" copy:function(a){this._x="a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return" this},setfromeuler:function(a,b){if(!1="==a" instanceof="" three.euler)throw="" error("three.quaternion:="" .setfromeuler()="" now="" expects="" a="" euler="" rotation="" rather="" than="" vector3="" and="" order.");var="" c="Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),g=Math.sin(a._x/2),f=Math.sin(a._y/2),h=Math.sin(a._z/2),l=a.order;"XYZ"===l?(this._x=g*d*e+c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e-g*f*h):"YXZ"===" l?(this._x="g*d*e+c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e+g*f*h):"ZXY"===l?(this._x=g*d*e-c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e-g*f*h):"ZYX"===l?(this._x=g*d*e-c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e+g*f*h):"YZX"===l?(this._x=g*d*e+c*f*h,this._y=c*f*e+g*d*h,this._z=c*d*h-g*f*e,this._w=c*d*e-g*f*h):"XZY"===l&&(this._x=g*d*e-c*f*h,this._y=c*f*e-g*d*h,this._z=c*d*h+g*f*e,this._w=c*d*e+g*f*h);if(!1!==b)this.onChangeCallback();return" this},setfromaxisangle:function(a,="" b){var="" this},setfromrotationmatrix:function(a){var="" b="a.elements,c=b[0];a=b[4];var">g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(l-f)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(f+l)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(f+l)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,g=a._w,f=b._x,h=b._y,l=b._z,k=b._w;this._x=c*k+g*f+d*l-e*h;this._y=d*k+g*h+e*f-c*l;this._z=e*k+g*l+c*h-d*f;this._w=g*k-c*f-d*h-e*l;this.onChangeCallback();return this},multiplyVector3:function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,f=g*a._w+c*a._x+d*a._y+e*a._z;0>f?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,f=-f):this.copy(a);if(1<=f)return this._w="g,this._x=c,this._y=d,this._z=e,this;var" h="Math.acos(f),l=Math.sqrt(1-f*f);if(.001">Math.abs(l))return this._w=.5*(g+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;f=Math.sin((1-b)*h)/l;h=
Math.sin(b*h)/l;this._w=g*f+this._w*h;this._x=c*f+this._x*h;this._y=d*f+this._y*h;this._z=e*f+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){}};THREE.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+
a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},
sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;
this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,
b)}}(),clampLength:function(a,b){var c=this.length();this.multiplyScalar(Math.max(a,Math.min(b,c))/c);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=
-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){return this.multiplyScalar(a/
this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=
a.array[b+1];return this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-a.x,g=this.y-a.y;this.x=e*c-g*d+a.x;this.y=e*d+g*c+a.y;return this}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,
b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));
return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];
return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,g=a.y,f=a.z;a=a.w;var h=a*b+g*d-f*c,l=a*c+f*b-e*d,k=a*d+e*c-g*b,b=-e*b-g*c-f*d;this.x=h*a+b*-e+l*-f-k*-g;this.y=l*a+b*-g+k*-e-h*-f;this.z=k*a+b*-f+h*-g-l*-e;return this},project:function(){var a;
return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();
return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,
this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();this.multiplyScalar(Math.max(a,Math.min(b,c))/c);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},
round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},
length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},cross:function(a,b){if(void 0!==
b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,f=b.y,h=b.z;this.x=d*h-e*f;this.y=e*g-c*h;this.z=c*f-d*g;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),
projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=
this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},
getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],
a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===
a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},
addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=
a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},
divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var g=a[8],f=a[1],h=a[5],l=a[9];c=a[2];b=a[6];var k=a[10];if(.01>Math.abs(d-f)&&.01>Math.abs(g-c)&&.01>Math.abs(l-b)){if(.1>Math.abs(d+f)&&.1>Math.abs(g+c)&&.1>Math.abs(l+b)&&.1>Math.abs(e+
h+k-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;k=(k+1)/2;d=(d+f)/4;g=(g+c)/4;l=(l+b)/4;e>h&&e>k?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=g/b):h>k?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),b=d/c,d=l/c):.01>k?(c=b=.707106781,d=0):(d=Math.sqrt(k),b=g/d,c=l/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-l)*(b-l)+(g-c)*(g-c)+(f-d)*(f-d));.001>Math.abs(a)&&(a=1);this.x=(b-l)/a;this.y=(g-c)/a;this.z=(f-d)/a;this.w=Math.acos((e+h+k-1)/2);return this},min:function(a){this.x=
Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,
d){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},
roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},equals:function(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this}};
THREE.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=THREE.Math.clamp,e=a.elements;a=e[0];var g=e[4],f=e[8],h=e[1],l=e[5],k=e[9],m=e[2],p=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(-k,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(k,-1,1)),.99999>Math.abs(k)?
(this._y=Math.atan2(f,e),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-m,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-m,e),this._z=Math.atan2(-g,l)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-g,l))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-k,l),this._y=Math.atan2(-m,a)):(this._x=
0,this._y=Math.atan2(f,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(p,l),this._y=Math.atan2(f,a)):(this._x=Math.atan2(-k,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREE.Matrix4);a.makeRotationFromQuaternion(b);this.setFromRotationMatrix(a,c,d);return this}}(),setFromVector3:function(a,
b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+
3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},
at:function(a,b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var e=b.dot(b),e=b.dot(a)/e;d&&(e=THREE.Math.clamp(e,0,1));return e}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandbypoint(a[b]);return this},setfromcenterandsize:function(){var="" a="new" three.vector2;return="" function(b,c){var="" d="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return" this}}(),clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);="" return="" this},makeempty:function(){this.min.x="this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return" this},empty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new="" three.vector2).addvectors(this.min,this.max).multiplyscalar(.5)},size:function(a){return(a||new="" three.vector2).subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return="" this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);="" this.max.addscalar(a);return="" this},containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getparameter:function(a,b){return(b||new three.vector2).set((a.x-this.min.x)="" (this.max.x-this.min.x),(a.y-this.min.y)="" (this.max.y-this.min.y))},isintersectionbox:function(a){return="" a.max.x<this.min.x||a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>
this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&
a.max.equals(this.max)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandbypoint(a[b]);return this},setfromcenterandsize:function(){var="" a="new" three.vector3;return="" function(b,c){var="" d="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return" this}}(),setfromobject:function(){var="" function(b){var="" c="this;b.updateMatrixWorld(!0);" this.makeempty();b.traverse(function(b){var="" e="b.geometry;if(void" 0!="=e)if(e" instanceof="" three.geometry)for(var="" g="e.vertices,e=0,f=g.length;e<f;e++)a.copy(g[e]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a);else" if(e="" three.buffergeometry&&void="" this}}(),clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);="" this.max.copy(a.max);return="" this},makeempty:function(){this.min.x="this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return" this},empty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new="" three.vector3).addvectors(this.min,this.max).multiplyscalar(.5)},size:function(a){return(a||new="" three.vector3).subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return="" this},expandbyvector:function(a){this.min.sub(a);="" this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return="" this},containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getparameter:function(a,b){return(b||new three.vector3).set((a.x-this.min.x)="" (this.max.x-="" this.min.x),(a.y-this.min.y)="" (this.max.y-this.min.y),(a.z-this.min.z)="" (this.max.z-this.min.z))},isintersectionbox:function(a){return="" a.max.x<this.min.x||a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("three.matrix3: 0="==a&&(a=new" the="" constructor="" no="" longer="" reads="" arguments.="" use="" .set()="" instead.")};="" three.matrix3.prototype="{constructor:THREE.Matrix3,set:function(a,b,c,d,e,g,f,h,l){var" k="this.elements;k[0]=a;k[3]=b;k[6]=c;k[1]=d;k[4]=e;k[7]=g;k[2]=f;k[5]=h;k[8]=l;return" this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return="" this},clone:function(){return(new="" this.constructor).fromarray(this.elements)},copy:function(a){a="a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return" this},multiplyvector3:function(a){console.warn("three.matrix3:="" .multiplyvector3()="" has="" been="" removed.="" vector.applymatrix3(="" matrix="" )="" instead.");="" return="" a.applymatrix3(this)},multiplyvector3array:function(a){console.warn("three.matrix3:="" .multiplyvector3array()="" renamed.="" matrix.applytovector3array(="" array="" instead.");return="" this.applytovector3array(a)},applytovector3array:function(){var="" a;return="" function(b,c,d){void="" three.vector3);void="" e="0;e<d;e+=3,c+=3)a.fromArray(b,c),a.applyMatrix3(this),a.toArray(b,c);return" b}}(),applytobuffer:function(){var="" a&&(a="new" b}}(),multiplyscalar:function(a){var="" b="this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return" this},determinant:function(){var="" a="this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],f=a[5],h=a[6],l=a[7],a=a[8];return" b*g*a-b*f*l-c*e*a+c*f*h+d*e*l-d*g*h},getinverse:function(a,="" b){var="" c="a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw" error("matrix3.getinverse():="" can't="" invert="" matrix,="" determinant="" is="" 0");console.warn("matrix3.getinverse():="" 0");this.identity();return="" this}this.multiplyscalar(1="" c);return="" this},transpose:function(){var="" a,b="this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return" this},flattentoarrayoffset:function(a,b){var="" a},getnormalmatrix:function(a){this.getinverse(a).transpose();return="" this},transposeintoarray:function(a){var="" b[2];a[7]="b[5];a[8]=b[8];return" this},fromarray:function(a){this.elements.set(a);return="" this},toarray:function(){var="" float32array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("three.matrix4:="" three.matrix4.prototype="{constructor:THREE.Matrix4,set:function(a,b,c,d,e,g,f,h,l,k,m,p,n,q,s,t){var" v="this.elements;v[0]=a;v[4]=b;v[8]=c;v[12]=d;v[1]=e;v[5]=g;v[9]=f;v[13]=h;v[2]=l;v[6]=k;v[10]=m;v[14]=p;v[3]=n;v[7]=q;v[11]=s;v[15]=t;return" this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return="" three.matrix4).fromarray(this.elements)},copy:function(a){this.elements.set(a.elements);return="" this},extractposition:function(a){console.warn("three.matrix4:="" .extractposition()="" renamed="" to="" .copyposition().");="" this.copyposition(a)},copyposition:function(a){var="" this},extractbasis:function(a,b,c){var="" d="this.elements;a.set(d[0],d[1],d[2]);b.set(d[4],d[5],d[6]);c.set(d[8],d[9],d[10]);return" this},makebasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return="" this},extractrotation:function(){var="" function(b){void="" three.vector3);var="" b[1],b[2]).length(),e="1/a.set(b[4],b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*g;c[9]=b[9]*g;c[10]=b[10]*g;return" this}}(),makerotationfromeuler:function(a){!1="==a" instanceof="" three.euler&&console.error("three.matrix:="" .makerotationfromeuler()="" now="" expects="" euler="" rotation="" rather="" than="" vector3="" and="" order.");var="" l="g*e,k=c*h,m=c*e;b[0]=f*h;b[4]=-f*e;b[8]=d;b[1]=l+k*d;b[5]=a-m*d;b[9]=-c*f;b[2]=m-a*d;b[6]=k+l*d;b[10]=g*f}else"YXZ"===a.order?(a=f*h,l=f*e,k=d*h,m=d*e,b[0]=a+m*c,b[4]=k*c-l,b[8]=g*d,b[1]=g*e,b[5]=g*h,b[9]=-c,b[2]=l*c-k,b[6]=m+a*c,b[10]=g*f):"ZXY"===a.order?(a=f*h,l=f*e,k=d*h,m=d*e,b[0]=a-m*c,b[4]=-g*e,b[8]=k+l*c,b[1]=l+k*c,b[5]=g*h,b[9]=m-a*c,b[2]=-g*d,b[6]=c,b[10]=g*f):"ZYX"===a.order?(a=g*h,l=g*e,k=c*h,m=c*e,b[0]=f*h,b[4]=k*d-l,b[8]=a*d+m,b[1]=f*e,b[5]=" m*d+a,b[9]="l*d-k,b[2]=-d,b[6]=c*f,b[10]=g*f):"YZX"===a.order?(a=g*f,l=g*d,k=c*f,m=c*d,b[0]=f*h,b[4]=m-a*e,b[8]=k*e+l,b[1]=e,b[5]=g*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+k,b[10]=a-m*e):"XZY"===a.order&&(a=g*f,l=g*d,k=c*f,m=c*d,b[0]=f*h,b[4]=-e,b[8]=d*h,b[1]=a*e+m,b[5]=g*h,b[9]=l*e-k,b[2]=k*e-l,b[6]=c*h,b[10]=m*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return" this},setrotationfromquaternion:function(a){console.warn("three.matrix4:="" .setrotationfromquaternion()="" .makerotationfromquaternion().");="" this.makerotationfromquaternion(a)},makerotationfromquaternion:function(a){var="" this},lookat:function(){var="" a,b,c;return="" function(d,e,g){void="" three.vector3);="" var="" f="this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);a.crossVectors(g,c).normalize();0===a.lengthSq()&&(c.x+=1E-4,a.crossVectors(g,c).normalize());b.crossVectors(c,a);f[0]=a.x;f[4]=b.x;f[8]=c.x;f[1]=a.y;f[5]=b.y;f[9]=c.y;f[2]=a.z;f[6]=b.z;f[10]=c.z;return" this}}(),multiply:function(a,b){return="" void="" 0!="=b?(console.warn("THREE.Matrix4:" .multiply()="" only="" accepts="" one="" argument.="" .multiplymatrices(="" a,="" instead."),this.multiplymatrices(a,b)):this.multiplymatrices(this,a)},="" multiplymatrices:function(a,b){var="" k;e[6]="q*B+s*J+t*L+v*E;e[10]=q*y+s*F+t*Q+v*O;e[14]=q*z+s*C+t*M+v*d;e[3]=u*x+w*A+D*N+c*K;e[7]=u*B+w*J+D*L+c*E;e[11]=u*y+w*F+D*Q+c*O;e[15]=u*z+w*C+D*M+c*d;return" this},multiplytoarray:function(a,b,c){var="" this},multiplyscalar:function(a){var="" b[12]*="a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return" this},multiplyvector3:function(a){console.warn("three.matrix4:="" vector.applymatrix4(="" or="" vector.applyprojection(="" a.applyprojection(this)},multiplyvector4:function(a){console.warn("three.matrix4:="" .multiplyvector4()="" a.applymatrix4(this)},multiplyvector3array:function(a){console.warn("three.matrix4:="" a.y,a.z);return="" b}}(),rotateaxis:function(a){console.warn("three.matrix4:="" .rotateaxis()="" vector3.transformdirection(="" instead.");a.transformdirection(this)},crossvector:function(a){console.warn("three.matrix4:="" .crossvector()="" a.applymatrix4(this)},determinant:function(){var="" a[3]*(+e*h*m-d*l*="" m-e*f*p+c*l*p+d*f*n-c*h*n)+a[7]*(+b*h*n-b*l*p+e*g*p-d*g*n+d*l*k-e*h*k)+a[11]*(+b*l*m-b*f*n-e*g*m+c*g*n+e*f*k-c*l*k)+a[15]*(-d*f*k-b*h*m+b*f*p+d*g*m-c*g*p+c*h*k)},transpose:function(){var="" c[6];a[b+7]="c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return" a},getposition:function(){var="" function(){void="" three.vector3);console.warn("three.matrix4:="" .getposition()="" vector3.setfrommatrixposition(="" instead.");var="" a.set(b[12],b[13],b[14])}}(),setposition:function(a){var="" this},getinverse:function(a,b){var="" u-k*n*d+l*q*d;c[6]="h*q*v-g*t*v-h*n*u+e*t*u+g*n*d-e*q*d;c[10]=g*p*v-h*k*v+h*l*u-e*p*u-g*l*d+e*k*d;c[14]=h*k*n-g*p*n-h*l*q+e*p*q+g*l*t-e*k*t;c[3]=m*q*v-k*s*v-m*n*u+l*s*u+k*n*w-l*q*w;c[7]=g*s*v-f*q*v+f*n*u-e*s*u-g*n*w+e*q*w;c[11]=f*k*v-g*m*v-f*l*u+e*m*u+g*l*w-e*k*w;c[15]=g*m*n-f*k*n+f*l*q-e*m*q-g*l*s+e*k*s;c=e*c[0]+l*c[4]+n*c[8]+v*c[12];if(0===c){if(b)throw" error("three.matrix4.getinverse():="" 0");console.warn("three.matrix4.getinverse():="" 0");="" this.identity();return="" this},translate:function(a){console.error("three.matrix4:="" .translate()="" removed.")},rotatex:function(a){console.error("three.matrix4:="" .rotatex()="" removed.")},rotatey:function(a){console.error("three.matrix4:="" .rotatey()="" removed.")},rotatez:function(a){console.error("three.matrix4:="" .rotatez()="" removed.")},rotatebyaxis:function(a,b){console.error("three.matrix4:="" .rotatebyaxis()="" removed.")},scale:function(a){var="" this},getmaxscaleonaxis:function(){var="" math.sqrt(math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},maketranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return="" this},makerotationx:function(a){var="" this},makerotationy:function(a){var="" this},makerotationz:function(a){var="" this},makerotationaxis:function(a,b){var="" this},makescale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,="" 0,0,0,0,1);return="" this},compose:function(a,b,c){this.makerotationfromquaternion(b);this.scale(c);this.setposition(a);return="" this},decompose:function(){var="" a,b;return="" function(c,d,e){void="" three.matrix4);var="" g="this.elements,f=a.set(g[0],g[1],g[2]).length(),h=a.set(g[4],g[5],g[6]).length(),l=a.set(g[8],g[9],g[10]).length();0">this.determinant()&&(f=-f);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/f;var g=1/h,k=1/l;b.elements[0]*=c;b.elements[1]*=
c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=k;b.elements[9]*=k;b.elements[10]*=k;d.setFromRotationMatrix(b);e.x=f;e.y=h;e.z=l;return this}}(),makeFrustum:function(a,b,c,d,e,g){var f=this.elements;f[0]=2*e/(b-a);f[4]=0;f[8]=(b+a)/(b-a);f[12]=0;f[1]=0;f[5]=2*e/(d-c);f[9]=(d+c)/(d-c);f[13]=0;f[2]=0;f[6]=0;f[10]=-(g+e)/(g-e);f[14]=-2*g*e/(g-e);f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREE.Math.degToRad(.5*a));
var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,g){var f=this.elements,h=b-a,l=c-d,k=g-e;f[0]=2/h;f[4]=0;f[8]=0;f[12]=-((b+a)/h);f[1]=0;f[5]=2/l;f[9]=0;f[13]=-((c+d)/l);f[2]=0;f[6]=0;f[10]=-2/k;f[14]=-((g+e)/k);f[3]=0;f[7]=0;f[11]=0;f[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],
a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,
b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),
distanceSqToSegment:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(d,e,g,f){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),l=-this.direction.dot(b),k=c.dot(this.direction),m=-c.dot(b),p=c.lengthSq(),n=Math.abs(1-l*l),q;0<n?(d=l*m-k,e=l*k-m,q=h*n,0<=d?e>=-q?e<=q?(h=1 n,d*="h,e*=h,l=d*(d+l*e+2*k)+e*(l*d+e+2*m)+p):(e=h,d=Math.max(0,-(l*e+k)),l=-d*d+e*(e+2*m)+p):(e=-h,d=Math.max(0,-(l*e+k))," l="-d*d+e*(e+2*m)+p):e<=-q?(d=Math.max(0,-(-l*h+k)),e=0<d?-h:Math.min(Math.max(-h,-m),h),l=-d*d+e*(e+2*m)+p):e<=q?(d=0,e=Math.min(Math.max(-h,-m),h),l=e*(e+2*m)+p):(d=Math.max(0,-(l*h+k)),e=0<d?h:Math.min(Math.max(-h,-m),h),l=-d*d+e*(e+2*m)+p)):(e=0<l?-h:h,d=Math.max(0,-(l*e+k)),l=-d*d+e*(e+2*m)+p);g&&g.copy(this.direction).multiplyScalar(d).add(this.origin);f&&f.copy(b).multiplyScalar(e).add(a);return" l}}(),isintersectionsphere:function(a){return="" this.distancetopoint(a.center)<="a.radius},intersectSphere:function(){var" a="new" three.vector3;return="" function(b,c){a.subvectors(b.center,this.origin);var="" d="a.dot(this.direction),e=a.dot(a)-d*d,g=b.radius*b.radius;if(e">g)return null;g=Math.sqrt(g-e);e=d-g;d+=g;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+
a.constant)/b;return 0<=a?a:null},intersectplane:function(a,b){var c="this.distanceToPlane(a);return" null="==c?null:this.at(c,b)},isIntersectionBox:function(){var" a="new" three.vector3;return="" function(b){return="" null!="=this.intersectBox(b,a)}}(),intersectBox:function(a,b){var" c,d,e,g,f;d="1/this.direction.x;g=1/this.direction.y;f=1/this.direction.z;var" h="this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=g?(e=(a.min.y-h.y)*g,g*=a.max.y-h.y):(e=(a.max.y-h.y)*g,g*=a.min.y-" h.y);if(c="">g||e>d)return null;if(e>c||c!==c)c=e;if(g<d||d!==d)d=g;0<=f?(e=(a.min.z-h.z)*f,f*=a.max.z-h.z):(e=(a.max.z-h.z)*f,f*=a.min.z-h.z);if(c>f||e>d)return null;if(e>c||c!==c)c=e;if(f<d||d!==d)d=f;return 0="">d?null:this.at(0<=c?c:d,b)},intersecttriangle:function(){var a="new" three.vector3,b="new" three.vector3,c="new" three.vector3,d="new" three.vector3;return="" function(e,g,f,h,l){b.subvectors(g,e);c.subvectors(f,e);d.crossvectors(b,c);g="this.direction.dot(d);if(0<g){if(h)return" null;h="1}else" if(0="">g)h=-1,
g=-g;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;f=h*this.direction.dot(b.cross(a));if(0>f||e+f>g)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/g,l)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};
THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).center(d);for(var e=0,g=0,f=b.length;g<f;g++)e=math.max(e,d.distancetosquared(b[g]));this.radius=math.sqrt(e);return 0="" this}}(),clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius="a.radius;return" this},="" empty:function(){return="">=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distancetopoint:function(a){return a.distanceto(this.center)-this.radius},intersectssphere:function(a){var="" b="this.radius+a.radius;return" a.center.distancetosquared(this.center)<="b*b},clampPoint:function(a,b){var" c="this.center.distanceToSquared(a),d=b||new" three.vector3;d.copy(a);c="">this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));
return d},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}};
THREE.Frustum=function(a,b,c,d,e,g){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==g?g:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,d,e,g){var f=this.planes;f[0].copy(a);f[1].copy(b);f[2].copy(c);f[3].copy(d);f[4].copy(e);f[5].copy(g);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],g=c[3],f=c[4],h=c[5],l=c[6],k=c[7],m=c[8],p=c[9],n=c[10],q=c[11],s=c[12],t=c[13],v=c[14],
c=c[15];b[0].setComponents(g-a,k-f,q-m,c-s).normalize();b[1].setComponents(g+a,k+f,q+m,c+s).normalize();b[2].setComponents(g+d,k+h,q+p,c+t).normalize();b[3].setComponents(g-d,k-h,q-p,c-t).normalize();b[4].setComponents(g-e,k-l,q-n,c-v).normalize();b[5].setComponents(g+e,k+l,q+n,c+v).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);
return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsbox:function(){var a="new" three.vector3,b="new" three.vector3;return="" function(c){for(var="" d="this.planes,e=0;6">e;e++){var g=d[e];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z; var="" f="g.distanceToPoint(a),g=g.distanceToPoint(b);if(0">f&&0>g)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,
c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,
b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectline:function(){var a="new" three.vector3;return="" function(b,c){var="" d="c||new" three.vector3,e="b.delta(a),g=this.normal.dot(e);if(0===g){if(0===this.distanceToPoint(b.start))return" d.copy(b.start)}else="" return="" g="-(b.start.dot(this.normal)+this.constant)/g,0">g||1<g?void 0:d.copy(e).multiplyscalar(g).add(b.start)}}(),coplanarpoint:function(a){return(a||new="" three.vector3).copy(this.normal).multiplyscalar(-this.constant)},applymatrix4:function(){var="" a="new" three.vector3,b="new" three.vector3,c="new" three.matrix3;return="" function(d,e){var="" g="e||c.getNormalMatrix(d),g=a.copy(this.normal).applyMatrix3(g),f=this.coplanarPoint(b);f.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(g,f);return" this}}(),translate:function(a){this.constant-="a.dot(this.normal);return" this},equals:function(a){return="" a.normal.equals(this.normal)&&a.constant="==this.constant}};" three.math="{generateUUID:function(){var" .split(""),b="Array(36),c=0,d;return" function(){for(var="" e="0;36">e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,
b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),
radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};
THREE.Spline=function(a){function b(a,b,c,d,e,g,f){a=.5*(c-a);d=.5*(d-b);return(2*(b-c)+a+d)*f+(-3*(b-c)-2*a-d)*g+a*e+b}this.points=a;var c=[],d={x:0,y:0,z:0},e,g,f,h,l,k,m,p,n;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getpoint=function(a){e=(this.points.length-1)*a;g=math.floor(e);f=e-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:g+
2;k=this.points[c[0]];m=this.points[c[1]];p=this.points[c[2]];n=this.points[c[3]];h=f*f;l=f*h;d.x=b(k.x,m.x,p.x,n.x,f,h,l);d.y=b(k.y,m.y,p.y,n.y,f,h,l);d.z=b(k.z,m.z,p.z,n.z,f,h,l);return d};this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;a<c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getlength="function(a){var" b,c,d,e="b=b=0,g=new" three.vector3,f="new" three.vector3,h="[],l=0;h[0]=0;a||(a=100);c=this.points.length*a;g.copy(this.points[0]);for(a=1;a<c;a++)b=" a="" c,d="this.getPoint(b),f.copy(d),l+=f.distanceTo(g),g.copy(d),b*=this.points.length-1,b=Math.floor(b),b!==e&&(h[b]=l,e=b);h[h.length]=l;return{chunks:h,total:l}};this.reparametrizeByArcLength=function(a){var" b,c,d,e,g,f,h="[],l=new" three.vector3,k="this.getLength();h.push(l.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){c=k.chunks[b]-k.chunks[b-1];f=Math.ceil(a*c/k.total);e=(b-1)/(this.points.length-1);g=b/(this.points.length-1);for(c=1;c<f-1;c++)d=e+1/f*c*(g-e),d=this.getPoint(d)," h.push(l.copy(d).clone());h.push(l.copy(this.points[b]).clone())}this.points="h}};THREE.Triangle=function(a,b,c){this.a=void" 0!="=a?a:new" three.vector3;this.b="void" three.vector3;this.c="void" three.vector3};three.triangle.normal="function(){var" three.vector3;return="" function(b,c,d,e){e="e||new" three.vector3;e.subvectors(d,c);a.subvectors(b,c);e.cross(a);b="e.lengthSq();return" 0<b?e.multiplyscalar(1="" math.sqrt(b)):e.set(0,0,0)}}();="" three.triangle.barycoordfrompoint="function(){var" three.vector3,b="new" three.vector3,c="new" function(d,e,g,f,h){a.subvectors(f,e);b.subvectors(g,e);c.subvectors(d,e);d="a.dot(a);e=a.dot(b);g=a.dot(c);var" l="b.dot(b);f=b.dot(c);var" k="d*l-e*e;h=h||new" three.vector3;if(0="==k)return" h.set(-2,-1,-1);k="1/k;l=(l*g-e*f)*k;d=(d*f-e*g)*k;return" h.set(1-l-d,d,l)}}();="" three.triangle.containspoint="function(){var" function(b,c,d,e){b="THREE.Triangle.barycoordFromPoint(b,c,d,e,a);return" 0<="b.x&&0<=b.y&&1">=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,
this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},
equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}};THREE.Channels=function(){this.mask=1};THREE.Channels.prototype={constructor:THREE.Channels,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)}};three.clock=function(a){this.autostart=void 0="==this._listeners&&(this._listeners={});var" 0!="=a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};" three.clock.prototype="{constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=self.performance.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return" this.elapsedtime},getdelta:function(){var="" a="0;this.autoStart&&!this.running&&this.start();if(this.running){var" b="self.performance.now(),a=.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return" a}};three.eventdispatcher="function(){};" three.eventdispatcher.prototype="{constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void" c="this._listeners;void" c[a].push(b)},haseventlistener:function(a,b){if(void="" void="" d="c.indexOf(b);-1!==d&&c.splice(d,1)}}},dispatchEvent:function(a){if(void" (function(a){function="" b(a,b){return="" a.distance-b.distance}function="" c(a,b,g,f){if(!1!="=a.visible&&(a.raycast(b,g),!0===f)){a=a.children;f=0;for(var" h="a.length;f<h;f++)c(a[f],b,g,!0)}}a.Raycaster=function(b,c,g,f){this.ray=new" a.ray(b,c);this.near="g||0;this.far=f||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster:" params.pointcloud="" has="" been="" renamed="" to="" params.points.");return="" this.points}}})};="" a.raycaster.prototype="{constructor:a.Raycaster,linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(b,c){c" instanceof="" a.perspectivecamera?(this.ray.origin.setfrommatrixposition(c.matrixworld),this.ray.direction.set(b.x,b.y,.5).unproject(c).sub(this.ray.origin).normalize()):c="" a.orthographiccamera?(this.ray.origin.set(b.x,b.y,-1).unproject(c),this.ray.direction.set(0,0,-1).transformdirection(c.matrixworld)):console.error("three.raycaster:="" unsupported="" camera="" type.")},="" intersectobject:function(a,e){var="" g="[];c(a,this,g,e);g.sort(b);return" g},intersectobjects:function(a,e){var="" console.warn("three.raycaster.intersectobjects:="" objects="" is="" not="" an="" array."),g;for(var="" f="0,h=a.length;f<h;f++)c(a[f],this,g,e);g.sort(b);return" g}}})(three);="" three.object3d="function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.channels=new" three.channels;this.children="[];this.up=THREE.Object3D.DefaultUp.clone();var" three.vector3,b="new" three.euler,c="new" three.quaternion,d="new" three.vector3(1,1,1);b.onchange(function(){c.setfromeuler(b,!1)});c.onchange(function(){b.setfromquaternion(c,void="" 0,!1)});object.defineproperties(this,{position:{enumerable:!0,="" value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelviewmatrix:{value:new="" three.matrix4},normalmatrix:{value:new="" three.matrix3}});this.rotationautoupdate="!0;this.matrix=new" three.matrix4;this.matrixworld="new" three.matrix4;this.matrixautoupdate="THREE.Object3D.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}};" three.object3d.defaultup="new" three.vector3(0,1,0);three.object3d.defaultmatrixautoupdate="!0;" three.object3d.prototype="{constructor:THREE.Object3D,get" eulerorder(){console.warn("three.object3d:="" .eulerorder="" now="" .rotation.order.");return="" this.rotation.order},set="" eulerorder(a){console.warn("three.object3d:="" .rotation.order.");this.rotation.order="a},get" usequaternion(){console.warn("three.object3d:="" .usequaternion="" removed.="" the="" library="" uses="" quaternions="" by="" default.")},set="" usequaternion(a){console.warn("three.object3d:="" renderdepth(a){console.warn("three.object3d:="" .renderdepth="" use="" .renderorder,="" instead.")},="" applymatrix:function(a){this.matrix.multiplymatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setrotationfromaxisangle:function(a,b){this.quaternion.setfromaxisangle(a,b)},setrotationfromeuler:function(a){this.quaternion.setfromeuler(a,!0)},setrotationfrommatrix:function(a){this.quaternion.setfromrotationmatrix(a)},setrotationfromquaternion:function(a){this.quaternion.copy(a)},rotateonaxis:function(){var="" three.quaternion;return="" function(b,c){a.setfromaxisangle(b,="" c);this.quaternion.multiply(a);return="" this}}(),rotatex:function(){var="" three.vector3(1,0,0);return="" function(b){return="" this.rotateonaxis(a,b)}}(),rotatey:function(){var="" three.vector3(0,1,0);return="" this.rotateonaxis(a,b)}}(),rotatez:function(){var="" three.vector3(0,0,1);return="" this.rotateonaxis(a,b)}}(),translateonaxis:function(){var="" three.vector3;return="" function(b,c){a.copy(b).applyquaternion(this.quaternion);this.position.add(a.multiplyscalar(c));="" return="" this}}(),translate:function(a,b){console.warn("three.object3d:="" .translate()="" .translateonaxis(="" axis,="" distance="" )="" instead.");return="" this.translateonaxis(b,a)},translatex:function(){var="" this.translateonaxis(a,b)}}(),translatey:function(){var="" this.translateonaxis(a,b)}}(),translatez:function(){var="" this.translateonaxis(a,="" b)}}(),localtoworld:function(a){return="" a.applymatrix4(this.matrixworld)},worldtolocal:function(){var="" three.matrix4;return="" b.applymatrix4(a.getinverse(this.matrixworld))}}(),lookat:function(){var="" function(b){a.lookat(b,this.position,this.up);this.quaternion.setfromrotationmatrix(a)}}(),add:function(a){if(1<arguments.length){for(var="" this}if(a="==this)return" console.error("three.object3d.add:="" object="" can't="" be="" added="" as="" child="" of="" itself.",="" a),this;a="" three.object3d?(null!="=a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add:" instance="" three.object3d.",a);return="" this},remove:function(a){if(1<arguments.length)for(var="" .getchildbyname()="" .getobjectbyname().");="" this.getobjectbyname(a)},getobjectbyid:function(a){return="" this.getobjectbyproperty("id",a)},getobjectbyname:function(a){return="" this.getobjectbyproperty("name",a)},getobjectbyproperty:function(a,b){if(this[a]="==b)return" this;for(var="" e="this.children[c].getObjectByProperty(a,b);if(void" e}},getworldposition:function(a){a="a||new" three.vector3;this.updatematrixworld(!0);return="" a.setfrommatrixposition(this.matrixworld)},getworldquaternion:function(){var="" function(c){c="c||new" three.quaternion;this.updatematrixworld(!0);this.matrixworld.decompose(a,c,b);return="" c}}(),getworldrotation:function(){var="" function(b){b="b||new" three.euler;this.getworldquaternion(a);return="" b.setfromquaternion(a,this.rotation.order,!1)}}(),getworldscale:function(){var="" three.vector3;this.updatematrixworld(!0);this.matrixworld.decompose(a,="" b,c);return="" c}}(),getworlddirection:function(){var="" three.vector3;this.getworldquaternion(a);return="" b.set(0,0,1).applyquaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var="" updatematrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixworldneedsupdate="!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var" b(a){var="" in="" a){var="" d.metadata;b.push(d)}return="" b}var="" d},clone:function(a){return(new="" this.constructor).copy(this,a)},copy:function(a,b){void="" a.matrixautoupdate;this.matrixworldneedsupdate="a.matrixWorldNeedsUpdate;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var" this}};three.eventdispatcher.prototype.apply(three.object3d.prototype);three.object3didcount="0;" three.face3="function(a,b,c,d,e,g){this.a=a;this.b=b;this.c=c;this.normal=d" three.vector3?d:new="" three.vector3;this.vertexnormals="Array.isArray(d)?d:[];this.color=e" three.color?e:new="" three.color;this.vertexcolors="Array.isArray(e)?e:[];this.materialIndex=void" three.face3.prototype="{constructor:THREE.Face3,clone:function(){return(new" this.constructor).copy(this)},copy:function(a){this.a="a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var" this}};="" three.face4="function(a,b,c,d,e,g,f){console.warn("THREE.Face4" will="" created="" new="" three.face3(a,b,c,e,g,f)};three.bufferattribute="function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.itemSize=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};" three.bufferattribute.prototype="{constructor:THREE.BufferAttribute,get" length(){console.warn("three.bufferattribute:="" .length="" deprecated.="" please="" .count.");return="" this.array.length},get="" count(){return="" this.array.length="" this.itemsize},set="" needsupdate(a){!0="==a&&this.version++},setDynamic:function(a){this.dynamic=a;return" this},copy:function(a){this.array="new" a.array.constructor(a.array);this.itemsize="a.itemSize;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.itemSize;" c*="b.itemSize;for(var" this},copyarray:function(a){this.array.set(a);return="" this},copycolorsarray:function(a){for(var="" color="" undefined",d),g="new" three.color);b[c++]="g.r;b[c++]=g.g;b[c++]=g.b}return" this},copyindicesarray:function(a){for(var="" g.c}return="" this},copyvector2sarray:function(a){for(var="" vector="" three.vector2);b[c++]="g.x;b[c++]=g.y}return" this},copyvector3sarray:function(a){for(var="" three.vector3);b[c++]="g.x;b[c++]=g.y;b[c++]=g.z}return" this},="" copyvector4sarray:function(a){for(var="" three.vector4);b[c++]="g.x;b[c++]=g.y;b[c++]=g.z;b[c++]=g.w}return" this},set:function(a,b){void="" this},getx:function(a){return="" this.array[a*this.itemsize]},setx:function(a,b){this.array[a*this.itemsize]="b;return" this},gety:function(a){return="" this.array[a*this.itemsize+1]},="" sety:function(a,b){this.array[a*this.itemsize+1]="b;return" this},getz:function(a){return="" this.array[a*this.itemsize+2]},setz:function(a,b){this.array[a*this.itemsize+2]="b;return" this},getw:function(a){return="" this.array[a*this.itemsize+3]},setw:function(a,b){this.array[a*this.itemsize+3]="b;return" this},setxy:function(a,b,c){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return" this},setxyz:function(a,b,c,d){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return" this},setxyzw:function(a,="" b,c,d,e){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return" this},clone:function(){return(new="" this.constructor).copy(this)}};three.int8attribute="function(a,b){return" three.bufferattribute(new="" int8array(a),b)};three.uint8attribute="function(a,b){return" uint8array(a),b)};three.uint8clampedattribute="function(a,b){return" uint8clampedarray(a),b)};="" three.int16attribute="function(a,b){return" int16array(a),b)};three.uint16attribute="function(a,b){return" uint16array(a),b)};three.int32attribute="function(a,b){return" int32array(a),b)};three.uint32attribute="function(a,b){return" uint32array(a),b)};three.float32attribute="function(a,b){return" float32array(a),b)};="" three.float64attribute="function(a,b){return" float64array(a),b)};three.dynamicbufferattribute="function(a,b){console.warn("THREE.DynamicBufferAttribute" three.bufferattribute().setdynamic(="" true="" instead.");return(new="" three.bufferattribute(a,b)).setdynamic(!0)};three.instancedbufferattribute="function(a,b,c){THREE.BufferAttribute.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype);" three.instancedbufferattribute.prototype.constructor="THREE.InstancedBufferAttribute;THREE.InstancedBufferAttribute.prototype.copy=function(a){THREE.BufferAttribute.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this};three.interleavedbuffer="function(a,b){this.uuid=THREE.Math.generateUUID();this.array=a;this.stride=b;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0};" three.interleavedbuffer.prototype="{constructor:THREE.InterleavedBuffer,get" length(){return="" this.stride},set="" a.array.constructor(a.array);this.stride="a.stride;this.dynamic=a.dynamic},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var" this},set:function(a,="" b){void="" this.constructor).copy(this)}};three.instancedinterleavedbuffer="function(a,b,c){THREE.InterleavedBuffer.call(this,a,b);this.meshPerAttribute=c||1};THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype);THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer;" three.instancedinterleavedbuffer.prototype.copy="function(a){THREE.InterleavedBuffer.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this};three.interleavedbufferattribute="function(a,b,c){this.uuid=THREE.Math.generateUUID();this.data=a;this.itemSize=b;this.offset=c};" three.interleavedbufferattribute.prototype="{constructor:THREE.InterleavedBufferAttribute,get" this.data.array.length="" this.data.stride},setx:function(a,b){this.data.array[a*this.data.stride+this.offset]="b;return" this},sety:function(a,b){this.data.array[a*this.data.stride+this.offset+1]="b;return" this},setz:function(a,b){this.data.array[a*this.data.stride+this.offset+="" 2]="b;return" this},setw:function(a,b){this.data.array[a*this.data.stride+this.offset+3]="b;return" this.data.array[a*this.data.stride+this.offset]},gety:function(a){return="" this.data.array[a*this.data.stride+this.offset+1]},getz:function(a){return="" this.data.array[a*this.data.stride+this.offset+2]},getw:function(a){return="" this.data.array[a*this.data.stride+this.offset+3]},setxy:function(a,b,c){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;" this},setxyz:function(a,b,c,d){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return" this},setxyzw:function(a,b,c,d,e){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return" three.geometry="function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=" this.verticesneedupdate="!1};" three.geometry.prototype="{constructor:THREE.Geometry,applyMatrix:function(a){for(var" three.matrix3).getnormalmatrix(a),c="0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var" a;return="" function(b){void="" three.matrix4);a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" three.matrix4);a.makerotationy(b);this.applymatrix(a);return="" this}}(),rotatez:function(){var="" three.matrix4);a.makerotationz(b);this.applymatrix(a);return="" this}}(),translate:function(){var="" function(b,c,d){void="" three.matrix4);="" a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" three.matrix4);a.makescale(b,c,d);this.applymatrix(a);return="" this}}(),lookat:function(){var="" three.object3d);a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),frombuffergeometry:function(a){function="" b(a,b,d){var="" [],e="new" three.face3(a,b,d,e,g);c.faces.push(e);void="" 0,e="a.attributes,g=e.position.array,f=void" 0,h="void" 0,l="void" 0,k="void" 0;void="" m="[],p=[],n=[]," q="e=0;e<g.length;e+=3,q+=2)c.vertices.push(new" three.vector3(g[e],g[e+1],g[e+2])),void="" three.vector3(f[e],f[e+1],f[e+2])),void="" three.color(h[e],h[e+1],h[e+2])),void="" three.vector2(l[q],l[q+1])),void="" three.vector2(k[q],k[q+1]));if(void="" for(e="0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else" this},center:function(){this.computeboundingbox();var="" a},normalize:function(){this.computeboundingsphere();var="" three.matrix4;c.set(b,0,0,-b*a.x,0,b,0,="" -b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applymatrix(c);return="" this},computefacenormals:function(){for(var="" three.vector3,c="0,d=this.faces.length;c<d;c++){var" b,c,d;d="Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)d[b]=new" three.vector3;if(a){var="" e,g,f,h="new" three.vector3,="" l="new" three.vector3;a="0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],g=this.vertices[c.b],f=this.vertices[c.c],h.subVectors(f,g),l.subVectors(e,g),h.cross(l),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else" for(a="0,b=this.faces.length;a<b;a++)c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a])," e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]="d[c.a].clone(),e[1]=d[c.b].clone(),e[2]=d[c.c].clone())},computeMorphNormals:function(){var" a,b,c,d,e;c="0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=" e.vertexnormals[a].clone();var="" three.geometry;g.faces="this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var" three.vector3,l="{a:new" three.vector3,b:new="" three.vector3,c:new="" three.vector3},e.push(h),f.push(l)}f="this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;" g.computefacenormals();g.computevertexnormals();c="0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=f.faceNormals[c],l=f.vertexNormals[c],h.copy(e.normal),l.a.copy(e.vertexNormals[0]),l.b.copy(e.vertexNormals[1]),l.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry:" .computetangents()="" removed.")},computelinedistances:function(){for(var="" three.box3);this.boundingbox.setfrompoints(this.vertices)},computeboundingsphere:function(){null="==this.boundingSphere&&(this.boundingSphere=new" three.sphere);this.boundingsphere.setfrompoints(this.vertices)},merge:function(a,b,c){if(!1="==a" three.geometry)console.error("three.geometry.merge():="" geometry="" three.geometry.",="" a);else{var="" d,e="this.vertices.length,g=this.vertices,f=a.vertices,h=this.faces,l=a.faces,k=this.faceVertexUvs[0];a=a.faceVertexUvs[0];void" three.matrix3).getnormalmatrix(b));for(var="" n="f[m].clone();void" three.face3(f.a+e,f.b+e,f.c+e);n.normal.copy(f.normal);void="" g;b++)q="s[b].clone(),void" three.mesh?console.error("three.geometry.mergemesh():="" mesh="" three.mesh.",a):(a.matrixautoupdate&&a.updatematrix(),="" this.merge(a.geometry,a.matrix))},mergevertices:function(){var="">d;d++)if(e[d]===e[(d+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(e=a[g],this.faces.splice(e, 0="==this.faceVertexUvs[c]&&(this.faceVertexUvs[c]=[]);for(var" 1),c="0,f=this.faceVertexUvs.length;c<f;c++)this.faceVertexUvs[c].splice(e,1);g=this.vertices.length-b.length;this.vertices=b;return" g},sortfacesbymaterialindex:function(){for(var="" a="this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return" a.materialindex-b.materialindex});var="" d="this.faceVertexUvs[0],e=this.faceVertexUvs[1],g,f;d&&d.length===b&&(g=[]);e&&e.length===b&&(f=[]);for(c=0;c<b;c++){var" h="a[c]._id;g&&g.push(d[h]);f&&f.push(e[h])}g&&(this.faceVertexUvs[0]=g);f&&(this.faceVertexUvs[1]=" f)},tojson:function(){function="" a(a,b,c){return="" c?a|1<<b:a&~(1<<b)}function="" b(a){var="" b="a.x.toString()+a.y.toString()+a.z.toString();if(void" 0!="=k[b])return" k[b];k[b]="l.length/3;l.push(a.x,a.y,a.z);return" k[b]}function="" c(a){var="" p[b];p[b]="m.length;m.push(a.getHex());return" p[b]}function="" d(a){var="" q[b];q[b]="n.length/2;n.push(a.x,a.y);return" q[b]}var="" e="{metadata:{version:4.4,type:"Geometry"," generator:"geometry.tojson"}};e.uuid="this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void" g="this.parameters,f;for(f" in="" g)void="" e}g="[];for(f=0;f<this.vertices.length;f++){var" s="this.faces[f],t=void" e},clone:function(){return(new="" this.constructor).copy(this)},="" copy:function(a){this.vertices="[];this.faces=[];this.faceVertexUvs=[[]];for(var" f="b[e],h=[],l=0,k=f.length;l<k;l++)h.push(f[l].clone());this.faceVertexUvs[c].push(h)}}return" this},dispose:function(){this.dispatchevent({type:"dispose"})}};="" three.eventdispatcher.prototype.apply(three.geometry.prototype);three.geometryidcount="0;" three.directgeometry="function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="DirectGeometry";this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};" three.directgeometry.prototype="{constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry:" computefacenormals()="" is="" not="" method="" of="" this="" type="" geometry.")},computevertexnormals:function(){console.warn("three.directgeometry:="" computevertexnormals()="" geometry.")},computegroups:function(a){var="" b,c="[]," d;a="a.faces;for(var" l="[],k=0;k<h;k++)l[k]=[];this.morphTargets.position=l}var" m="a.morphNormals,p=m.length;if(0<p){for(var" n="[],k=0;k<p;k++)n[k]=" [];this.morphtargets.normal="n}for(var" q="a.skinIndices,s=a.skinWeights,t=q.length===c.length,v=s.length===c.length,k=0;k<b.length;k++){var" u="b[k];this.vertices.push(c[u.a],c[u.b],c[u.c]);var" w="u.vertexNormals;3===w.length?this.normals.push(w[0],w[1],w[2]):(w=u.normal,this.normals.push(w,w,w));w=u.vertexColors;3===w.length?this.colors.push(w[0],w[1],w[2]):(w=u.color,this.colors.push(w,w,w));!0===e&&(w=d[0][k],void" undefined="" vertexuv="" ",="" k),this.uvs.push(new="" three.vector2,new="" three.vector2)));!0="==g&&(w=d[1][k],void" vertexuv2="" ",k),this.uvs2.push(new="" three.vector2)));for(w="0;w<h;w++){var" s[u.c])}this.computegroups(a);this.verticesneedupdate="a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}};three.eventdispatcher.prototype.apply(three.directgeometry.prototype);="" three.buffergeometry="function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}};" three.buffergeometry.prototype="{constructor:THREE.BufferGeometry,addIndex:function(a){console.warn("THREE.BufferGeometry:" .addindex()="" has="" been="" renamed="" to="" .setindex().");this.setindex(a)},getindex:function(){return="" this.index},setindex:function(a){this.index="a},addAttribute:function(a,b,c){!1===b" instanceof="" three.bufferattribute&&!1="==b" three.interleavedbufferattribute?(console.warn("three.buffergeometry:="" .addattribute()="" now="" expects="" (="" name,="" attribute="" )."),this.addattribute(a,new="" three.bufferattribute(b,="" c))):"index"="==a?(console.warn("THREE.BufferGeometry.addAttribute:" use="" .setindex()="" for="" index="" attribute."),this.setindex(b)):this.attributes[a]="b},getAttribute:function(a){return" this.attributes[a]},removeattribute:function(a){delete="" this.attributes[a]},get="" drawcalls(){console.error("three.buffergeometry:="" .drawcalls="" .groups.");return="" this.groups},get="" offsets(){console.warn("three.buffergeometry:="" .offsets="" this.groups},adddrawcall:function(a,="" b,c){void="" .adddrawcall()="" no="" longer="" supports="" indexoffset.");console.warn("three.buffergeometry:="" .addgroup().");this.addgroup(a,b)},cleardrawcalls:function(){console.warn("three.buffergeometry:="" .cleardrawcalls()="" .cleargroups().");this.cleargroups()},addgroup:function(a,b,c){this.groups.push({start:a,count:b,materialindex:void="" b},applymatrix:function(a){var="" three.matrix3).getnormalmatrix(a).applytovector3array(b.array),b.needsupdate="!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var" a;return="" function(b){void="" three.matrix4);a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" a;="" return="" three.matrix4);a.makerotationy(b);this.applymatrix(a);return="" this}}(),rotatez:function(){var="" three.matrix4);a.makerotationz(b);this.applymatrix(a);return="" this}}(),translate:function(){var="" function(b,c,d){void="" three.matrix4);a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" three.matrix4);a.makescale(b,c,d);this.applymatrix(a);="" this}}(),lookat:function(){var="" three.object3d);a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),center:function(){this.computeboundingbox();var="" a},setfromobject:function(a){var="" three.points||a="" three.line){a="new" three.float32attribute(3*b.vertices.length,3);var="" c="new" three.float32attribute(3*b.colors.length,3);this.addattribute("position",="" a.copyvector3sarray(b.vertices));this.addattribute("color",c.copycolorsarray(b.colors));b.linedistances&&b.linedistances.length="==b.vertices.length&&(a=new" three.float32attribute(b.linedistances.length,1),this.addattribute("linedistance",a.copyarray(b.linedistances)));null!="=b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else" three.mesh&&b="" three.geometry&&this.fromgeometry(b);return="" this},updatefromobject:function(a){var="" three.mesh){var="" this.fromgeometry(b);c.verticesneedupdate="b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void" c.needsupdate="!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void" (c.copyarray(b.linedistances),c.needsupdate="!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return" this},fromgeometry:function(a){a.__directgeometry="(new" three.directgeometry).fromgeometry(a);return="" this.fromdirectgeometry(a.__directgeometry)},fromdirectgeometry:function(a){var="" float32array(3*a.vertices.length);this.addattribute("position",(new="" three.bufferattribute(b,3)).copyvector3sarray(a.vertices));0<a.normals.length&&="" (b="new" float32array(3*a.normals.length),this.addattribute("normal",(new="" three.bufferattribute(b,3)).copyvector3sarray(a.normals)));0<a.colors.length&&(b="new" float32array(3*a.colors.length),this.addattribute("color",(new="" three.bufferattribute(b,3)).copycolorsarray(a.colors)));0<a.uvs.length&&(b="new" float32array(2*a.uvs.length),this.addattribute("uv",(new="" three.bufferattribute(b,2)).copyvector2sarray(a.uvs)));0<a.uvs2.length&&(b="new" float32array(2*a.uvs2.length),this.addattribute("uv2",(new="" 2)).copyvector2sarray(a.uvs2)));0<a.indices.length&&(b="new" (65535<a.vertices.length?uint32array:uint16array)(3*a.indices.length),this.setindex((new="" three.bufferattribute(b,1)).copyindicesarray(a.indices)));this.groups="a.groups;for(var" a.morphtargets){for(var="" three.float32attribute(3*f.length,3);b.push(h.copyvector3sarray(f))}this.morphattributes[c]="b}0<a.skinIndices.length&&(c=new" three.float32attribute(4*a.skinindices.length,="" 4),this.addattribute("skinindex",c.copyvector4sarray(a.skinindices)));0<a.skinweights.length&&(c="new" three.float32attribute(4*a.skinweights.length,4),this.addattribute("skinweight",c.copyvector4sarray(a.skinweights)));null!="=a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return" this},computeboundingbox:function(){var="" three.vector3;return="" function(){null="==this.boundingBox&&(this.boundingBox=new" three.box3);var="" computed="" min="" max="" have="" nan="" values.="" the="" "position"="" likely="" values.',this)}}(),computeboundingsphere:function(){var="" three.box3,b="new" three.sphere);var="" radius="" nan.="" values.',="" this)}}}(),computefacenormals:function(){},computevertexnormals:function(){var="" three.bufferattribute(new="" float32array(d.length),3));else="" for(var="" three.vector3,p="new" three.vector3,n="new" three.vector3,q="new" three.vector3,s="new" three.vector3;if(a){a="a.array;0===c.length&&this.addGroup(0,a.length);" t="0,v=c.length;t<v;++t)for(g=c[t],f=g.start,h=g.count,g=f,f+=h;g<f;g+=3)h=3*a[g+0],l=3*a[g+1],k=3*a[g+2],m.fromArray(d,h),p.fromArray(d,l),n.fromArray(d,k),q.subVectors(n,p),s.subVectors(m,p),q.cross(s),e[h]+=q.x,e[h+1]+=q.y,e[h+2]+=q.z,e[l]+=q.x,e[l+1]+=q.y,e[l+2]+=q.z,e[k]+=q.x,e[k+1]+=q.y,e[k+2]+=q.z}else" for(g="0,f=d.length;g<f;g+=9)m.fromArray(d,g),p.fromArray(d,g+3),n.fromArray(d,g+6),q.subVectors(n,p),s.subVectors(m,p),q.cross(s),e[g]=q.x,e[g+1]=q.y,e[g+2]=q.z,e[g+3]=q.x,e[g+4]=q.y," e[g+5]="q.z,e[g+6]=q.x,e[g+7]=q.y,e[g+8]=q.z;this.normalizeNormals();b.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry:" .computetangents()="" removed.")},computeoffsets:function(a){console.warn("three.buffergeometry:="" .computeoffsets()="" removed.")},merge:function(a,b){if(!1="==a" three.buffergeometry)console.error("three.buffergeometry.merge():="" geometry="" an="" instance="" three.buffergeometry.",a);else{void="" d;for(d="" c)if(void="" this}},normalizenormals:function(){for(var="" if(void="" b)void="" a}a.data="{attributes:{}};var" d){var="" c&&(a.data.boundingsphere="{center:c.center.toArray(),radius:c.radius});return" a},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){var="" b)this.addattribute(c,b[c].clone());a="a.groups;c=0;for(b=a.length;c<b;c++){var" this},dispose:function(){this.dispatchevent({type:"dispose"})}};three.eventdispatcher.prototype.apply(three.buffergeometry.prototype);="" three.buffergeometry.maxindex="65535;THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void" 0};three.instancedbuffergeometry.prototype="Object.create(THREE.BufferGeometry.prototype);THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry;THREE.InstancedBufferGeometry.prototype.addGroup=function(a,b,c){this.groups.push({start:a,count:b,instances:c})};" three.instancedbuffergeometry.prototype.copy="function(a){var" this};three.eventdispatcher.prototype.apply(three.instancedbuffergeometry.prototype);="" three.animationaction="function(a,b,c,d,e){if(void" error("clip="" null");this.clip="a;this.localRoot=null;this.startTime=b||0;this.timeScale=c||1;this.weight=d||1;this.loop=e||THREE.LoopRepeat;this.loopCount=0;this.enabled=!0;this.actionTime=-this.startTime;this.clipTime=0;this.propertyBindings=[]};" three.animationaction.prototype="{constructor:THREE.AnimationAction,setLocalRoot:function(a){this.localRoot=a;return" this},updatetime:function(a){var="" this.loopcount="0,this.clipTime=Math.min(Math.max(this.actionTime,0),d),this.clipTime!==b&&(this.clipTime===d?this.mixer.dispatchEvent({type:"finished",action:this,direction:1}):0===this.clipTime&&this.mixer.dispatchEvent({type:"finished",action:this," direction:-1})),this.cliptime;this.loopcount="Math.floor(this.actionTime/d);a=this.actionTime-this.loopCount*d;a%=d;this.loop==THREE.LoopPingPong&&1===Math.abs(this.loopCount%2)&&(a=d-a);this.clipTime=a;this.loopCount!==c&&this.mixer.dispatchEvent({type:"loop",action:this,loopDelta:this.loopCount-this.loopCount});return" this.cliptime},syncwith:function(a){this.actiontime="a.actionTime;this.timeScale=a.timeScale;return" this},warptoduration:function(a){this.timescale="this.clip.duration/a;return" this},="" init:function(a){this.cliptime="a-this.startTime;return" this},update:function(a){this.updatetime(a);return="" this.clip.getat(this.cliptime)},gettimescaleat:function(a){return="" this.timescale.getat?this.timescale.getat(a):this.timescale},getweightat:function(a){return="" this.weight.getat?this.weight.getat(a):this.weight}};="" three.animationclip="function(a,b,c){this.name=a;this.tracks=c;this.duration=void">this.duration)for(a=0;a<this.tracks.length;a++)b=this.tracks[a],this.duration=math.max(b.keys[b.keys.length-1].time);this.trim();this.optimize();this.results=[]}; 0="==e.length?null:new" three.animationclip.prototype="{constructor:THREE.AnimationClip,getAt:function(a){a=Math.max(0,Math.min(a,this.duration));for(var" b="0;b<this.tracks.length;b++)this.results[b]=this.tracks[b].getAt(a);return" this.results},trim:function(){for(var="" a="0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return" this},optimize:function(){for(var="" this}};="" three.animationclip.createfrommorphtargetsequence="function(a,b,c){for(var" d="b.length,e=[],g=0;g<d;g++){var" f="[];f.push({time:(g+d-1)%d,value:0});f.push({time:g,value:1});f.push({time:(g+1)%d,value:0});f.sort(THREE.KeyframeTrack.keyComparer);0===f[0].time&&f.push({time:d,value:f[0].value});e.push((new" three.numberkeyframetrack(".morphtargetinfluences["+b[g].name+"]",f)).scale(1="" c))}return="" new="" three.animationclip(a,-1,e)};="" three.animationclip.findbyname="function(a,b){for(var" c="0;c<a.length;c++)if(a[c].name===b)return" a[c];return="" null};three.animationclip.createclipsfrommorphtargetsequences="function(a,b){for(var" l="h[1];(h=c[l])||(c[l]=h=[]);h.push(f)}}d=[];for(l" in="" c)d.push(three.animationclip.createfrommorphtargetsequence(l,c[l],b));return="" d};="" three.animationclip.parse="function(a){for(var" three.animationclip(a.name,a.duration,b)};="" three.animationclip.parseanimation="function(a,b,c){if(!a)return" console.error("="" no="" animation="" jsonloader="" data"),null;var="" g="[],f=0;f<b.length;f++){var" h="b[f];void" 0!="=h[c]&&g.push({time:h.time,value:e(h)})}return" 0<g.length?new="" d(a,g):null},e="[],g=a.name||"default",f=a.length||-1,h=a.fps||30;a=a.hierarchy||[];for(var" k="a[l].keys;if(k&&0!=k.length)if(k[0].morphTargets){for(var" p="0;p<k[m].morphTargets.length;p++)f[k[m].morphTargets[p]]=" -1;for(var="" n="" f){for(var="" q="[],p=0;p<k[m].morphTargets.length;p++){var" s="k[m];q.push({time:s.time,value:s.morphTarget===n?1:0})}e.push(new" three.numberkeyframetrack(c+".morphtargetinfluence["+n+"]",q))}f="f.length*(h||1)}else" m="c+".bones["+b[l].name+"]",(p=d(m+".position",k,"pos",THREE.VectorKeyframeTrack,function(a){return(new" three.vector3).fromarray(a.pos)}))&&e.push(p),(p="d(m+".quaternion",k,"rot",THREE.QuaternionKeyframeTrack,function(a){return" a.rot.slerp?a.rot.clone():(new="" three.quaternion).fromarray(a.rot)}))&&="" e.push(p),(k="d(m+".scale",k,"scl",THREE.VectorKeyframeTrack,function(a){return(new" three.vector3).fromarray(a.scl)}))&&e.push(k)}return="" three.animationclip(g,f,e)};three.animationmixer="function(a){this.root=a;this.time=0;this.timeScale=1;this.actions=[];this.propertyBindingMap={}};" three.animationmixer.prototype="{constructor:THREE.AnimationMixer,addAction:function(a){this.actions.push(a);a.init(this.time);a.mixer=this;for(var" e="b[d],g=c.uuid+"-"+e.name,f=this.propertyBindingMap[g];void" three.propertybinding(c,e.name),this.propertybindingmap[g]="f);a.propertyBindings.push(f);f.referenceCount+=1}},removeAllActions:function(){for(var" this.propertybindingmap)this.propertybindingmap[b].unbind();="" this.actions="[];this.propertyBindingMap={};return" this},removeaction:function(a){var="">=e.referenceCount&&(e.unbind(),delete this.propertyBindingMap[d])}return this},findActionByName:function(a){for(var b=0;b<this.actions.length;b++)if(this.actions[b].name===a)return this.actions[b];="" return="" null},play:function(a,b){a.starttime="this.time;this.addAction(a);return" this},fadeout:function(a,b){var="" c="[];c.push({time:this.time,value:1});c.push({time:this.time+b,value:0});a.weight=new" three.numberkeyframetrack("weight",c);return="" this},fadein:function(a,b){var="" this},warp:function(a,b,c,d){var="" e="[];e.push({time:this.time,value:b});e.push({time:this.time+d,value:c});" a.timescale="new" three.numberkeyframetrack("timescale",e);return="" this},crossfade:function(a,b,c,d){this.fadeout(a,c);this.fadein(b,c);if(d){d="a.clip.duration/b.clip.duration;var" this},update:function(a){a*="this.timeScale;this.time+=a;for(var" b="0;b<this.actions.length;b++){var">=c.weight)&&c.enabled)for(var g=0;g<e.length;g++)c.propertybindings[g].accumulate(e[g], d)}for(var="" f="" in="" this.propertybindingmap)this.propertybindingmap[f].apply();return="" this}};three.eventdispatcher.prototype.apply(three.animationmixer.prototype);="" three.animationutils="{getEqualsFunc:function(a){return" a.equals?function(a,c){return="" a.equals(c)}:function(a,c){return="" a="==c}},clone:function(a){if("object"===typeof" a){if(a.clone)return="" a.clone();console.error("can="" not="" figure="" out="" how="" to="" copy="" exemplarvalue",a)}return="" a},lerp:function(a,b,c,d){return="" three.animationutils.getlerpfunc(a,d)(a,b,c)},lerp_object:function(a,b,c){return="" a.lerp(b,c)},slerp_object:function(a,b,c){return="" a.slerp(b,c)},lerp_number:function(a,b,c){return="" a*(1-c)+b*c},lerp_boolean:function(a,="" b,c){return.5="">c?a:b},lerp_boolean_immediate:function(a,b,c){return a},lerp_string:function(a,b,c){return.5>c?a:b},lerp_string_immediate:function(a,b,c){return a},getLerpFunc:function(a,b){if(void 0===a||null===a)throw Error("examplarValue is null");switch(typeof a){case "object":if(a.lerp)return THREE.AnimationUtils.lerp_object;if(a.slerp)return THREE.AnimationUtils.slerp_object;break;case "number":return THREE.AnimationUtils.lerp_number;case "boolean":return b?THREE.AnimationUtils.lerp_boolean:THREE.AnimationUtils.lerp_boolean_immediate;
case "string":return b?THREE.AnimationUtils.lerp_string:THREE.AnimationUtils.lerp_string_immediate}}};THREE.KeyframeTrack=function(a,b){if(void 0===a)throw Error("track name is undefined");if(void 0===b||0===b.length)throw Error("no keys in track named "+a);this.name=a;this.keys=b;this.lastIndex=0;this.validate();this.optimize()};
THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,getAt:function(a){for(;this.lastIndex<this.keys.length&&a>=this.keys[this.lastIndex].time;)this.lastIndex++;for(;0<this.lastindex&&a<this.keys[this.lastindex-1].time;)this.lastindex--;if(this.lastindex>=this.keys.length)return this.setResult(this.keys[this.keys.length-1].value),this.result;if(0===this.lastIndex)return this.setResult(this.keys[0].value),this.result;var b=this.keys[this.lastIndex-1];this.setResult(b.value);if(b.constantToNext)return this.result;
var c=this.keys[this.lastIndex];return this.result=this.lerpValues(this.result,c.value,(a-b.time)/(c.time-b.time))},shift:function(a){if(0!==a)for(var b=0;b<this.keys.length;b++)this.keys[b].time+=a;return this},scale:function(a){if(1!="=a)for(var" b="0;b<this.keys.length;b++)this.keys[b].time*=a;return" this},trim:function(a,b){for(var="" c="0,d=1;d<this.keys.length;d++)this.keys[d]<=a&&c++;for(var" e="0,d=this.keys.length-2;0<d;d++)if(this.keys[d]">=b)e++;else break;0<c+e&&(this.keys=this.keys.splice(c,this.keys.length- 0="==c.value||null===c.value){console.error("" e-c));return="" this},validate:function(){var="" a="null;if(0===this.keys.length)console.error("" track="" is="" empty,="" no="" keys",this);else{for(var="" b="0;b<this.keys.length;b++){var" c="this.keys[b];if(!c){console.error("" key="" null="" in="" track",this,b);return}if("number"!="=typeof" c.time||isnan(c.time)){console.error("="" key.time="" not="" valid="" number",this,b,c);return}if(void="" key.value="" track",this,b,c);return}if(a&&a.time="">c.time){console.error("  key.time is less than previous key time, out of order keys",
this,b,c,a);return}a=c}return this}},optimize:function(){var a=[],b=this.keys[0];a.push(b);THREE.AnimationUtils.getEqualsFunc(b.value);for(var c=1;c<this.keys.length-1;c++){var 0="==a.type)throw" d="this.keys[c],e=this.keys[c+1];b.time===d.time||this.compareValues(b.value,d.value)&&this.compareValues(d.value,e.value)||(b.constantToNext=this.compareValues(b.value,d.value),a.push(d),b=d)}a.push(this.keys[this.keys.length-1]);this.keys=a;return" this}};three.keyframetrack.keycomparer="function(a,b){return" a.time-b.time};="" three.keyframetrack.parse="function(a){if(void" error("track="" type="" undefined,="" can="" not="" parse");return="" three.keyframetrack.gettracktypefortypename(a.type).parse(a)};="" three.keyframetrack.gettracktypefortypename="function(a){switch(a.toLowerCase()){case" "vector":case="" "vector2":case="" "vector3":case="" "vector4":return="" three.vectorkeyframetrack;case="" "quaternion":return="" three.quaternionkeyframetrack;case="" "integer":case="" "scalar":case="" "double":case="" "float":case="" "number":return="" three.numberkeyframetrack;case="" "bool":case="" "boolean":return="" three.booleankeyframetrack;case="" "string":return="" three.stringkeyframetrack}throw="" error("unsupported="" typename:="" "+a);};="" three.propertybinding="function(a,b){this.rootNode=a;this.trackName=b;this.referenceCount=0;this.originalValue=null;var" c="THREE.PropertyBinding.parseTrackName(b);this.directoryName=c.directoryName;this.nodeName=c.nodeName;this.objectName=c.objectName;this.objectIndex=c.objectIndex;this.propertyName=c.propertyName;this.propertyIndex=c.propertyIndex;this.node=THREE.PropertyBinding.findNode(a,this.nodeName)||a;this.cumulativeValue=null;this.cumulativeWeight=0};" three.propertybinding.prototype="{constructor:THREE.PropertyBinding,reset:function(){this.cumulativeValue=null;this.cumulativeWeight=0},accumulate:function(a,b){this.isBound||this.bind();0===this.cumulativeWeight?0<b&&(null===this.cumulativeValue&&(this.cumulativeValue=THREE.AnimationUtils.clone(a)),this.cumulativeWeight=b):(this.cumulativeValue=this.lerpValue(this.cumulativeValue,a,b/(this.cumulativeWeight+b)),this.cumulativeWeight+=b)},unbind:function(){this.isBound&&(this.setValue(this.originalValue)," this.triggerdirty="this.equalsValue=this.lerpValue=this.getValue=this.setValue=null,this.isBound=!1)},bind:function(){if(!this.isBound){var" a="this.node;if(a){if(this.objectName){if("materials"===this.objectName){if(!a.material){console.error("" bind="" to="" material="" as="" node="" does="" have="" material",this);return}if(!a.material.materials){console.error("="" material.materials="" node.material="" materials="" array",this);return}a="a.material.materials}else" if("bones"="==this.objectName){if(!a.skeleton){console.error("" bones="" skeleton",="" this);return}for(var="" objectname="" of="" node,="" undefined",this);return}a="a[this.objectName]}if(void" 0!="=this.objectIndex){if(void" trying="" objectindex="" objectname,="" but="" is="" undefined:",this,a);return}a="a[this.objectIndex]}}var" this.propertyname)for(a.geometry||console.error("="" morphtargetinfluences="" becasuse="" geometry",this),a.geometry.morphtargets||console.error("="" geometry.morphtargets",this),b="0;b<this.node.geometry.morphTargets.length;b++)if(a.geometry.morphTargets[b].name===this.propertyIndex){this.propertyIndex=b;break}this.setValue=function(a){return" this.equalsvalue(c[this.propertyindex],a)?!1:(c[this.propertyindex]="a,!0)};this.getValue=function(){return" c[this.propertyindex]}}else="" c.copy?(this.setvalue="function(a){return" this.equalsvalue(c,a)?!1:(c.copy(a),!0)},this.getvalue="function(){return" c}):(this.setvalue="function(b){return" this.equalsvalue(a[this.propertyname],b)?!1:(a[this.propertyname]="b,!0)},this.getValue=function(){return" a[this.propertyname]});void="" !0});this.originalvalue="this.getValue();this.equalsValue=THREE.AnimationUtils.getEqualsFunc(this.originalValue);this.lerpValue=THREE.AnimationUtils.getLerpFunc(this.originalValue,!0);this.isBound=!0}else" console.error("="" update="" property="" for="" track:="" "+this.nodename+"."+this.propertyname+"="" it="" wasn't="" found.",a)}else="" "+this.trackname+"="" found.")}},apply:function(){this.isbound||this.bind();if(0<this.cumulativeweight){if(1="">this.cumulativeWeight){var a=
1-this.cumulativeWeight;this.cumulativeValue=this.lerpValue(this.cumulativeValue,this.originalValue,a/(this.cumulativeWeight+a))}this.setValue(this.cumulativeValue)&&this.triggerDirty&&this.triggerDirty();this.cumulativeValue=null;this.cumulativeWeight=0}}};
THREE.PropertyBinding.parseTrackName=function(a){var b=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,c=b.exec(a);if(!c)throw Error("cannot parse trackName at all: "+a);c.index===b.lastIndex&&b.lastIndex++;b={directoryName:c[1],nodeName:c[3],objectName:c[5],objectIndex:c[7],propertyName:c[9],propertyIndex:c[11]};if(null===b.propertyName||0===b.propertyName.length)throw Error("can not parse propertyName from trackName: "+a);return b};
THREE.PropertyBinding.findNode=function(a,b){function c(a){for(var c=0;c<a.bones.length;c++){var 1="" d="a.bones[c];if(d.name===b)return" d}return="" null}function="" d(a){for(var="" c="0;c<a.length;c++){var" e="a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return" e}return="" null}if(!b||""="==b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return" a;if(a.skeleton){var="" a.children&&(e="d(a.children))?e:null};" three.vectorkeyframetrack="function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value.clone()};THREE.VectorKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.VectorKeyframeTrack.prototype.constructor=THREE.VectorKeyframeTrack;THREE.VectorKeyframeTrack.prototype.setResult=function(a){this.result.copy(a)};THREE.VectorKeyframeTrack.prototype.lerpValues=function(a,b,c){return" a.lerp(b,c)};three.vectorkeyframetrack.prototype.comparevalues="function(a,b){return" a.equals(b)};="" three.vectorkeyframetrack.prototype.clone="function(){for(var" a="[],b=0;b<this.keys.length;b++){var" new="" three.vectorkeyframetrack(this.name,a)};three.vectorkeyframetrack.parse="function(a){for(var" b="THREE["Vector"+a.keys[0].value.length],c=[],d=0;d<a.keys.length;d++){var" b).fromarray(e.value),time:e.time})}return="" three.vectorkeyframetrack(a.name,c)};="" three.quaternionkeyframetrack="function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value.clone()};THREE.QuaternionKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.QuaternionKeyframeTrack.prototype.constructor=THREE.QuaternionKeyframeTrack;THREE.QuaternionKeyframeTrack.prototype.setResult=function(a){this.result.copy(a)};THREE.QuaternionKeyframeTrack.prototype.lerpValues=function(a,b,c){return" a.slerp(b,c)};="" three.quaternionkeyframetrack.prototype.comparevalues="function(a,b){return" a.equals(b)};three.quaternionkeyframetrack.prototype.multiply="function(a){for(var" this};three.quaternionkeyframetrack.prototype.clone="function(){for(var" three.quaternionkeyframetrack(this.name,a)};="" three.quaternionkeyframetrack.parse="function(a){for(var" three.quaternion).fromarray(d.value),time:d.time})}return="" three.quaternionkeyframetrack(a.name,b)};three.stringkeyframetrack="function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.StringKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.StringKeyframeTrack.prototype.constructor=THREE.StringKeyframeTrack;" three.stringkeyframetrack.prototype.setresult="function(a){this.result=a};THREE.StringKeyframeTrack.prototype.lerpValues=function(a,b,c){return">c?a:b};THREE.StringKeyframeTrack.prototype.compareValues=function(a,b){return a===b};THREE.StringKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var 1="" c="this.keys[b];a.push({time:c.time,value:c.value})}return" new="" three.stringkeyframetrack(this.name,a)};="" three.stringkeyframetrack.parse="function(a){return" three.stringkeyframetrack(a.name,a.keys)};three.booleankeyframetrack="function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.BooleanKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.BooleanKeyframeTrack.prototype.constructor=THREE.BooleanKeyframeTrack;THREE.BooleanKeyframeTrack.prototype.setResult=function(a){this.result=a};" three.booleankeyframetrack.prototype.lerpvalues="function(a,b,c){return">c?a:b};THREE.BooleanKeyframeTrack.prototype.compareValues=function(a,b){return a===b};THREE.BooleanKeyframeTrack.prototype.clone=function(){for(var a=[],b=0;b<this.keys.length;b++){var 0="==b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,g){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=g;this.updateProjectionMatrix()};" c="this.keys[b];a.push({time:c.time,value:c.value})}return" new="" three.booleankeyframetrack(this.name,a)};three.booleankeyframetrack.parse="function(a){return" three.booleankeyframetrack(a.name,a.keys)};="" three.numberkeyframetrack="function(a,b){THREE.KeyframeTrack.call(this,a,b);this.result=this.keys[0].value};THREE.NumberKeyframeTrack.prototype=Object.create(THREE.KeyframeTrack.prototype);THREE.NumberKeyframeTrack.prototype.constructor=THREE.NumberKeyframeTrack;THREE.NumberKeyframeTrack.prototype.setResult=function(a){this.result=a};THREE.NumberKeyframeTrack.prototype.lerpValues=function(a,b,c){return" a*(1-c)+b*c};three.numberkeyframetrack.prototype.comparevalues="function(a,b){return" a="==b};" three.numberkeyframetrack.prototype.clone="function(){for(var" three.numberkeyframetrack(this.name,a)};three.numberkeyframetrack.parse="function(a){return" three.numberkeyframetrack(a.name,a.keys)};three.camera="function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new" three.matrix4;this.projectionmatrix="new" three.matrix4};three.camera.prototype="Object.create(THREE.Object3D.prototype);" three.camera.prototype.constructor="THREE.Camera;THREE.Camera.prototype.getWorldDirection=function(){var" three.quaternion;return="" function(b){b="b||new" three.vector3;this.getworldquaternion(a);return="" b.set(0,0,-1).applyquaternion(a)}}();three.camera.prototype.lookat="function(){var" three.matrix4;return="" function(b){a.lookat(this.position,b,this.up);this.quaternion.setfromrotationmatrix(a)}}();three.camera.prototype.clone="function(){return(new" this.constructor).copy(this)};="" three.camera.prototype.copy="function(a){THREE.Object3D.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return" this};="" three.cubecamera="function(a,b,c){THREE.Object3D.call(this);this.type="CubeCamera";var" d="new" three.perspectivecamera(90,1,a,b);d.up.set(0,-1,0);d.lookat(new="" three.vector3(1,0,0));this.add(d);var="" e="new" three.perspectivecamera(90,1,a,b);e.up.set(0,-1,0);e.lookat(new="" three.vector3(-1,0,0));this.add(e);var="" g="new" three.perspectivecamera(90,1,a,b);g.up.set(0,0,1);g.lookat(new="" three.vector3(0,1,0));this.add(g);var="" f="new" three.perspectivecamera(90,1,a,b);f.up.set(0,0,-1);f.lookat(new="" three.vector3(0,-1,0));="" this.add(f);var="" h="new" three.perspectivecamera(90,1,a,b);h.up.set(0,-1,0);h.lookat(new="" three.vector3(0,0,1));this.add(h);var="" l="new" three.perspectivecamera(90,1,a,b);l.up.set(0,-1,0);l.lookat(new="" three.vector3(0,0,-1));this.add(l);this.rendertarget="new" three.webglrendertargetcube(c,c,{format:three.rgbformat,magfilter:three.linearfilter,minfilter:three.linearfilter});this.updatecubemap="function(a,b){null===this.parent&&this.updateMatrixWorld();var" !1;c.activecubeface="0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,f,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=n;c.activeCubeFace=5;a.render(b,l,c);a.setRenderTarget(null)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CubeCamera.prototype.constructor=THREE.CubeCamera;" three.orthographiccamera="function(a,b,c,d,e,g){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void" 0!="=e?e:.1;this.far=void" three.orthographiccamera.prototype.updateprojectionmatrix="function(){var" three.orthographiccamera.prototype.tojson="function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;return" a};three.perspectivecamera="function(a,b,c,d){THREE.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=void" three.perspectivecamera.prototype="Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera;THREE.PerspectiveCamera.prototype.setLens=function(a,b){void" three.perspectivecamera.prototype.updateprojectionmatrix="function(){var" b="this.fullWidth/this.fullHeight,a=Math.tan(THREE.Math.degToRad(.5*a))*this.near,c=-a,d=b*c,b=Math.abs(b*a-d),c=Math.abs(a-c);this.projectionMatrix.makeFrustum(d+this.x*b/this.fullWidth,d+(this.x+this.width)*b/this.fullWidth,a-(this.y+this.height)*c/this.fullHeight,a-this.y*c/this.fullHeight,this.near,this.far)}else" this.projectionmatrix.makeperspective(a,="" this.aspect,this.near,this.far)};three.perspectivecamera.prototype.copy="function(a){THREE.Camera.prototype.copy.call(this,a);this.fov=a.fov;this.aspect=a.aspect;this.near=a.near;this.far=a.far;this.zoom=a.zoom;return" this};three.perspectivecamera.prototype.tojson="function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.fov=this.fov;a.object.aspect=this.aspect;a.object.near=this.near;a.object.far=this.far;return" a};="" three.light="function(a){THREE.Object3D.call(this);this.type="Light";this.color=new" three.color(a);this.receiveshadow="void" 0};three.light.prototype="Object.create(THREE.Object3D.prototype);THREE.Light.prototype.constructor=THREE.Light;" object.defineproperties(three.light.prototype,{onlyshadow:{set:function(a){console.warn("three.light:="" .onlyshadow="" has="" been="" removed.")}},shadowcamerafov:{set:function(a){this.shadow.camera.fov="a}},shadowCameraLeft:{set:function(a){this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){this.shadow.camera.near=" a}},shadowcamerafar:{set:function(a){this.shadow.camera.far="a}},shadowCameraVisible:{set:function(a){console.warn("THREE.Light:" .shadowcameravisible="" removed.="" use="" three.camerahelper(="" light.shadow="" )="" instead.")}},shadowbias:{set:function(a){this.shadow.bias="a}},shadowDarkness:{set:function(a){this.shadow.darkness=a}},shadowMapWidth:{set:function(a){this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){this.shadow.mapSize.height=a}}});" three.light.prototype.copy="function(a){THREE.Object3D.prototype.copy.call(this,a);this.color.copy(a.color);return" three.light.prototype.tojson="function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();void" three.lightshadow="function(a){this.camera=a;this.bias=0;this.darkness=1;this.mapSize=new" three.vector2(512,512);this.matrix="this.map=null};THREE.LightShadow.prototype={constructor:THREE.LightShadow,copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.darkness=a.darkness;this.mapSize.copy(a.mapSize)},clone:function(){return(new" this.constructor).copy(this)}};three.ambientlight="function(a){THREE.Light.call(this,a);this.type="AmbientLight";this.castShadow=void" 0};="" three.ambientlight.prototype="Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.constructor=THREE.AmbientLight;THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.type="DirectionalLight";this.position.set(0,1,0);this.updateMatrix();this.target=new" three.object3d;this.intensity="void" three.lightshadow(new="" three.orthographiccamera(-500,500,500,-500,50,5e3))};three.directionallight.prototype="Object.create(THREE.Light.prototype);" three.directionallight.prototype.constructor="THREE.DirectionalLight;THREE.DirectionalLight.prototype.copy=function(a){THREE.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.target=a.target.clone();this.shadow=a.shadow.clone();return" this};three.hemispherelight="function(a,b,c){THREE.Light.call(this,a);this.type="HemisphereLight";this.castShadow=void" 0;this.position.set(0,1,0);this.updatematrix();this.groundcolor="new" three.color(b);this.intensity="void" three.hemispherelight.prototype="Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight;THREE.HemisphereLight.prototype.copy=function(a){THREE.Light.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);this.intensity=a.intensity;return" three.pointlight="function(a,b,c,d){THREE.Light.call(this,a);this.type="PointLight";this.intensity=void" three.perspectivecamera(90,1,1,500))};three.pointlight.prototype="Object.create(THREE.Light.prototype);THREE.PointLight.prototype.constructor=THREE.PointLight;" three.pointlight.prototype.copy="function(a){THREE.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return" three.spotlight="function(a,b,c,d,e,g){THREE.Light.call(this,a);this.type="SpotLight";this.position.set(0,1,0);this.updateMatrix();this.target=new" three.perspectivecamera(50,1,50,5e3))};three.spotlight.prototype="Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.constructor=THREE.SpotLight;" three.spotlight.prototype.copy="function(a){THREE.Light.prototype.copy.call(this,a);this.intensity=a.intensity;this.distance=a.distance;this.angle=a.angle;this.exponent=a.exponent;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return" this};three.cache="{enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return" this.files[a]},remove:function(a){delete="" this.files[a]},clear:function(){this.files="{}}};" three.loader="function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};" three.loader.prototype="{constructor:THREE.Loader,crossOrigin:void" 0,extracturlbase:function(a){a="a.split("/");if(1===a.length)return"./";a.pop();return" a.join("="" ")+"="" "},initmaterials:function(a,b,c){for(var="" d},creatematerial:function(){var="" a,b,c;return="" function(d,e,g){function="" f(a,c,d,f,l){a="e+a;var" k="THREE.Loader.Handlers.get(a);null!==k?a=k.load(a):(b.setCrossOrigin(g),a=b.load(a));void" three.repeatwrapping),1!="=c[1]&&(a.wrapT=THREE.RepeatWrapping));void" c}void="" three.color);void="" three.textureloader);void="" three.materialloader);="" var="" in="" d){var="" m="d[k];switch(k){case" "dbgcolor":l.color="m;break;case" "dbgindex":case="" "opticaldensity":case="" "illumination":break;case="" "dbgname":l.name="m;break;case" "blending":l.blending="THREE[m];break;case" "colordiffuse":l.color="a.fromArray(m).getHex();break;case" "colorspecular":l.specular="a.fromArray(m).getHex();break;case" "coloremissive":l.emissive="a.fromArray(m).getHex();break;case" "specularcoef":l.shininess="m;break;case" "shading":"basic"="==" m.tolowercase()&&(l.type="MeshBasicMaterial" );"phong"="==m.toLowerCase()&&(l.type="MeshPhongMaterial");break;case" "mapdiffuse":l.map="f(m,d.mapDiffuseRepeat,d.mapDiffuseOffset,d.mapDiffuseWrap,d.mapDiffuseAnisotropy);break;case" "mapdiffuserepeat":case="" "mapdiffuseoffset":case="" "mapdiffusewrap":case="" "mapdiffuseanisotropy":break;case="" "maplight":l.lightmap="f(m,d.mapLightRepeat,d.mapLightOffset,d.mapLightWrap,d.mapLightAnisotropy);break;case" "maplightrepeat":case="" "maplightoffset":case="" "maplightwrap":case="" "maplightanisotropy":break;="" case="" "mapao":l.aomap="f(m,d.mapAORepeat,d.mapAOOffset,d.mapAOWrap,d.mapAOAnisotropy);break;case" "mapaorepeat":case="" "mapaooffset":case="" "mapaowrap":case="" "mapaoanisotropy":break;case="" "mapbump":l.bumpmap="f(m,d.mapBumpRepeat,d.mapBumpOffset,d.mapBumpWrap,d.mapBumpAnisotropy);break;case" "mapbumpscale":l.bumpscale="m;break;case" "mapbumprepeat":case="" "mapbumpoffset":case="" "mapbumpwrap":case="" "mapbumpanisotropy":break;case="" "mapnormal":l.normalmap="f(m,d.mapNormalRepeat,d.mapNormalOffset,d.mapNormalWrap,d.mapNormalAnisotropy);" break;case="" "mapnormalfactor":l.normalscale="[m,m];break;case" "mapnormalrepeat":case="" "mapnormaloffset":case="" "mapnormalwrap":case="" "mapnormalanisotropy":break;case="" "mapspecular":l.specularmap="f(m,d.mapSpecularRepeat,d.mapSpecularOffset,d.mapSpecularWrap,d.mapSpecularAnisotropy);break;case" "mapspecularrepeat":case="" "mapspecularoffset":case="" "mapspecularwrap":case="" "mapspecularanisotropy":break;case="" "mapalpha":l.alphamap="f(m,d.mapAlphaRepeat,d.mapAlphaOffset,d.mapAlphaWrap,d.mapAlphaAnisotropy);break;case" "mapalpharepeat":case="" "mapalphaoffset":case="" "mapalphawrap":case="" "mapalphaanisotropy":break;="" "flipsided":l.side="THREE.BackSide;break;case" "doublesided":l.side="THREE.DoubleSide;break;case" "transparency":console.warn("three.loader:="" transparency="" renamed="" to="" opacity");l.opacity="m;break;case" "opacity":case="" "transparent":case="" "depthtest":case="" "depthwrite":case="" "visible":case="" "wireframe":l[k]="m;break;case" "vertexcolors":!0="==m&&(l.vertexColors=THREE.VertexColors);"face"===m&&(l.vertexColors=THREE.FaceColors);break;default:console.error("Loader.createMaterial:" unsupported",="" k,m)}}"meshphongmaterial"!="=l.type&&delete" l.specular;1="">l.opacity&&(l.transparent=!0);c.setTextures(h);return c.parse(l)}}()};THREE.Loader.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var 0="==this._statusDomElement&&(this._statusDomElement=document.createElement("div"));console.warn("THREE.JSONLoader:" e="b[c+1];if(b[c].test(a))return" e}return="" null}};three.xhrloader="function(a){this.manager=void" 0!="=a?a:THREE.DefaultLoadingManager};" three.xhrloader.prototype="{constructor:THREE.XHRLoader,load:function(a,b,c,d){var" b&&settimeout(function(){b(g)},0),g;var="" f="new" xmlhttprequest;f.open("get",a,!0);f.addeventlistener("load",function(c){c="c.target.response;THREE.Cache.add(a,c);b&&b(c);e.manager.itemEnd(a)},!1);void" this.crossorigin);void="" f},setresponsetype:function(a){this.responsetype="a},setCrossOrigin:function(a){this.crossOrigin=a},setWithCredentials:function(a){this.withCredentials=a}};THREE.ImageLoader=function(a){this.manager=void" three.imageloader.prototype="{constructor:THREE.ImageLoader,load:function(a,b,c,d){var" e.manager.itemstart(a),b?settimeout(function(){b(g);e.manager.itemend(a)},0):e.manager.itemend(a),g;var="" !1);void="" f},setcrossorigin:function(a){this.crossorigin="a}};THREE.JSONLoader=function(a){"boolean"===typeof" a&&(console.warn("three.jsonloader:="" showstatus="" parameter="" has="" been="" removed="" from="" constructor."),a="void" 0);this.manager="void" three.jsonloader.prototype="{constructor:THREE.JSONLoader,get" statusdomelement(){void="" .statusdomelement="" removed.");return="" this._statusdomelement},load:function(a,b,c,d){var="" this.texturepath?this.texturepath:three.loader.prototype.extracturlbase(a);c="new" three.xhrloader(this.manager);c.setcrossorigin(this.crossorigin);c.setwithcredentials(this.withcredentials);="" c.load(a,function(c){c="JSON.parse(c);var" d="c.metadata;if(void" "+a+"="" should="" be="" loaded="" with="" three.objectloader="" instead.");return}if("scene"="==d.type){console.error("THREE.JSONLoader:" three.sceneloader="" instead.");return}}c="e.parse(c,g);b(c.geometry,c.materials)})},setCrossOrigin:function(a){this.crossOrigin=a},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var" c="new" three.geometry,d="void" a.scale?1="" a.scale:1;(function(b){var="" d,f,h,l,k,m,p,n,q,s,t,v,u,w="a.faces;m=a.vertices;var" three.vector3,d.x="m[l++]*b,d.y=m[l++]*b,d.z=m[l++]*b,c.vertices.push(d);l=0;for(k=w.length;l<k;)if(b=w[l++],q=b&1,h=b&2,d=b&8,p=b&16,s=b&32,m=b&64,b&=128,q){q=new" three.face3;q.a="w[l];q.b=w[l+1];q.c=w[l+3];t=new" three.face3;t.a="w[l+1];t.b=w[l+2];t.c=" w[l+3];l+="4;h&&(h=w[l++],q.materialIndex=h,t.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<B;d++)for(v=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],f=0;4">f;f++)n=w[l++],u=v[2*n],n=v[2*n+1],u=new THREE.Vector2(u,n),2!==f&&c.faceVertexUvs[d][h].push(u),0!==f&&c.faceVertexUvs[d][h+1].push(u);p&&(p=3*w[l++],q.normal.set(D[p++],D[p++],D[p]),t.normal.copy(q.normal));if(s)for(d=0;4>d;d++)p=3*w[l++],s=new THREE.Vector3(D[p++],D[p++],D[p]),2!==d&&q.vertexNormals.push(s),0!==d&&t.vertexNormals.push(s);
m&&(m=w[l++],m=x[m],q.color.setHex(m),t.color.setHex(m));if(b)for(d=0;4>d;d++)m=w[l++],m=x[m],2!==d&&q.vertexColors.push(new THREE.Color(m)),0!==d&&t.vertexColors.push(new THREE.Color(m));c.faces.push(q);c.faces.push(t)}else{q=new THREE.Face3;q.a=w[l++];q.b=w[l++];q.c=w[l++];h&&(h=w[l++],q.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<b;d++)for(v=a.uvs[d],c.facevertexuvs[d][h]=[],f=0;3>f;f++)n=w[l++],u=v[2*n],n=v[2*n+1],u=new THREE.Vector2(u,n),c.faceVertexUvs[d][h].push(u);p&&(p=3*w[l++],q.normal.set(D[p++],
D[p++],D[p]));if(s)for(d=0;3>d;d++)p=3*w[l++],s=new THREE.Vector3(D[p++],D[p++],D[p]),q.vertexNormals.push(s);m&&(m=w[l++],q.color.setHex(x[m]));if(b)for(d=0;3>d;d++)m=w[l++],q.vertexColors.push(new THREE.Color(x[m]));c.faces.push(q)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,f=a.skinWeights.length;d<f;d+=b)c.skinweights.push(new 0="==a.materials||0===a.materials.length)return{geometry:c};d=THREE.Loader.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:d}}};" three.vector4(a.skinweights[d],1<b?a.skinweights[d+1]:0,2<b?a.skinweights[d+2]:0,3<b?a.skinweights[d+3]:="" 0));if(a.skinindices)for(d="0,f=a.skinIndices.length;d<f;d+=b)c.skinIndices.push(new" three.vector4(a.skinindices[d],1<b?a.skinindices[d+1]:0,2<b?a.skinindices[d+2]:0,3<b?a.skinindices[d+3]:0));c.bones="a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When" skinning,="" number="" of="" vertices="" ("+c.vertices.length+"),="" skinindices="" ("+c.skinindices.length+"),="" and="" skinweights="" ("+c.skinweights.length+")="" should="" match.")})();(function(b){if(void="" 0!="=" a.morphtargets)for(var="" d="0,f=a.morphTargets.length;d<f;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var" h="c.morphTargets[d].vertices,l=a.morphTargets[d].vertices,k=0,m=l.length;k<m;k+=3){var" p="new" three.vector3;p.x="l[k]*b;p.y=l[k+1]*b;p.z=l[k+2]*b;h.push(p)}}if(void" "morphcolors"="" no="" longer="" supported.="" using="" them="" as="" face="" colors.'),b="c.faces,h=a.morphColors[0].colors," b="[],d=[];void" f="0;f<d.length;f++){var" if(void="" three.loadingmanager="function(a,b,c){var" 0;this.onload="a;this.onProgress=b;this.onError=c;this.itemStart=function(a){f++;if(!1===e&&void" three.loadingmanager;="" three.buffergeometryloader="function(a){this.manager=void" three.buffergeometryloader.prototype="{constructor:THREE.BufferGeometryLoader,load:function(a,b,c,d){var" e="this,g=new" three.xhrloader(e.manager);g.setcrossorigin(this.crossorigin);g.load(a,function(a){b(e.parse(json.parse(a)))},c,d)},setcrossorigin:function(a){this.crossorigin="a},parse:function(a){var" three.buffergeometry,c="a.data.index;void" self[c.type](c.array),b.setindex(new="" three.bufferattribute(c,1)));var="" in="" d){var="" g="d[e],c=new" self[g.type](g.array);="" b.addattribute(e,new="" three.bufferattribute(c,g.itemsize))}e="a.data.groups||a.data.drawcalls||a.data.offsets;if(void" three.vector3,void="" three.sphere(e,a.radius));return="" b}};three.materialloader="function(a){this.manager=void" three.materialloader.prototype="{constructor:THREE.MaterialLoader,load:function(a,b,c,d){var" undefined="" texture",a);return="" b[a]},parse:function(a){var="" three[a.type];b.uuid="a.uuid;void" a.name&&(b.name="a.name);void" (b.blending="a.blending);void" a.sizeattenuation);void="" three.vector2(a.normalscale,a.normalscale));void="" (b.displacementscale="a.displacementScale);void" void="" c="0,d=a.materials.length;c<d;c++)b.materials.push(this.parse(a.materials[c]));return" b}};three.objectloader="function(a){this.manager=void" three.objectloader.prototype="{constructor:THREE.ObjectLoader,load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var" three.xhrloader(e.manager);g.setcrossorigin(this.crossorigin);g.load(a,function(a){e.parse(json.parse(a),b)},c,d)},settexturepath:function(a){this.texturepath="a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var" e},parsegeometries:function(a){var="" three.jsonloader,d="new" three.buffergeometryloader,e="0,g=a.length;e<g;e++){var" f,h="a[e];switch(h.type){case" "planegeometry":case="" "planebuffergeometry":f="new" three[h.type](h.width,h.height,h.widthsegments,="" h.heightsegments);break;case="" "boxgeometry":case="" "cubegeometry":f="new" three.boxgeometry(h.width,h.height,h.depth,h.widthsegments,h.heightsegments,h.depthsegments);break;case="" "circlebuffergeometry":f="new" three.circlebuffergeometry(h.radius,h.segments,h.thetastart,h.thetalength);break;case="" "circlegeometry":f="new" three.circlegeometry(h.radius,h.segments,h.thetastart,h.thetalength);break;case="" "cylindergeometry":f="new" three.cylindergeometry(h.radiustop,h.radiusbottom,h.height,h.radialsegments,h.heightsegments,="" h.openended,h.thetastart,h.thetalength);break;case="" "spheregeometry":f="new" three.spheregeometry(h.radius,h.widthsegments,h.heightsegments,h.phistart,h.philength,h.thetastart,h.thetalength);break;case="" "spherebuffergeometry":f="new" three.spherebuffergeometry(h.radius,h.widthsegments,h.heightsegments,h.phistart,h.philength,h.thetastart,h.thetalength);break;case="" "dodecahedrongeometry":f="new" three.dodecahedrongeometry(h.radius,h.detail);break;case="" "icosahedrongeometry":f="new" three.icosahedrongeometry(h.radius,="" h.detail);break;case="" "octahedrongeometry":f="new" three.octahedrongeometry(h.radius,h.detail);break;case="" "tetrahedrongeometry":f="new" three.tetrahedrongeometry(h.radius,h.detail);break;case="" "ringgeometry":f="new" three.ringgeometry(h.innerradius,h.outerradius,h.thetasegments,h.phisegments,h.thetastart,h.thetalength);break;case="" "torusgeometry":f="new" three.torusgeometry(h.radius,h.tube,h.radialsegments,h.tubularsegments,h.arc);break;case="" "torusknotgeometry":f="new" three.torusknotgeometry(h.radius,h.tube,="" h.radialsegments,h.tubularsegments,h.p,h.q,h.heightscale);break;case="" "buffergeometry":f="d.parse(h);break;case" "geometry":f="c.parse(h.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader:" unsupported="" geometry="" type="" "'+h.type+'"');continue}f.uuid="h.uuid;void" b},parsematerials:function(a,b){var="" three.materialloader;d.settextures(b);for(var="" c},="" parseanimations:function(a){for(var="" b},parseimages:function(a,b){function="" c(a){d.manager.itemstart(a);return="" f.load(a,function(){d.manager.itemend(a)})}var="" three.loadingmanager(b),f="new" three.imageloader(g);f.setcrossorigin(this.crossorigin);for(var="" l="a[g],k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:d.texturePath+l.url;e[l.uuid]=c(k)}}return" e},="" parsetextures:function(a,b){function="" c(a){if("number"="==typeof" a)return="" a;console.warn("three.objectloader.parsetexture:="" constant="" be="" numeric="" form.",a);return="" three[a]}var="" "image"="" specified="" for',f.uuid);void="" image",f.image);var="" three.texture(b[f.image]);h.needsupdate="!0;h.uuid=f.uuid;void" f.name);void="" three.vector2(f.offset[0],f.offset[1]));void="" three.vector2(f.repeat[0],f.repeat[1]));void="" d},parseobject:function(){var="" a="new" three.matrix4;return="" function(b,="" c,d){function="" e(a){void="" geometry",a);return="" c[a]}function="" g(a){if(void="" material",a),d[a]}var="" f;switch(b.type){case="" "scene":f="new" three.scene;break;case="" "perspectivecamera":f="new" three.perspectivecamera(b.fov,b.aspect,b.near,b.far);break;case="" "orthographiccamera":f="new" three.orthographiccamera(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case="" "ambientlight":f="new" three.ambientlight(b.color);="" break;case="" "directionallight":f="new" three.directionallight(b.color,b.intensity);break;case="" "pointlight":f="new" three.pointlight(b.color,b.intensity,b.distance,b.decay);break;case="" "spotlight":f="new" three.spotlight(b.color,b.intensity,b.distance,b.angle,b.exponent,b.decay);break;case="" "hemispherelight":f="new" three.hemispherelight(b.color,b.groundcolor,b.intensity);break;case="" "mesh":f="new" three.mesh(e(b.geometry),g(b.material));break;case="" "lod":f="new" three.lod;break;case="" "line":f="new" three.line(e(b.geometry),="" g(b.material),b.mode);break;case="" "pointcloud":case="" "points":f="new" three.points(e(b.geometry),g(b.material));break;case="" "sprite":f="new" three.sprite(g(b.material));break;case="" "group":f="new" three.group;break;default:f="new" three.object3d}f.uuid="b.uuid;void" b.children)f.add(this.parseobject(b.children[h],c,d));if("lod"="==b.type){b=b.levels;for(var" k="b[l];h=f.getObjectByProperty("uuid",k.object);void" f}}()};="" three.textureloader="function(a){this.manager=void" three.texture,g="new" three.imageloader(this.manager);g.setcrossorigin(this.crossorigin);g.load(a,function(a){e.image="a;e.needsUpdate=!0;void" e},setcrossorigin:function(a){this.crossorigin="a}};THREE.CubeTextureLoader=function(a){this.manager=void" three.cubetextureloader.prototype="{constructor:THREE.CubeTextureLoader,load:function(a,b,c,d){function" e(c){f.load(a[c],function(a){g.images[c]="a;h++;6===h&&(g.needsUpdate=!0,b&&b(g))},void" 0,d)}var="" three.cubetexture([]),f="new" three.imageloader;f.setcrossorigin(this.crossorigin);var="" g},setcrossorigin:function(a){this.crossorigin="a}};" three.datatextureloader="THREE.BinaryTextureLoader=function(a){this.manager=void" three.binarytextureloader.prototype="{constructor:THREE.BinaryTextureLoader,load:function(a,b,c,d){var" three.datatexture,f="new" three.xhrloader(this.manager);f.setcrossorigin(this.crossorigin);f.setresponsetype("arraybuffer");f.load(a,function(a){if(a="e._parser(a))void" g.magfilter="void" three.compressedtextureloader="function(a){this.manager=void" three.compressedtextureloader.prototype="{constructor:THREE.CompressedTextureLoader,load:function(a,b,c,d){var" three.compressedtexture;f.image="g;var" three.xhrloader(this.manager);h.setcrossorigin(this.crossorigin);h.setresponsetype("arraybuffer");if(array.isarray(a))for(var="" a.format,f.needsupdate="!0,b&&b(f))},c,d)},m=0,p=a.length;m<p;++m)k(m);else" h.load(a,function(a){a="e._parser(a,!0);if(a.isCubemap)for(var" f.image.width="a.width,f.image.height=a.height,f.mipmaps=a.mipmaps;1===a.mipmapCount&&(f.minFilter=THREE.LinearFilter);f.format=a.format;f.needsUpdate=!0;b&&" b(f)},c,d);return="" f},setcrossorigin:function(a){this.crossorigin="a}};" three.material="function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=THREE.LessEqualDepth;this.colorWrite=this.depthWrite=" this.depthtest="!0;this.precision=null;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this._needsUpdate=this.visible=!0};" three.material.prototype="{constructor:THREE.Material,get" needsupdate(){return="" this._needsupdate},set="" needsupdate(a){!0="==a&&this.update();this._needsUpdate=a},setValues:function(a){if(void" a){var="" '"+b+"'="" parameter="" is="" undefined.");else{var="" not="" property="" this="" material."):d="" instanceof="" three.color?d.set(c):d="" three.vector3&&c="" three.vector3?d.copy(c):="" this[b]="overdraw" =="=b?Number(c):c}}},toJSON:function(a){var" three.color&&(b.color="this.color.getHex());this.emissive" three.color&&(b.emissive="this.emissive.getHex());this.specular" three.color&&(b.specular="this.specular.getHex());void" three.texture&&="" (b.map="this.map.toJSON(a).uuid);this.alphaMap" three.texture&&(b.alphamap="this.alphaMap.toJSON(a).uuid);this.lightMap" three.texture&&(b.lightmap="this.lightMap.toJSON(a).uuid);this.bumpMap" three.texture&&(b.bumpmap="this.bumpMap.toJSON(a).uuid,b.bumpScale=this.bumpScale);this.normalMap" three.texture&&(b.normalmap="this.normalMap.toJSON(a).uuid,b.normalScale=this.normalScale);this.displacementMap" three.texture&&(b.displacementmap="this.displacementMap.toJSON(a).uuid," b.displacementscale="this.displacementScale,b.displacementBias=this.displacementBias);this.specularMap" three.texture&&(b.specularmap="this.specularMap.toJSON(a).uuid);this.envMap" three.texture&&(b.envmap="this.envMap.toJSON(a).uuid,b.reflectivity=this.reflectivity);void" this.shading&&this.shading!="=THREE.SmoothShading&&(b.shading=this.shading);void">this.opacity&&(b.opacity=this.opacity);!0===this.transparent&&(b.transparent=this.transparent);0<this.alphatest&&(b.alphatest=this.alphatest);!0===this.wireframe&&(b.wireframe=this.wireframe);1<this.wireframelinewidth&&(b.wireframelinewidth=this.wireframelinewidth);return 0="==c.uuid&&(c.uuid=THREE.Math.generateUUID());if(void" b},="" clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.name="a.name;this.side=a.side;this.opacity=a.opacity;this.transparent=a.transparent;this.blending=a.blending;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.precision=a.precision;this.polygonOffset=" a.polygonoffset;this.polygonoffsetfactor="a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.overdraw=a.overdraw;this.visible=a.visible;return" this},update:function(){this.dispatchevent({type:"update"})},dispose:function(){this.dispatchevent({type:"dispose"})},get="" wraparound(){console.warn("three."+this.type+":="" .wraparound="" has="" been="" removed.")},set="" wraparound(a){console.warn("three."+this.type+":="" removed.")},get="" wraprgb(){console.warn("three."+="" this.type+":="" .wraprgb="" removed.");return="" new="" three.color}};three.eventdispatcher.prototype.apply(three.material.prototype);three.materialidcount="0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new" three.color(16777215);this.linewidth="1;this.linejoin=this.linecap="round";this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);" three.linebasicmaterial.prototype.constructor="THREE.LineBasicMaterial;THREE.LineBasicMaterial.prototype.copy=function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;this.vertexColors=a.vertexColors;this.fog=a.fog;return" this};="" three.linedashedmaterial="function(a){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new" three.color(16777215);this.scale="this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial;" three.linedashedmaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;this.vertexColors=a.vertexColors;this.fog=a.fog;return" three.meshbasicmaterial="function(a){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new" three.color(16777215);this.aomap="this.map=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=" !1;this.setvalues(a)};three.meshbasicmaterial.prototype="Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial;" three.meshbasicmaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;" this.wireframelinejoin="a.wireframeLinejoin;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return" three.meshlambertmaterial="function(a){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new" three.color(16777215);this.emissive="new" three.color(0);this.envmap="this.alphaMap=this.specularMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};" three.meshlambertmaterial.prototype="Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial;" three.meshlambertmaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.emissive.copy(a.emissive);this.map=a.map;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;" this.vertexcolors="a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return" three.meshphongmaterial="function(a){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new" three.color(0);this.specular="new" three.color(1118481);this.shininess="30;this.metal=!1;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new" three.vector2(1,1);this.displacementmap="null;this.displacementScale=1;this.displacementBias=" 0;this.envmap="this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial;" three.meshphongmaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.emissive.copy(a.emissive);this.specular.copy(a.specular);this.shininess=a.shininess;this.metal=a.metal;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissiveMap=a.emissiveMap;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);" this.displacementmap="a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.fog=a.fog;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.vertexColors=" a.vertexcolors;this.skinning="a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return" this};three.meshdepthmaterial="function(a){THREE.Material.call(this);this.type="MeshDepthMaterial";this.wireframe=this.morphTargets=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial;" three.meshdepthmaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return" this};three.meshnormalmaterial="function(a){THREE.Material.call(this,a);this.type="MeshNormalMaterial";this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial;" three.meshnormalmaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return" this};three.multimaterial="function(a){this.uuid=THREE.Math.generateUUID();this.type="MultiMaterial";this.materials=a" instanceof="" array?a:[];this.visible="!0};" three.multimaterial.prototype="{constructor:THREE.MultiMaterial,toJSON:function(){for(var" a="{metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},b=0,c=this.materials.length;b<c;b++)a.materials.push(this.materials[b].toJSON());a.visible=this.visible;return" a},clone:function(){for(var="" this.constructor,b="0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return" a}};three.meshfacematerial="THREE.MultiMaterial;" three.pointsmaterial="function(a){THREE.Material.call(this);this.type="PointsMaterial";this.color=new" three.color(16777215);this.map="null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=THREE.NoColors;this.fog=!0;this.setValues(a)};THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial;" three.pointsmaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;this.vertexColors=a.vertexColors;this.fog=a.fog;return" this};three.pointcloudmaterial="function(a){console.warn("THREE.PointCloudMaterial" renamed="" to="" three.pointsmaterial.");return="" three.pointsmaterial(a)};="" three.particlebasicmaterial="function(a){console.warn("THREE.ParticleBasicMaterial" three.pointsmaterial(a)};three.particlesystemmaterial="function(a){console.warn("THREE.ParticleSystemMaterial" three.shadermaterial="function(a){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void" main()="" {\n\tgl_position="projectionMatrix" *="" modelviewmatrix="" vec4(="" position,="" 1.0="" );\n}";this.fragmentshader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}" ;this.shading="THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.derivatives=this.morphNormals=" this.morphtargets="this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void" 0;void="" 0!="=a&&(void" attributes="" should="" now="" be="" defined="" in="" three.buffergeometry="" instead."),this.setvalues(a))};three.shadermaterial.prototype="Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial;" three.shadermaterial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.attributes=a.attributes;this.defines=a.defines;this.shading=a.shading;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.fog=a.fog;this.lights=a.lights;this.vertexColors=a.vertexColors;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=" a.morphnormals;this.derivatives="a.derivatives;return" this};three.shadermaterial.prototype.tojson="function(a){a=THREE.Material.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.attributes=this.attributes;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return" a};three.rawshadermaterial="function(a){THREE.ShaderMaterial.call(this,a);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);" three.rawshadermaterial.prototype.constructor="THREE.RawShaderMaterial;THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new" three.spritematerial.prototype.copy="function(a){THREE.Material.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;this.fog=a.fog;return" three.texture="function(a,b,c,d,e,g,f,h,l){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.sourceFile=this.name="";this.image=void" this.anisotropy="void" three.vector2(0,0);this.repeat="new" three.vector2(1,1);this.generatemipmaps="!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.version=0;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=void" 0;three.texture.default_mapping="THREE.UVMapping;" three.texture.prototype="{constructor:THREE.Texture,set" needsupdate(a){!0="==a&&this.version++},clone:function(){return(new" this.constructor).copy(this)},copy:function(a){this.image="a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=" a.premultiplyalpha;this.flipy="a.flipY;this.unpackAlignment=a.unpackAlignment;return" this},tojson:function(a){if(void="" a.textures[this.uuid];var="" b="{metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void" c="this.image;void" d="a.images,e=c.uuid,g=c.uuid,f;void" a.textures[this.uuid]="b},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===" three.uvmapping){a.multiply(this.repeat);a.add(this.offset);if(0="">a.x||1<a.x)switch(this.wraps){case three.repeatwrapping:a.x-="Math.floor(a.x);break;case" three.clamptoedgewrapping:a.x="0">a.x?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.x)%2)?a.x=Math.ceil(a.x)-a.x:a.x-=Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapt){case three.repeatwrapping:a.y-="Math.floor(a.y);break;case" three.clamptoedgewrapping:a.y="0">a.y?0:1;break;case THREE.MirroredRepeatWrapping:1===Math.abs(Math.floor(a.y)%
2)?a.y=Math.ceil(a.y)-a.y:a.y-=Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CanvasTexture=function(a,b,c,d,e,g,f,h,l){THREE.Texture.call(this,a,b,c,d,e,g,f,h,l);this.needsUpdate=!0};THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture;
THREE.CubeTexture=function(a,b,c,d,e,g,f,h,l){b=void 0!==b?b:THREE.CubeReflectionMapping;THREE.Texture.call(this,a,b,c,d,e,g,f,h,l);this.images=a;this.flipY=!1};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CubeTexture.prototype.constructor=THREE.CubeTexture;THREE.CubeTexture.prototype.copy=function(a){THREE.Texture.prototype.copy.call(this,a);this.images=a.images;return this};
THREE.CompressedTexture=function(a,b,c,d,e,g,f,h,l,k,m){THREE.Texture.call(this,null,g,f,h,l,k,d,e,m);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture;
THREE.DataTexture=function(a,b,c,d,e,g,f,h,l,k,m){THREE.Texture.call(this,null,g,f,h,l,k,d,e,m);this.image={data:a,width:b,height:c};this.magFilter=void 0!==l?l:THREE.NearestFilter;this.minFilter=void 0!==k?k:THREE.NearestFilter;this.generateMipmaps=this.flipY=!1};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.constructor=THREE.DataTexture;
THREE.VideoTexture=function(a,b,c,d,e,g,f,h,l){function k(){requestAnimationFrame(k);a.readyState===a.HAVE_ENOUGH_DATA&&(m.needsUpdate=!0)}THREE.Texture.call(this,a,b,c,d,e,g,f,h,l);this.generateMipmaps=!1;var m=this;k()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.VideoTexture.prototype.constructor=THREE.VideoTexture;THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.create(THREE.Object3D.prototype);
THREE.Group.prototype.constructor=THREE.Group;THREE.Points=function(a,b){THREE.Object3D.call(this);this.type="Points";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.PointsMaterial({color:16777215*Math.random()})};THREE.Points.prototype=Object.create(THREE.Object3D.prototype);THREE.Points.prototype.constructor=THREE.Points;
THREE.Points.prototype.raycast=function(){var a=new THREE.Matrix4,b=new THREE.Ray;return function(c,d){function e(a,e){var f=b.distanceSqToPoint(a);if(f<l){var h="b.closestPointToPoint(a);h.applyMatrix4(g.matrixWorld);var" k="c.ray.origin.distanceTo(h);k<c.near||k">c.far||d.push({distance:k,distanceToRay:Math.sqrt(f),point:h.clone(),index:e,face:null,object:g})}}var g=this,f=g.geometry,h=c.params.Points.threshold;a.getInverse(this.matrixWorld);b.copy(c.ray).applyMatrix4(a);if(null===f.boundingBox||!1!==
b.isIntersectionBox(f.boundingBox)){var h=h/((this.scale.x+this.scale.y+this.scale.z)/3),l=h*h,h=new THREE.Vector3;if(f instanceof THREE.BufferGeometry){var k=f.index,f=f.attributes.position.array;if(null!==k)for(var m=k.array,k=0,p=m.length;k<p;k++){var n="m[k];h.fromArray(f,3*n);e(h,n)}else" for(k="0,m=f.length/3;k<m;k++)h.fromArray(f,3*k),e(h,k)}else" for(h="f.vertices,k=0,m=h.length;k<m;k++)e(h[k],k)}}}();THREE.Points.prototype.clone=function(){return(new" this.constructor(this.geometry,this.material)).copy(this)};="" three.pointcloud="function(a,b){console.warn("THREE.PointCloud" has="" been="" renamed="" to="" three.points.");return="" new="" three.points(a,b)};three.particlesystem="function(a,b){console.warn("THREE.ParticleSystem" three.points(a,b)};="" three.line="function(a,b,c){if(1===c)return" console.warn("three.line:="" parameter="" three.linepieces="" no="" longer="" supported.="" created="" three.linesegments="" instead."),new="" three.linesegments(a,b);three.object3d.call(this);this.type="Line" ;this.geometry="void" 0!="=a?a:new" three.geometry;this.material="void" three.linebasicmaterial({color:16777215*math.random()})};three.line.prototype="Object.create(THREE.Object3D.prototype);THREE.Line.prototype.constructor=THREE.Line;" three.line.prototype.raycast="function(){var" a="new" three.matrix4,b="new" three.ray,c="new" three.sphere;return="" function(d,e){var="" g="d.linePrecision,g=g*g,f=this.geometry;null===f.boundingSphere&&f.computeBoundingSphere();c.copy(f.boundingSphere);c.applyMatrix4(this.matrixWorld);if(!1!==d.ray.isIntersectionSphere(c)){a.getInverse(this.matrixWorld);b.copy(d.ray).applyMatrix4(a);var" h="new" three.vector3,l="new" three.vector3,k="new" three.vector3,m="new" three.vector3,p="this" instanceof="" three.linesegments?2:1;if(f="" three.buffergeometry){var="" f="n.array,q=q.position.array,n=0,s=f.length-1;n<s;n+=p){var" t="f[n+1];h.fromArray(q,3*f[n]);l.fromArray(q,3*t);t=b.distanceSqToSegment(h,l,m,k);t">g||(m.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(m),t<d.near||t>d.far||e.push({distance:t,point:k.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else for(q=q.position.array,n=0,s=q.length/3-1;n<s;n+=p)h.fromarray(q,3*n),l.fromarray(q, 3*n+3),t="b.distanceSqToSegment(h,l,m,k),t">g||(m.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(m),t<d.near||t>d.far||e.push({distance:t,point:k.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(f instanceof THREE.Geometry)for(h=f.vertices,l=h.length,n=0;n<l-1;n+=p)t=b.distancesqtosegment(h[n],h[n+1],m,k),t>g||(m.applyMatrix4(this.matrixWorld),t=d.ray.origin.distanceTo(m),t<d.near||t>d.far||e.push({distance:t,point:k.clone().applyMatrix4(this.matrixWorld),
index:n,face:null,faceIndex:null,object:this}))}}}();THREE.Line.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)};THREE.LineStrip=0;THREE.LinePieces=1;THREE.LineSegments=function(a,b){THREE.Line.call(this,a,b);this.type="LineSegments"};THREE.LineSegments.prototype=Object.create(THREE.Line.prototype);THREE.LineSegments.prototype.constructor=THREE.LineSegments;
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.constructor=THREE.Mesh;
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphtargets.length){this.morphtargetbase=-1;this.morphtargetinfluences=[];this.morphtargetdictionary={};for(var a="0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};" three.mesh.prototype.getmorphtargetindexbyname="function(a){if(void" 0!="=this.morphTargetDictionary[a])return" this.morphtargetdictionary[a];console.warn("three.mesh.getmorphtargetindexbyname:="" morph="" target="" "+a+"="" does="" not="" exist.="" returning="" 0.");return="" 0};="" three.mesh.prototype.raycast="function(){function" a(a,b,c,d,e,f,g){three.triangle.barycoordfrompoint(a,b,c,d,t);e.multiplyscalar(t.x);f.multiplyscalar(t.y);g.multiplyscalar(t.z);e.add(f).add(g);return="" e.clone()}function="" b(a,b,c,d,e,f,g){var="" h="a.material;if(null===(h.side===THREE.BackSide?c.intersectTriangle(f,e,d,!0,g):c.intersectTriangle(d,e,f,h.side!==THREE.DoubleSide,g)))return" null;u.copy(g);u.applymatrix4(a.matrixworld);c="b.ray.origin.distanceTo(u);return" c<b.near||c="">b.far?null:{distance:c,point:u.clone(),
object:a}}function c(c,d,e,g,k,m,p,u){f.fromArray(g,3*m);h.fromArray(g,3*p);l.fromArray(g,3*u);if(c=b(c,d,e,f,h,l,v))k&&(n.fromArray(k,2*m),q.fromArray(k,2*p),s.fromArray(k,2*u),c.uv=a(v,f,h,l,n,q,s)),c.face=new THREE.Face3(m,p,u,THREE.Triangle.normal(f,h,l)),c.faceIndex=m;return c}var d=new THREE.Matrix4,e=new THREE.Ray,g=new THREE.Sphere,f=new THREE.Vector3,h=new THREE.Vector3,l=new THREE.Vector3,k=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,n=new THREE.Vector2,q=new THREE.Vector2,
s=new THREE.Vector2,t=new THREE.Vector3,v=new THREE.Vector3,u=new THREE.Vector3;return function(u,t){var x=this.geometry,B=this.material;if(void 0!==B){null===x.boundingSphere&&x.computeBoundingSphere();var y=this.matrixWorld;g.copy(x.boundingSphere);g.applyMatrix4(y);if(!1!==u.ray.isIntersectionSphere(g)&&(d.getInverse(y),e.copy(u.ray).applyMatrix4(d),null===x.boundingBox||!1!==e.isIntersectionBox(x.boundingBox))){var z,A;if(x instanceof THREE.BufferGeometry){var J,F,B=x.index,y=x.attributes,x=y.position.array;
void 0!==y.uv&&(z=y.uv.array);if(null!==B)for(var y=B.array,C=0,N=y.length;C<n;c+=3){if(b=y[c],j=y[c+1],f=y[c+2],a=c(this,u,e,x,z,b,j,f))a.faceindex=math.floor(c 0="==b)this.calculateInverses();else" 3),t.push(a)}else="" for(c="0,N=x.length;C<N;C+=9)if(B=C/3,J=B+1,F=B+2,A=c(this,u,e,x,z,B,J,F))A.index=B,t.push(A)}else" if(x="" instanceof="" three.geometry){var="" l,q,y="B" three.meshfacematerial,c="!0===y?B.materials:null,N=x.vertices;J=x.faces;F=x.faceVertexUvs[0];0<F.length&&(z=F);for(var" m="0,K=J.length;M<K;M++){var" e="J[M];A=!0===y?C[E.materialIndex]:" b;if(void="" 0!="=A){F=N[E.a];L=N[E.b];Q=N[E.c];if(!0===A.morphTargets){A=x.morphTargets;var" o="this.morphTargetInfluences;f.set(0,0,0);h.set(0,0,0);l.set(0,0,0);for(var" t="0,H=A.length;T<H;T++){var" r="O[T];if(0!==R){var" g="A[T].vertices;f.addScaledVector(k.subVectors(G[E.a],F),R);h.addScaledVector(m.subVectors(G[E.b],L),R);l.addScaledVector(p.subVectors(G[E.c],Q),R)}}f.add(F);h.add(L);l.add(Q);F=f;L=h;Q=l}if(A=b(this,u,e,F,L,Q,v))z&&(O=z[M],n.copy(O[0]),q.copy(O[1]),s.copy(O[2]),A.uv=a(v,F,L,Q,n,q,s)),A.face=" e,a.faceindex="M,t.push(A)}}}}}}}();THREE.Mesh.prototype.clone=function(){return(new" this.constructor(this.geometry,this.material)).copy(this)};three.bone="function(a){THREE.Object3D.call(this);this.type="Bone";this.skin=a};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.constructor=THREE.Bone;THREE.Bone.prototype.copy=function(a){THREE.Object3D.prototype.copy.call(this,a);this.skin=a.skin;return" this};="" three.skeleton="function(a,b,c){this.useVertexTexture=void" three.matrix4;a="a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=THREE.Math.nextPowerOfTwo(Math.ceil(a)),this.boneTextureHeight=this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new" float32array(this.bonetexturewidth*this.bonetextureheight*4),this.bonetexture="new" three.datatexture(this.bonematrices,this.bonetexturewidth,this.bonetextureheight,three.rgbaformat,three.floattype)):="" this.bonematrices="new" float32array(16*this.bones.length);if(void="" if(this.bones.length="==b.length)this.boneInverses=b.slice(0);else" for(console.warn("three.skeleton="" boninverses="" is="" the="" wrong="" length."),this.boneinverses="[],b=0,a=this.bones.length;b<a;b++)this.boneInverses.push(new" three.matrix4)};="" three.skeleton.prototype.calculateinverses="function(){this.boneInverses=[];for(var" a="0,b=this.bones.length;a<b;a++){var" c="new" three.matrix4;this.bones[a]&&c.getinverse(this.bones[a].matrixworld);this.boneinverses.push(c)}};="" three.skeleton.prototype.pose="function(){for(var" a,b="0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)};" three.skeleton.prototype.update="function(){var" three.matrix4;return="" function(){for(var="" b="0,c=this.bones.length;b<c;b++)a.multiplyMatrices(this.bones[b]?this.bones[b].matrixWorld:this.identityMatrix,this.boneInverses[b]),a.flattenToArrayOffset(this.boneMatrices,16*b);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}();THREE.Skeleton.prototype.clone=function(){return" new="" three.skeleton(this.bones,this.boneinverses,this.usevertextexture)};="" three.skinnedmesh="function(a,b,c){THREE.Mesh.call(this,a,b);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new" three.matrix4;this.bindmatrixinverse="new" d,e="0,g=this.geometry.bones.length;e<g;++e)d=this.geometry.bones[e],b=new" three.bone(this),a.push(b),b.name="d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void" this.geometry.bones[e],-1!="=d.parent&&null!==d.parent?a[d.parent].add(a[e]):this.add(a[e])}this.normalizeSkinWeights();this.updateMatrixWorld(!0);this.bind(new" three.skeleton(a,void="" 0,c),this.matrixworld)};three.skinnedmesh.prototype="Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh;" three.skinnedmesh.prototype.bind="function(a,b){this.skeleton=a;void" three.skinnedmesh.prototype.normalizeskinweights="function(){if(this.geometry" three.geometry)for(var="" three.skinnedmesh.prototype.updatematrixworld="function(a){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh" unrecognized="" bindmode:="" "+this.bindmode)};three.skinnedmesh.prototype.clone="function(){return(new" this.constructor(this.geometry,this.material,this.usevertextexture)).copy(this)};="" three.lod="function(){THREE.Object3D.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){console.warn("THREE.LOD:" .objects="" has="" been="" renamed="" to="" .levels.");return="" this.levels}}})};three.lod.prototype="Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.constructor=THREE.LOD;" three.lod.prototype.addlevel="function(a,b){void" b[c-1].object};="" three.lod.prototype.raycast="function(){var" three.vector3;return="" function(b,c){a.setfrommatrixposition(this.matrixworld);var="" d="b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}();" three.lod.prototype.update="function(){var" three.vector3,b="new" function(c){var="">=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<g;e++)d[e].object.visible=!1}}}(); three.lod.prototype.copy="function(a){THREE.Object3D.prototype.copy.call(this,a,!1);a=a.levels;for(var" b="0,c=a.length;b<c;b++){var" d="a[b];this.addLevel(d.object.clone(),d.distance)}return" this};three.lod.prototype.tojson="function(a){a=THREE.Object3D.prototype.toJSON.call(this,a);a.object.levels=[];for(var" e="b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return" a};="" three.sprite="function(){var" a="new" uint16array([0,1,2,0,2,3]),b="new" float32array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),c="new" float32array([0,0,1,0,1,1,0,1]),d="new" three.buffergeometry;d.setindex(new="" three.bufferattribute(a,1));d.addattribute("position",new="" three.bufferattribute(b,3));d.addattribute("uv",new="" three.bufferattribute(c,2));return="" function(a){three.object3d.call(this);this.type="Sprite" ;this.geometry="d;this.material=void" 0!="=a?a:new" three.spritematerial}}();three.sprite.prototype="Object.create(THREE.Object3D.prototype);" three.sprite.prototype.constructor="THREE.Sprite;THREE.Sprite.prototype.raycast=function(){var" three.vector3;return="" function(b,c){a.setfrommatrixposition(this.matrixworld);var="">this.scale.x*this.scale.y||c.push({distance:Math.sqrt(d),point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.clone=function(){return(new this.constructor(this.material)).copy(this)};THREE.Particle=THREE.Sprite;
THREE.LensFlare=function(a,b,c,d,e){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,d,e)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.constructor=THREE.LensFlare;
THREE.LensFlare.prototype.add=function(a,b,c,d,e,g){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===g&&(g=1);void 0===e&&(e=new THREE.Color(16777215));void 0===d&&(d=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:g,color:e,blending:d})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensflares[a],c.x=this.positionscreen.x+d*c.distance,c.y=this.positionscreen.y+e*c.distance,c.wantedrotation=c.x*math.pi*.25,c.rotation+=.25*(c.wantedrotation-c.rotation)}; three.lensflare.prototype.copy="function(a){THREE.Object3D.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var" b="0,c=a.lensFlares.length;b<c;b++)this.lensFlares.push(a.lensFlares[b]);return" this};three.scene="function(){THREE.Object3D.call(this);this.type="Scene";this.overrideMaterial=this.fog=null;this.autoUpdate=!0};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.constructor=THREE.Scene;" three.scene.prototype.copy="function(a){THREE.Object3D.prototype.copy.call(this,a);null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return" this};three.fog="function(a,b,c){this.name="";this.color=new" three.color(a);this.near="void" 0!="=b?b:1;this.far=void" new="" three.fog(this.color.gethex(),this.near,this.far)};="" three.fogexp2="function(a,b){this.name="";this.color=new" three.color(a);this.density="void" three.fogexp2(this.color.gethex(),this.density)};three.shaderchunk="{};THREE.ShaderChunk.alphamap_fragment="#ifdef" use_alphamap\n\n\tdiffusecolor.a="" *="texture2D(" alphamap,="" vuv="" ).g;\n\n#endif\n";three.shaderchunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n" ;three.shaderchunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n" ;="" three.shaderchunk.aomap_fragment="#ifdef USE_AOMAP\n\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n" ;three.shaderchunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif" ;three.shaderchunk.begin_vertex="\nvec3 transformed = vec3( position );\n" ;three.shaderchunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n" ;three.shaderchunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n" three.shaderchunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif" ;three.shaderchunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n" ;three.shaderchunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif" ;three.shaderchunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif" ;three.shaderchunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n\tif ( decayExponent > 0.0 ) {\n\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n\t#ifdef GAMMA_INPUT\n\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n\t#ifdef GAMMA_OUTPUT\n\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n\t#else\n\n\t\treturn a;\n\n\t#endif\n\n}\n" three.shaderchunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n" ;three.shaderchunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n" ;three.shaderchunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n" three.shaderchunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n\ttotalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n" ;three.shaderchunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n" ;three.shaderchunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\n\tenvColor.xyz = inputToLinear( envColor.xyz );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n" three.shaderchunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n" ;three.shaderchunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n" three.shaderchunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n" three.shaderchunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\t\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif" three.shaderchunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif" ;three.shaderchunk.hemilight_fragment="#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\ttotalAmbientLight += lightColor;\n\n\t}\n\n#endif\n\n" three.shaderchunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n" ;three.shaderchunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif" ;three.shaderchunk.lights_lambert_pars_vertex="#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n" three.shaderchunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n\tvLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\n\n\t\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n\t\t\t#endif\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tvLightFront += lightColor * saturate( dotProduct );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\n\n\n\t\tfloat dotProduct = dot( normal, lightDir );\n\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n\t\t#endif\n\n\t}\n\n#endif\n" three.shaderchunk.lights_phong_fragment="vec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = pointLightColor[ i ];\n\n\t\tvec3 lightPosition = pointLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n\t}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = spotLightColor[ i ];\n\n\t\tvec3 lightPosition = spotLightPosition[ i ];\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\n\t\tvec3 lightDir = normalize( lVector );\n\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\n\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n\t\t\tattenuation *= spotEffect;\n\n\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\t\t}\n\n\t}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n\t\tvec3 lightColor = directionalLightColor[ i ];\n\n\t\tvec3 lightDir = directionalLightDirection[ i ];\n\n\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\n\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\n\n\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n\t}\n\n#endif\n" three.shaderchunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n" three.shaderchunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\n#endif\n" ;three.shaderchunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n" ;three.shaderchunk.linear_to_gamma_fragment="\n\toutgoingLight = linearToOutput( outgoingLight );\n" three.shaderchunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif" ;three.shaderchunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n" ;three.shaderchunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif" three.shaderchunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif" ;three.shaderchunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\n\n\tdiffuseColor *= texelColor;\n\n#endif\n" three.shaderchunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif" ;three.shaderchunk.map_particle_fragment="#ifdef USE_MAP\n\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n" ;three.shaderchunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n" ;three.shaderchunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n" three.shaderchunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif" ;three.shaderchunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n" three.shaderchunk.normal_phong_fragment="#ifndef FLAT_SHADED\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n\t#endif\n\n#else\n\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n" three.shaderchunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n" three.shaderchunk.project_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n" ;three.shaderchunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\tfloat texelSizeY =  1.0 / shadowMapSize[ i ].y;\n\n\t\tfloat shadow = 0.0;\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\tbool isPointLight = shadowDarkness[ i ] < 0.0;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tfloat realShadowDarkness = abs( shadowDarkness[ i ] );\n\n\t\t\tvec3 lightToPosition = vShadowCoord[ i ].xyz;\n\n\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tconst float Dr = 1.25;\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tconst float Dr = 2.25;\n\t#endif\n\n\t\t\tfloat os = Dr *  2.0 * texelSizeY;\n\n\t\t\tconst vec3 Gsd = vec3( - 1, 0, 1 );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness * ( 1.0 / 21.0 );\n\n\t#else \n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tfloat dp = length( lightToPosition );\n\n\t\t\tadjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\t\t\tshadow *= realShadowDarkness;\n\n\t#endif\n\n\t\t} else {\n\n#endif \n\t\t\tfloat texelSizeX =  1.0 / shadowMapSize[ i ].x;\n\n\t\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\n\t\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\t\tbool inFrustum = all( inFrustumVec );\n\n\t\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\t\tbool frustumTest = all( frustumTestVec );\n\n\t\t\tif ( frustumTest ) {\n\n\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\n\t\t\t\t/*\n\t\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\n\t\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\t\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\t\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\t\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\t\t\t\tshadow += 1.0;\n\t\t\t\t\t}\n\t\t\t\t\tshadow /= 9.0;\n\t\t\t\t*/\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tconst float ShadowDelta = 1.0 / 9.0;\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.25 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.25 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\n\n\t\t\t\tfloat fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n\t\t\t\tshadow *= shadowDarkness[ i ];\n\n\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tfloat xPixelOffset = texelSizeX;\n\t\t\t\tfloat yPixelOffset = texelSizeY;\n\n\t\t\t\tfloat dx0 = - 1.0 * xPixelOffset;\n\t\t\t\tfloat dy0 = - 1.0 * yPixelOffset;\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\n\n\t\t\t\tmat3 shadowKernel;\n\t\t\t\tmat3 depthKernel;\n\n\t\t\t\tdepthKernel[ 0 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 0 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n\t\t\t\tdepthKernel[ 1 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n\t\t\t\tdepthKernel[ 1 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n\t\t\t\tdepthKernel[ 2 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\n\t\t\t\tshadowKernel[ 0 ] = vec3( lessThan( depthKernel[ 0 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 0 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 1 ] = vec3( lessThan( depthKernel[ 1 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 1 ] *= vec3( 0.25 );\n\n\t\t\t\tshadowKernel[ 2 ] = vec3( lessThan( depthKernel[ 2 ], shadowZ ) );\n\t\t\t\tshadowKernel[ 2 ] *= vec3( 0.25 );\n\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[ i ].xy );\n\n\t\t\t\tshadowKernel[ 0 ] = mix( shadowKernel[ 1 ], shadowKernel[ 0 ], fractionalCoord.x );\n\t\t\t\tshadowKernel[ 1 ] = mix( shadowKernel[ 2 ], shadowKernel[ 1 ], fractionalCoord.x );\n\n\t\t\t\tvec4 shadowValues;\n\t\t\t\tshadowValues.x = mix( shadowKernel[ 0 ][ 1 ], shadowKernel[ 0 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.y = mix( shadowKernel[ 0 ][ 2 ], shadowKernel[ 0 ][ 1 ], fractionalCoord.y );\n\t\t\t\tshadowValues.z = mix( shadowKernel[ 1 ][ 1 ], shadowKernel[ 1 ][ 0 ], fractionalCoord.y );\n\t\t\t\tshadowValues.w = mix( shadowKernel[ 1 ][ 2 ], shadowKernel[ 1 ][ 1 ], fractionalCoord.y );\n\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) ) * shadowDarkness[ i ];\n\n\t#else \n\t\t\t\tshadowCoord.z += shadowBias[ i ];\n\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\n\n\t\t\t\tif ( fDepth < shadowCoord.z )\n\t\t\t\t\tshadow = shadowDarkness[ i ];\n\n\t#endif\n\n\t\t\t}\n\n#ifdef SHADOWMAP_DEBUG\n\n\t\t\tif ( inFrustum ) {\n\n\t\t\t\tif ( i == 0 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 1.0, 0.5, 0.0 );\n\n\t\t\t\t} else if ( i == 1 ) {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 1.0, 0.8 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toutgoingLight *= vec3( 0.0, 0.5, 1.0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n#endif\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n\t\t}\n\n#endif\n\n\t\tshadowMask = shadowMask * vec3( 1.0 - shadow );\n\n\t}\n\n#endif\n" three.shaderchunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform float shadowBias[ MAX_SHADOWS ];\n\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\n\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\tfloat depth = dot( rgba_depth, bit_shift );\n\t\treturn depth;\n\n\t}\n\n\t#if defined(POINT_LIGHT_SHADOWS)\n\n\n\t\tvoid adjustShadowValue1K( const float testDepth, const vec4 textureData, const float bias, inout float shadowValue ) {\n\n\t\t\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\t\t\tif ( testDepth >= dot( textureData, bitSh ) * 1000.0 + bias )\n\t\t\t\tshadowValue += 1.0;\n\n\t\t}\n\n\n\t\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\n\t\t\tvec3 absV = abs( v );\n\n\n\t\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\t\tabsV *= scaleToCube;\n\n\n\t\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\n\n\t\t\tvec2 planar = v.xy;\n\n\t\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\t\tif ( absV.z >= almostOne ) {\n\n\t\t\t\tif ( v.z > 0.0 )\n\t\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\t\tfloat signX = sign( v.x );\n\t\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\t\tfloat signY = sign( v.y );\n\t\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t\t}\n\n\n\t\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t\t}\n\n\t#endif\n\n#endif\n" three.shaderchunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n#endif" ;three.shaderchunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n\tfor ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n\t\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n\t}\n\n#endif" ;three.shaderchunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif" three.shaderchunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n" three.shaderchunk.skinning_vertex="#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n" ;three.shaderchunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n" three.shaderchunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif" ;three.shaderchunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif" ;three.shaderchunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif" three.shaderchunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif" ;three.shaderchunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif" ;three.shaderchunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\n#endif" three.shaderchunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n" ;three.shaderchunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif" three.shaderchunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n" three.uniformsutils="{merge:function(a){for(var" d="this.clone(a[c]),e;for(e" in="" d)b[e]="d[e]}return" b},clone:function(a){var="" a){b[c]="{};for(var" a[c]){var="" e="a[c][d];e" instanceof="" three.color||e="" three.vector2||e="" three.vector3||e="" three.vector4||e="" three.matrix3||e="" three.matrix4||e="" three.texture?b[c][d]="e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return" b}};="" three.uniformslib="{common:{diffuse:{type:"c",value:new" three.color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetrepeat:{type:"v4",value:new="" three.vector4(0,0,1,1)},specularmap:{type:"t",value:null},alphamap:{type:"t",value:null},envmap:{type:"t",value:null},flipenvmap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionratio:{type:"f",value:.98}},aomap:{aomap:{type:"t",value:null},aomapintensity:{type:"f",value:1}},lightmap:{lightmap:{type:"t",value:null},lightmapintensity:{type:"f",="" value:1}},emissivemap:{emissivemap:{type:"t",value:null}},bumpmap:{bumpmap:{type:"t",value:null},bumpscale:{type:"f",value:1}},normalmap:{normalmap:{type:"t",value:null},normalscale:{type:"v2",value:new="" three.vector2(1,1)}},displacementmap:{displacementmap:{type:"t",value:null},displacementscale:{type:"f",value:1},displacementbias:{type:"f",value:0}},fog:{fogdensity:{type:"f",value:2.5e-4},fognear:{type:"f",value:1},fogfar:{type:"f",value:2e3},fogcolor:{type:"c",value:new="" three.color(16777215)}},="" lights:{ambientlightcolor:{type:"fv",value:[]},directionallightdirection:{type:"fv",value:[]},directionallightcolor:{type:"fv",value:[]},hemispherelightdirection:{type:"fv",value:[]},hemispherelightskycolor:{type:"fv",value:[]},hemispherelightgroundcolor:{type:"fv",value:[]},pointlightcolor:{type:"fv",value:[]},pointlightposition:{type:"fv",value:[]},pointlightdistance:{type:"fv1",value:[]},pointlightdecay:{type:"fv1",value:[]},spotlightcolor:{type:"fv",value:[]},spotlightposition:{type:"fv",value:[]},="" spotlightdirection:{type:"fv",value:[]},spotlightdistance:{type:"fv1",value:[]},spotlightanglecos:{type:"fv1",value:[]},spotlightexponent:{type:"fv1",value:[]},spotlightdecay:{type:"fv1",value:[]}},points:{pscolor:{type:"c",value:new="" three.color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetrepeat:{type:"v4",value:new="" three.vector4(0,0,1,1)},fogdensity:{type:"f",value:2.5e-4},fognear:{type:"f",value:1},fogfar:{type:"f",value:2e3},="" fogcolor:{type:"c",value:new="" three.color(16777215)}},shadowmap:{shadowmap:{type:"tv",value:[]},shadowmapsize:{type:"v2v",value:[]},shadowbias:{type:"fv1",value:[]},shadowdarkness:{type:"fv1",value:[]},shadowmatrix:{type:"m4v",value:[]}}};="" three.shaderlib="{basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex," "void="" main()="" {",three.shaderchunk.uv_vertex,three.shaderchunk.uv2_vertex,three.shaderchunk.color_vertex,three.shaderchunk.skinbase_vertex,"\t#ifdef="" use_envmap",three.shaderchunk.beginnormal_vertex,three.shaderchunk.morphnormal_vertex,three.shaderchunk.skinnormal_vertex,three.shaderchunk.defaultnormal_vertex,"\t#endif",three.shaderchunk.begin_vertex,three.shaderchunk.morphtarget_vertex,three.shaderchunk.skinning_vertex,three.shaderchunk.project_vertex,three.shaderchunk.logdepthbuf_vertex,three.shaderchunk.worldpos_vertex,="" three.shaderchunk.envmap_vertex,three.shaderchunk.shadowmap_vertex,"}"].join("\n"),fragmentshader:["uniform="" vec3="" diffuse;\nuniform="" float="" opacity;",three.shaderchunk.common,three.shaderchunk.color_pars_fragment,three.shaderchunk.uv_pars_fragment,three.shaderchunk.uv2_pars_fragment,three.shaderchunk.map_pars_fragment,three.shaderchunk.alphamap_pars_fragment,three.shaderchunk.aomap_pars_fragment,three.shaderchunk.envmap_pars_fragment,three.shaderchunk.fog_pars_fragment,three.shaderchunk.shadowmap_pars_fragment,="" three.shaderchunk.specularmap_pars_fragment,three.shaderchunk.logdepthbuf_pars_fragment,"void="" {\n\tvec3="" outgoinglight="vec3(" 0.0="" );\n\tvec4="" diffusecolor="vec4(" diffuse,="" opacity="" );\n\tvec3="" totalambientlight="vec3(" 1.0="" shadowmask="vec3(" );",three.shaderchunk.logdepthbuf_fragment,three.shaderchunk.map_fragment,three.shaderchunk.color_fragment,three.shaderchunk.alphamap_fragment,three.shaderchunk.alphatest_fragment,three.shaderchunk.specularmap_fragment,three.shaderchunk.aomap_fragment,="" three.shaderchunk.shadowmap_fragment,"\toutgoinglight="diffuseColor.rgb" shadowmask;",three.shaderchunk.envmap_fragment,three.shaderchunk.linear_to_gamma_fragment,three.shaderchunk.fog_fragment,"\tgl_fragcolor="vec4(" outgoinglight,="" diffusecolor.a="" );\n}"].join("\n")},lambert:{uniforms:three.uniformsutils.merge([three.uniformslib.common,three.uniformslib.fog,three.uniformslib.lights,three.uniformslib.shadowmap,{emissive:{type:"c",value:new="" three.color(0)}}]),vertexshader:["#define="" lambert\nvarying="" vlightfront;\n#ifdef="" double_sided\n\tvarying="" vlightback;\n#endif",="" three.shaderchunk.common,three.shaderchunk.uv_pars_vertex,three.shaderchunk.uv2_pars_vertex,three.shaderchunk.envmap_pars_vertex,three.shaderchunk.lights_lambert_pars_vertex,three.shaderchunk.color_pars_vertex,three.shaderchunk.morphtarget_pars_vertex,three.shaderchunk.skinning_pars_vertex,three.shaderchunk.shadowmap_pars_vertex,three.shaderchunk.logdepthbuf_pars_vertex,"void="" {",three.shaderchunk.uv_vertex,three.shaderchunk.uv2_vertex,three.shaderchunk.color_vertex,three.shaderchunk.beginnormal_vertex,="" three.shaderchunk.morphnormal_vertex,three.shaderchunk.skinbase_vertex,three.shaderchunk.skinnormal_vertex,three.shaderchunk.defaultnormal_vertex,three.shaderchunk.begin_vertex,three.shaderchunk.morphtarget_vertex,three.shaderchunk.skinning_vertex,three.shaderchunk.project_vertex,three.shaderchunk.logdepthbuf_vertex,three.shaderchunk.worldpos_vertex,three.shaderchunk.envmap_vertex,three.shaderchunk.lights_lambert_vertex,three.shaderchunk.shadowmap_vertex,"}"].join("\n"),fragmentshader:["uniform="" emissive;\nuniform="" opacity;\nuniform="" ambientlightcolor;\nvarying="" three.shaderchunk.common,three.shaderchunk.color_pars_fragment,three.shaderchunk.uv_pars_fragment,three.shaderchunk.uv2_pars_fragment,three.shaderchunk.map_pars_fragment,three.shaderchunk.alphamap_pars_fragment,three.shaderchunk.envmap_pars_fragment,three.shaderchunk.fog_pars_fragment,three.shaderchunk.shadowmap_pars_fragment,three.shaderchunk.specularmap_pars_fragment,three.shaderchunk.logdepthbuf_pars_fragment,"void="" );",="" three.shaderchunk.logdepthbuf_fragment,three.shaderchunk.map_fragment,three.shaderchunk.color_fragment,three.shaderchunk.alphamap_fragment,three.shaderchunk.alphatest_fragment,three.shaderchunk.specularmap_fragment,three.shaderchunk.shadowmap_fragment,"\t#ifdef="" double_sided\n\t\tif="" (="" gl_frontfacing="" )\n\t\t\toutgoinglight="" +="diffuseColor.rgb" vlightfront="" )="" emissive;\n\t\telse\n\t\t\toutgoinglight="" vlightback="" emissive;\n\t#else\n\t\toutgoinglight="" emissive;\n\t#endif",="" three.shaderchunk.envmap_fragment,three.shaderchunk.linear_to_gamma_fragment,three.shaderchunk.fog_fragment,"\tgl_fragcolor="vec4(" );\n}"].join("\n")},phong:{uniforms:three.uniformsutils.merge([three.uniformslib.common,three.uniformslib.aomap,three.uniformslib.lightmap,three.uniformslib.emissivemap,three.uniformslib.bumpmap,three.uniformslib.normalmap,three.uniformslib.displacementmap,three.uniformslib.fog,three.uniformslib.lights,three.uniformslib.shadowmap,{emissive:{type:"c",="" value:new="" three.color(0)},specular:{type:"c",value:new="" three.color(1118481)},shininess:{type:"f",value:30}}]),vertexshader:["#define="" phong\nvarying="" vviewposition;\n#ifndef="" flat_shaded\n\tvarying="" vnormal;\n#endif",three.shaderchunk.common,three.shaderchunk.uv_pars_vertex,three.shaderchunk.uv2_pars_vertex,three.shaderchunk.displacementmap_pars_vertex,three.shaderchunk.envmap_pars_vertex,three.shaderchunk.lights_phong_pars_vertex,three.shaderchunk.color_pars_vertex,three.shaderchunk.morphtarget_pars_vertex,="" three.shaderchunk.skinning_pars_vertex,three.shaderchunk.shadowmap_pars_vertex,three.shaderchunk.logdepthbuf_pars_vertex,"void="" {",three.shaderchunk.uv_vertex,three.shaderchunk.uv2_vertex,three.shaderchunk.color_vertex,three.shaderchunk.beginnormal_vertex,three.shaderchunk.morphnormal_vertex,three.shaderchunk.skinbase_vertex,three.shaderchunk.skinnormal_vertex,three.shaderchunk.defaultnormal_vertex,"#ifndef="" flat_shaded\n\tvnormal="normalize(" transformednormal="" );\n#endif",three.shaderchunk.begin_vertex,="" three.shaderchunk.displacementmap_vertex,three.shaderchunk.morphtarget_vertex,three.shaderchunk.skinning_vertex,three.shaderchunk.project_vertex,three.shaderchunk.logdepthbuf_vertex,"\tvviewposition="-" mvposition.xyz;",three.shaderchunk.worldpos_vertex,three.shaderchunk.envmap_vertex,three.shaderchunk.lights_phong_vertex,three.shaderchunk.shadowmap_vertex,"}"].join("\n"),fragmentshader:["#define="" phong\nuniform="" specular;\nuniform="" shininess;\nuniform="" opacity;",="" three.shaderchunk.common,three.shaderchunk.color_pars_fragment,three.shaderchunk.uv_pars_fragment,three.shaderchunk.uv2_pars_fragment,three.shaderchunk.map_pars_fragment,three.shaderchunk.alphamap_pars_fragment,three.shaderchunk.aomap_pars_fragment,three.shaderchunk.lightmap_pars_fragment,three.shaderchunk.emissivemap_pars_fragment,three.shaderchunk.envmap_pars_fragment,three.shaderchunk.fog_pars_fragment,three.shaderchunk.lights_phong_pars_fragment,three.shaderchunk.shadowmap_pars_fragment,three.shaderchunk.bumpmap_pars_fragment,="" three.shaderchunk.normalmap_pars_fragment,three.shaderchunk.specularmap_pars_fragment,three.shaderchunk.logdepthbuf_pars_fragment,"void="" totalemissivelight="emissive;\n\tvec3" );",three.shaderchunk.logdepthbuf_fragment,three.shaderchunk.map_fragment,three.shaderchunk.color_fragment,three.shaderchunk.alphamap_fragment,three.shaderchunk.alphatest_fragment,="" three.shaderchunk.specularmap_fragment,three.shaderchunk.normal_phong_fragment,three.shaderchunk.lightmap_fragment,three.shaderchunk.hemilight_fragment,three.shaderchunk.aomap_fragment,three.shaderchunk.emissivemap_fragment,three.shaderchunk.lights_phong_fragment,three.shaderchunk.shadowmap_fragment,"totaldiffuselight="" metal\n\toutgoinglight="" totaldiffuselight="" specular="" totalspecularlight="" totalemissivelight;\n#else\n\toutgoinglight="" totalemissivelight;\n#endif",="" );\n}"].join("\n")},points:{uniforms:three.uniformsutils.merge([three.uniformslib.points,three.uniformslib.shadowmap]),vertexshader:["uniform="" size;\nuniform="" scale;",three.shaderchunk.common,three.shaderchunk.color_pars_vertex,three.shaderchunk.shadowmap_pars_vertex,three.shaderchunk.logdepthbuf_pars_vertex,"void="" {",three.shaderchunk.color_vertex,="" "\tvec4="" mvposition="modelViewMatrix" vec4(="" position,="" );\n\t#ifdef="" use_sizeattenuation\n\t\tgl_pointsize="size" scale="" length(="" mvposition.xyz="" );\n\t#else\n\t\tgl_pointsize="size;\n\t#endif\n\tgl_Position" =="" projectionmatrix="" mvposition;",three.shaderchunk.logdepthbuf_vertex,three.shaderchunk.worldpos_vertex,three.shaderchunk.shadowmap_vertex,"}"].join("\n"),fragmentshader:["uniform="" pscolor;\nuniform="" opacity;",three.shaderchunk.common,three.shaderchunk.color_pars_fragment,three.shaderchunk.map_particle_pars_fragment,="" three.shaderchunk.fog_pars_fragment,three.shaderchunk.shadowmap_pars_fragment,three.shaderchunk.logdepthbuf_pars_fragment,"void="" pscolor,="" );",three.shaderchunk.logdepthbuf_fragment,three.shaderchunk.map_particle_fragment,three.shaderchunk.color_fragment,three.shaderchunk.alphatest_fragment,three.shaderchunk.shadowmap_fragment,"\toutgoinglight="diffuseColor.rgb" shadowmask;",three.shaderchunk.fog_fragment,="" "\tgl_fragcolor="vec4(" );\n}"].join("\n")},dashed:{uniforms:three.uniformsutils.merge([three.uniformslib.common,three.uniformslib.fog,{scale:{type:"f",value:1},dashsize:{type:"f",value:1},totalsize:{type:"f",value:2}}]),vertexshader:["uniform="" scale;\nattribute="" linedistance;\nvarying="" vlinedistance;",three.shaderchunk.common,three.shaderchunk.color_pars_vertex,three.shaderchunk.logdepthbuf_pars_vertex,"void="" {",three.shaderchunk.color_vertex,"\tvlinedistance="scale" linedistance;\n\tvec4="" );\n\tgl_position="projectionMatrix" mvposition;",="" three.shaderchunk.logdepthbuf_vertex,"}"].join("\n"),fragmentshader:["uniform="" dashsize;\nuniform="" totalsize;\nvarying="" vlinedistance;",three.shaderchunk.common,three.shaderchunk.color_pars_fragment,three.shaderchunk.fog_pars_fragment,three.shaderchunk.logdepthbuf_pars_fragment,"void="" {\n\tif="" mod(="" vlinedistance,="" totalsize=""> dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );",
THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"\toutgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,
THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\n\tgl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},
normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,
THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",
THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",
THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,
THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n\tres -= res.xxyz * bit_mask;\n\treturn res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n\t#else\n\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n\t#endif\n}"].join("\n")},
distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;\n}"].join("\n"),fragmentShader:["uniform vec3 lightPos;\nvarying vec4 vWorldPosition;",
THREE.ShaderChunk.common,"vec4 pack1K ( float depth ) {\n   depth /= 1000.0;\n   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n\tconst vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n\tvec4 res = fract( depth * bitSh );\n\tres -= res.xxyz * bitMsk;\n\treturn res; \n}\nfloat unpack1K ( vec4 color ) {\n\tconst vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\treturn dot( color, bitSh ) * 1000.0;\n}\nvoid main () {\n\tgl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );\n}"].join("\n")}};
THREE.WebGLRenderer=function(a){function b(a,b,c,d){!0===G&&(a*=d,b*=d,c*=d);r.clearColor(a,b,c,d)}function c(){I.init();r.viewport(na,oa,pa,qa);b(U.r,U.g,U.b,X)}function d(){ra=Aa=null;sa="";ta=-1;wa=!0;I.reset()}function e(a){a.preventDefault();d();c();W.clear()}function g(a){a=a.target;a.removeEventListener("dispose",g);a:{var b=W.get(a);if(a.image&&b.__image__webglTextureCube)r.deleteTexture(b.__image__webglTextureCube);else{if(void 0===b.__webglInit)break a;r.deleteTexture(b.__webglTexture)}W.delete(a)}la.textures--}
function f(a){a=a.target;a.removeEventListener("dispose",f);var b=W.get(a),c=W.get(a.texture);if(a&&void 0!==c.__webglTexture){r.deleteTexture(c.__webglTexture);if(a instanceof THREE.WebGLRenderTargetCube)for(c=0;6>c;c++)r.deleteFramebuffer(b.__webglFramebuffer[c]),r.deleteRenderbuffer(b.__webglRenderbuffer[c]);else r.deleteFramebuffer(b.__webglFramebuffer),r.deleteRenderbuffer(b.__webglRenderbuffer);W.delete(a.texture);W.delete(a)}la.textures--}function h(a){a=a.target;a.removeEventListener("dispose",
h);l(a);W.delete(a)}function l(a){var b=W.get(a).program;a.program=void 0;void 0!==b&&ua.releaseProgram(b)}function k(a,b){return b[0]-a[0]}function m(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function p(a,b){return a.object.renderOrder!==b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function n(a,b,c,d,e){var f;c.transparent?
(d=Z,f=++fa):(d=ca,f=++ga);f=d[f];void 0!==f?(f.id=a.id,f.object=a,f.geometry=b,f.material=c,f.z=V.z,f.group=e):(f={id:a.id,object:a,geometry:b,material:c,z:V.z,group:e},d.push(f))}function q(a,b){if(!1!==a.visible){if(0!==(a.channels.mask&b.channels.mask))if(a instanceof THREE.Light)da.push(a);else if(a instanceof THREE.Sprite)ea.push(a);else if(a instanceof THREE.LensFlare)ja.push(a);else if(a instanceof THREE.ImmediateRenderObject)!0===aa.sortObjects&&(V.setFromMatrixPosition(a.matrixWorld),V.applyProjection(xa)),
n(a,null,a.material,V.z,null);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points)if(a instanceof THREE.SkinnedMesh&&a.skeleton.update(),!1===a.frustumCulled||!0===Ba.intersectsObject(a)){var c=a.material;if(!0===c.visible){!0===aa.sortObjects&&(V.setFromMatrixPosition(a.matrixWorld),V.applyProjection(xa));var d=va.update(a);if(c instanceof THREE.MeshFaceMaterial)for(var e=d.groups,f=c.materials,c=0,g=e.length;c<g;c++){var 0="==e?h.material:e,h=h.group;l.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,l.matrixWorld);l.normalMatrix.getNormalMatrix(l.modelViewMatrix);if(l" h="e[c],l=f[h.materialIndex];!0===l.visible&&" n(a,d,l,v.z,h)}else="" n(a,d,c,v.z,null)}}d="a.children;c=0;for(g=d.length;c<g;c++)q(d[c],b)}}function" s(a,b,c,d,e){for(var="" f="0,g=a.length;f<g;f++){var" instanceof="" three.immediaterenderobject){t(n);var="" m="v(b,c,d,n,l);sa="";l.render(function(a){aa.renderBufferImmediate(a,m,n)})}else" aa.renderbufferdirect(b,c,d,k,="" n,l,h)}}function="" t(a){a.side!="=THREE.DoubleSide?I.enable(r.CULL_FACE):I.disable(r.CULL_FACE);I.setFlipSided(a.side===THREE.BackSide);!0===a.transparent?I.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha):I.setBlending(THREE.NoBlending);I.setDepthFunc(a.depthFunc);I.setDepthTest(a.depthTest);I.setDepthWrite(a.depthWrite);I.setColorWrite(a.colorWrite);I.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function" v(a,="" b,c,d,e){ya="0;var" g="W.get(d),k=ua.getParameters(d,b,c,e),n=ua.getProgramCode(d,k),m=g.program,q=!0;if(void" if(m.code!="=n)l(d);else" if(void="" 0!="=k.shaderID)break" a;else="" q="!1;q&&(k.shaderID?(m=THREE.ShaderLib[k.shaderID],g.__webglShader={name:d.type,uniforms:THREE.UniformsUtils.clone(m.uniforms),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}):g.__webglShader={name:d.type,uniforms:d.uniforms,vertexShader:d.vertexShader," fragmentshader:d.fragmentshader},d.__webglshader="g.__webglShader,m=ua.acquireProgram(d,k,n),g.program=m,d.program=m);k=m.getAttributes();if(d.morphTargets)for(n=d.numSupportedMorphTargets=0;n<aa.maxMorphTargets;n++)0<=k["morphTarget"+n]&&d.numSupportedMorphTargets++;if(d.morphNormals)for(n=d.numSupportedMorphNormals=0;n<aa.maxMorphNormals;n++)0<=k["morphNormal"+n]&&d.numSupportedMorphNormals++;g.uniformsList=[];var" k="g.program.getUniforms(),p;for(p" in="" g.__webglshader.uniforms)(n="k[p])&&g.uniformsList.push([g.__webglShader.uniforms[p]," n])}d.needsupdate="!1}n=m=q=!1;g=f.program;p=g.getUniforms();k=f.__webglShader.uniforms;g.id!==Aa&&(r.useProgram(g.program),Aa=g.id,n=m=q=!0);d.id!==ta&&(-1===ta&&(n=!0),ta=d.id,m=!0);if(q||a!==ra)r.uniformMatrix4fv(p.projectionMatrix,!1,a.projectionMatrix.elements),ha.logarithmicDepthBuffer&&r.uniform1f(p.logDepthBufFC,2/(Math.log(a.far+1)/Math.LN2)),a!==ra&&(ra=a),(d" three.shadermaterial||d="" three.meshphongmaterial||d.envmap)&&void="" r.uniform3f(p.cameraposition,v.x,v.y,v.z)),(d="" three.meshphongmaterial||d="" three.meshlambertmaterial||d="" three.meshbasicmaterial||d="" three.shadermaterial||d.skinning)&&void="" ha.floatvertextextures&&e.skeleton&&e.skeleton.usevertextexture?(void="" (k.fogcolor.value="c.color,c" three.fog?(k.fognear.value="c.near,k.fogFar.value=c.far):c" three.fogexp2&&(k.fogdensity.value="c.density));if(d" three.meshlambertmaterial||d.lights){if(wa){var="" n="!0,s,t=q=0,x=0,v,F,C,y=Ca,E=a.matrixWorldInverse,B=y.directional.colors,K=y.directional.positions,O=y.point.colors,N=y.point.positions,M=y.point.distances,G=y.point.decays,J=y.spot.colors,H=y.spot.positions,Q=y.spot.distances,I=y.spot.directions," da="y.spot.anglesCos,T=y.spot.exponents,R=y.spot.decays,Z=y.hemi.skyColors,ga=y.hemi.groundColors,S=y.hemi.positions,ca=0,U=0,ea=0,fa=0,ja=0,ma=0,X=0,$=0,ba=s=0;c=C=ba=0;for(m=b.length;c<m;c++)s=b[c],v=s.color,F=s.intensity,C=s.distance,s" three.ambientlight?s.visible&&(q+="v.r,t+=v.g,x+=v.b):s" three.directionallight?(ja+="1,s.visible&&(Y.setFromMatrixPosition(s.matrixWorld),V.setFromMatrixPosition(s.target.matrixWorld),Y.sub(V),Y.transformDirection(E),s=3*ca,K[s+0]=Y.x,K[s+1]=Y.y," k[s+2]="Y.z,D(B,s,v,F),ca+=1)):s" three.pointlight?(ma+="1,s.visible&&(ba=3*U,D(O,ba,v,F),V.setFromMatrixPosition(s.matrixWorld),V.applyMatrix4(E),N[ba+0]=V.x,N[ba+1]=V.y,N[ba+2]=V.z,M[U]=C,G[U]=0===s.distance?0:s.decay,U+=1)):s" three.spotlight?(x+="1,s.visible&&(ba=3*ea,D(J,ba,v,F),Y.setFromMatrixPosition(s.matrixWorld),V.copy(Y).applyMatrix4(E),H[ba+0]=V.x,H[ba+1]=V.y,H[ba+2]=V.z,Q[ea]=C,V.setFromMatrixPosition(s.target.matrixWorld),Y.sub(V),Y.transformDirection(E),I[ba+0]=Y.x," i[ba+1]="Y.y,I[ba+2]=Y.z,da[ea]=Math.cos(s.angle),T[ea]=s.exponent,R[ea]=0===s.distance?0:s.decay,ea+=1)):s" three.hemispherelight&&($+="1,s.visible&&(Y.setFromMatrixPosition(s.matrixWorld),Y.transformDirection(E),C=3*fa,S[C+0]=Y.x,S[C+1]=Y.y,S[C+2]=Y.z,v=s.color,s=s.groundColor,D(Z,C,v,F),D(ga,C,s,F),fa+=1));c=3*ca;for(m=Math.max(B.length,3*ja);c<m;c++)B[c]=0;c=3*U;for(m=Math.max(O.length,3*ma);c<m;c++)O[c]=0;c=3*ea;for(m=Math.max(J.length,3*X);c<m;c++)J[c]=0;c=3*fa;for(m=Math.max(Z.length," 3*$);c<m;c++)z[c]="0;c=3*fa;for(m=Math.max(ga.length,3*$);c<m;c++)ga[c]=0;y.directional.length=ca;y.point.length=U;y.spot.length=ea;y.hemi.length=fa;y.ambient[0]=q;y.ambient[1]=t;y.ambient[2]=x;wa=!1}n?(n=Ca,k.ambientLightColor.value=n.ambient,k.directionalLightColor.value=n.directional.colors,k.directionalLightDirection.value=n.directional.positions,k.pointLightColor.value=n.point.colors,k.pointLightPosition.value=n.point.positions,k.pointLightDistance.value=n.point.distances,k.pointLightDecay.value=" n.point.decays,k.spotlightcolor.value="n.spot.colors,k.spotLightPosition.value=n.spot.positions,k.spotLightDistance.value=n.spot.distances,k.spotLightDirection.value=n.spot.directions,k.spotLightAngleCos.value=n.spot.anglesCos,k.spotLightExponent.value=n.spot.exponents,k.spotLightDecay.value=n.spot.decays,k.hemisphereLightSkyColor.value=n.hemi.skyColors,k.hemisphereLightGroundColor.value=n.hemi.groundColors,k.hemisphereLightDirection.value=n.hemi.positions,u(k,!0)):u(k,!1)}if(d" three.meshbasicmaterial||="" d="" three.meshphongmaterial){k.opacity.value="d.opacity;k.diffuse.value=d.color;d.emissive&&(k.emissive.value=d.emissive);k.map.value=d.map;k.specularMap.value=d.specularMap;k.alphaMap.value=d.alphaMap;d.aoMap&&(k.aoMap.value=d.aoMap,k.aoMapIntensity.value=d.aoMapIntensity);var" p;d.map?p="d.map:d.specularMap?P=d.specularMap:d.displacementMap?P=d.displacementMap:d.normalMap?P=d.normalMap:d.bumpMap?P=d.bumpMap:d.alphaMap?P=d.alphaMap:d.emissiveMap&&(P=" d.emissivemap);void="" three.webglrendertarget&&(p="P.texture),n=P.offset,P=P.repeat,k.offsetRepeat.value.set(n.x,n.y,P.x,P.y));k.envMap.value=d.envMap;k.flipEnvMap.value=d.envMap" three.webglrendertargetcube?1:-1;k.reflectivity.value="d.reflectivity;k.refractionRatio.value=d.refractionRatio}d" three.linebasicmaterial?(k.diffuse.value="d.color,k.opacity.value=d.opacity):d" three.linedashedmaterial?(k.diffuse.value="d.color,k.opacity.value=d.opacity,k.dashSize.value=" d.dashsize,k.totalsize.value="d.dashSize+d.gapSize,k.scale.value=d.scale):d" three.pointsmaterial?(k.pscolor.value="d.color,k.opacity.value=d.opacity,k.size.value=d.size,k.scale.value=L.height/2,k.map.value=d.map,null!==d.map&&(a=d.map.offset,P=d.map.repeat,k.offsetRepeat.value.set(a.x,a.y,P.x,P.y))):d" three.meshphongmaterial?(k.specular.value="d.specular,k.shininess.value=Math.max(d.shininess,1E-4),d.lightMap&&(k.lightMap.value=d.lightMap,k.lightMapIntensity.value=d.lightMapIntensity)," d.emissivemap&&(k.emissivemap.value="d.emissiveMap),d.bumpMap&&(k.bumpMap.value=d.bumpMap,k.bumpScale.value=d.bumpScale),d.normalMap&&(k.normalMap.value=d.normalMap,k.normalScale.value.copy(d.normalScale)),d.displacementMap&&(k.displacementMap.value=d.displacementMap,k.displacementScale.value=d.displacementScale,k.displacementBias.value=d.displacementBias)):d" three.meshdepthmaterial?(k.mnear.value="a.near,k.mFar.value=a.far,k.opacity.value=d.opacity):d" three.meshnormalmaterial&&="" (k.opacity.value="d.opacity);if(e.receiveShadow&&!d._shadowPass&&k.shadowMatrix)for(a=d=0,P=b.length;a<P;a++)n=b[a],!0===n.castShadow&&(n" three.pointlight||n="" three.spotlight||n="" three.directionallight)&&(c="n.shadow,n" three.pointlight?(v.setfrommatrixposition(n.matrixworld).negate(),c.matrix.identity().setposition(v),k.shadowdarkness.value[d]="-c.darkness):k.shadowDarkness.value[d]=c.darkness,k.shadowMatrix.value[d]=c.matrix,k.shadowMap.value[d]=c.map,k.shadowMapSize.value[d]=" c.mapsize,k.shadowbias.value[d]="c.bias,d++);b=f.uniformsList;f=0;for(d=b.length;f<d;f++)if(a=b[f][0],!1!==a.needsUpdate)switch(k=a.type,c=a.value,P=b[f][1],k){case" "1i":r.uniform1i(p,c);break;case="" "1f":r.uniform1f(p,c);break;case="" "2f":r.uniform2f(p,c[0],c[1]);break;case="" "3f":r.uniform3f(p,c[0],c[1],c[2]);break;case="" "4f":r.uniform4f(p,c[0],c[1],c[2],c[3]);break;case="" "1iv":r.uniform1iv(p,c);break;case="" "3iv":r.uniform3iv(p,c);break;case="" "1fv":r.uniform1fv(p,c);break;case="" "2fv":r.uniform2fv(p,c);break;="" case="" "3fv":r.uniform3fv(p,c);break;case="" "4fv":r.uniform4fv(p,c);break;case="" "matrix3fv":r.uniformmatrix3fv(p,!1,c);break;case="" "matrix4fv":r.uniformmatrix4fv(p,!1,c);break;case="" "i":r.uniform1i(p,c);break;case="" "f":r.uniform1f(p,c);break;case="" "v2":r.uniform2f(p,c.x,c.y);break;case="" "v3":r.uniform3f(p,c.x,c.y,c.z);break;case="" "v4":r.uniform4f(p,c.x,c.y,c.z,c.w);break;case="" "c":r.uniform3f(p,c.r,c.g,c.b);break;case="" "iv1":r.uniform1iv(p,c);break;case="" "iv":r.uniform3iv(p,c);break;case="" "fv1":r.uniform1fv(p,c);="" break;case="" "fv":r.uniform3fv(p,c);break;case="" "v2v":void="" float32array(2*c.length));m="k=0;for(n=c.length;k<n;k++,m+=2)a._array[m+0]=c[k].x,a._array[m+1]=c[k].y;r.uniform2fv(P,a._array);break;case" "v3v":void="" float32array(3*c.length));m="k=0;for(n=c.length;k<n;k++,m+=3)a._array[m+0]=c[k].x,a._array[m+1]=c[k].y,a._array[m+2]=c[k].z;r.uniform3fv(P,a._array);break;case" "v4v":void="" float32array(4*c.length));m="k=0;for(n=c.length;k<" n;k++,m+="4)a._array[m+0]=c[k].x,a._array[m+1]=c[k].y,a._array[m+2]=c[k].z,a._array[m+3]=c[k].w;r.uniform4fv(P,a._array);break;case" "m3":r.uniformmatrix3fv(p,!1,c.elements);break;case="" "m3v":void="" float32array(9*c.length));k="0;for(n=c.length;k<n;k++)c[k].flattenToArrayOffset(a._array,9*k);r.uniformMatrix3fv(P,!1,a._array);break;case" "m4":r.uniformmatrix4fv(p,!1,c.elements);break;case="" "m4v":void="" float32array(16*c.length));k="0;for(n=c.length;k<n;k++)c[k].flattenToArrayOffset(a._array," 16*k);r.uniformmatrix4fv(p,!1,a._array);break;case="" "t":m="w();r.uniform1i(P,m);if(!c)continue;c" three.cubetexture||array.isarray(c.image)&&6="==c.image.length?z(c,m):c" three.webglrendertargetcube?a(c.texture,m):c="" three.webglrendertarget?aa.settexture(c.texture,m):aa.settexture(c,m);break;case="" "tv":void="" three.cubetexture||c.image="" array&&6="==c.image.length?z(c,m):c" three.webglrendertarget?aa.settexture(c.texture,m):c="" three.webglrendertargetcube?a(c.texture,m):aa.settexture(c,m));break;default:console.warn("three.webglrenderer:="" unknown="" uniform="" type:="" "+k)}}r.uniformmatrix4fv(p.modelviewmatrix,!1,e.modelviewmatrix.elements);p.normalmatrix&&r.uniformmatrix3fv(p.normalmatrix,!1,e.normalmatrix.elements);void="" return="" g}function="" u(a,b){a.ambientlightcolor.needsupdate="b;a.directionalLightColor.needsUpdate=b;a.directionalLightDirection.needsUpdate=b;a.pointLightColor.needsUpdate=b;a.pointLightPosition.needsUpdate=b;a.pointLightDistance.needsUpdate=b;a.pointLightDecay.needsUpdate=b;a.spotLightColor.needsUpdate=b;a.spotLightPosition.needsUpdate=b;a.spotLightDistance.needsUpdate=b;a.spotLightDirection.needsUpdate=b;a.spotLightAngleCos.needsUpdate=b;a.spotLightExponent.needsUpdate=b;a.spotLightDecay.needsUpdate=" b;a.hemispherelightskycolor.needsupdate="b;a.hemisphereLightGroundColor.needsUpdate=b;a.hemisphereLightDirection.needsUpdate=b}function" w(){var="" a="ya;a">=ha.maxTextures&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+ha.maxTextures);ya+=1;return a}function D(a,b,c,d){a[b+0]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function x(a,b,c){c?(r.texParameteri(a,r.TEXTURE_WRAP_S,N(b.wrapS)),r.texParameteri(a,r.TEXTURE_WRAP_T,N(b.wrapT)),r.texParameteri(a,r.TEXTURE_MAG_FILTER,
N(b.magFilter)),r.texParameteri(a,r.TEXTURE_MIN_FILTER,N(b.minFilter))):(r.texParameteri(a,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(a,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),b.wrapS===THREE.ClampToEdgeWrapping&&b.wrapT===THREE.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",b),r.texParameteri(a,r.TEXTURE_MAG_FILTER,C(b.magFilter)),r.texParameteri(a,r.TEXTURE_MIN_FILTER,C(b.minFilter)),
b.minFilter!==THREE.NearestFilter&&b.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",b));!(c=S.get("EXT_texture_filter_anisotropic"))||b.type===THREE.FloatType&&null===S.get("OES_texture_float_linear")||b.type===THREE.HalfFloatType&&null===S.get("OES_texture_half_float_linear")||!(1<b.anisotropy||w.get(b).__currentanisotropy)||(r.texparameterf(a,c.texture_max_anisotropy_ext, math.min(b.anisotropy,aa.getmaxanisotropy())),w.get(b).__currentanisotropy="b.anisotropy)}function" b(a,b){if(a.width="">b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElement("canvas");d.width=Math.floor(a.width*c);d.height=Math.floor(a.height*c);d.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+d.width+"x"+d.height,a);return d}return a}function y(a){return THREE.Math.isPowerOfTwo(a.width)&&
THREE.Math.isPowerOfTwo(a.height)}function z(a,b){var c=W.get(a);if(6===a.image.length)if(0<a.version&&c.__version!==a.version){c.__image__webgltexturecube||(a.addeventlistener("dispose",g),c.__image__webgltexturecube=r.createtexture(),la.textures++);i.activetexture(r.texture0+b);i.bindtexture(r.texture_cube_map,c.__image__webgltexturecube);r.pixelstorei(r.unpack_flip_y_webgl,a.flipy);for(var d="a" instanceof="" three.compressedtexture,e="a.image[0]instanceof" three.datatexture,f="[],h=0;6">h;h++)f[h]=!aa.autoScaleCubemaps||
d||e?e?a.image[h].image:a.image[h]:B(a.image[h],ha.maxCubemapSize);var k=y(f[0]),l=N(a.format),n=N(a.type);x(r.TEXTURE_CUBE_MAP,a,k);for(h=0;6>h;h++)if(d)for(var m,q=f[h].mipmaps,p=0,s=q.length;p<s;p++)m=q[p],a.format!==three.rgbaformat&&a.format!==three.rgbformat?-1<i.getcompressedtextureformats().indexof(l)?i.compressedteximage2d(r.texture_cube_map_positive_x+h,p,l,m.width,m.height,0,m.data):console.warn("three.webglrenderer: 0="==a||a)d|=r.COLOR_BUFFER_BIT;if(void" attempt="" to="" load="" unsupported="" compressed="" texture="" format="" in="" .setcubetexture()"):="" i.teximage2d(r.texture_cube_map_positive_x+h,p,l,m.width,m.height,0,l,n,m.data);else="" e?i.teximage2d(r.texture_cube_map_positive_x+h,0,l,f[h].width,f[h].height,0,l,n,f[h].data):i.teximage2d(r.texture_cube_map_positive_x+h,0,l,l,n,f[h]);a.generatemipmaps&&k&&r.generatemipmap(r.texture_cube_map);c.__version="a.version;if(a.onUpdate)a.onUpdate(a)}else" i.activetexture(r.texture0+b),i.bindtexture(r.texture_cube_map,c.__image__webgltexturecube)}function="" a(a,b){i.activetexture(r.texture0+b);i.bindtexture(r.texture_cube_map,="" w.get(a).__webgltexture)}function="" j(a,b,c){r.bindframebuffer(r.framebuffer,a);r.framebuffertexture2d(r.framebuffer,r.color_attachment0,c,w.get(b.texture).__webgltexture,0)}function="" f(a,b){r.bindrenderbuffer(r.renderbuffer,a);b.depthbuffer&&!b.stencilbuffer?(r.renderbufferstorage(r.renderbuffer,r.depth_component16,b.width,b.height),r.framebufferrenderbuffer(r.framebuffer,r.depth_attachment,r.renderbuffer,a)):b.depthbuffer&&b.stencilbuffer?(r.renderbufferstorage(r.renderbuffer,r.depth_stencil,b.width,="" b.height),r.framebufferrenderbuffer(r.framebuffer,r.depth_stencil_attachment,r.renderbuffer,a)):r.renderbufferstorage(r.renderbuffer,r.rgba4,b.width,b.height)}function="" c(a){return="" a="==THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?r.NEAREST:r.LINEAR}function" n(a){var="" b;if(a="==THREE.RepeatWrapping)return" r.repeat;if(a="==THREE.ClampToEdgeWrapping)return" r.clamp_to_edge;if(a="==THREE.MirroredRepeatWrapping)return" r.mirrored_repeat;if(a="==THREE.NearestFilter)return" r.nearest;="" if(a="==THREE.NearestMipMapNearestFilter)return" r.nearest_mipmap_nearest;if(a="==THREE.NearestMipMapLinearFilter)return" r.nearest_mipmap_linear;if(a="==THREE.LinearFilter)return" r.linear;if(a="==THREE.LinearMipMapNearestFilter)return" r.linear_mipmap_nearest;if(a="==THREE.LinearMipMapLinearFilter)return" r.linear_mipmap_linear;if(a="==THREE.UnsignedByteType)return" r.unsigned_byte;if(a="==THREE.UnsignedShort4444Type)return" r.unsigned_short_4_4_4_4;if(a="==THREE.UnsignedShort5551Type)return" r.unsigned_short_5_5_5_1;="" r.unsigned_short_5_6_5;if(a="==THREE.ByteType)return" r.byte;if(a="==THREE.ShortType)return" r.short;if(a="==THREE.UnsignedShortType)return" r.unsigned_short;if(a="==THREE.IntType)return" r.int;if(a="==THREE.UnsignedIntType)return" r.unsigned_int;if(a="==THREE.FloatType)return" r.float;b="S.get("OES_texture_half_float");if(null!==b&&a===THREE.HalfFloatType)return" b.half_float_oes;if(a="==THREE.AlphaFormat)return" r.alpha;if(a="==THREE.RGBFormat)return" r.rgb;if(a="==THREE.RGBAFormat)return" r.rgba;="" r.luminance;if(a="==THREE.LuminanceAlphaFormat)return" r.luminance_alpha;if(a="==THREE.AddEquation)return" r.func_add;if(a="==THREE.SubtractEquation)return" r.func_subtract;if(a="==THREE.ReverseSubtractEquation)return" r.func_reverse_subtract;if(a="==THREE.ZeroFactor)return" r.zero;if(a="==THREE.OneFactor)return" r.one;if(a="==THREE.SrcColorFactor)return" r.src_color;if(a="==THREE.OneMinusSrcColorFactor)return" r.one_minus_src_color;if(a="==THREE.SrcAlphaFactor)return" r.src_alpha;="" r.one_minus_src_alpha;if(a="==THREE.DstAlphaFactor)return" r.dst_alpha;if(a="==THREE.OneMinusDstAlphaFactor)return" r.one_minus_dst_alpha;if(a="==THREE.DstColorFactor)return" r.dst_color;if(a="==THREE.OneMinusDstColorFactor)return" r.one_minus_dst_color;if(a="==THREE.SrcAlphaSaturateFactor)return" r.src_alpha_saturate;b="S.get("WEBGL_compressed_texture_s3tc");if(null!==b){if(a===THREE.RGB_S3TC_DXT1_Format)return" b.compressed_rgb_s3tc_dxt1_ext;if(a="==THREE.RGBA_S3TC_DXT1_Format)return" b.compressed_rgba_s3tc_dxt1_ext;="" b.compressed_rgba_s3tc_dxt3_ext;if(a="==THREE.RGBA_S3TC_DXT5_Format)return" b.compressed_rgba_s3tc_dxt5_ext}b="S.get("WEBGL_compressed_texture_pvrtc");if(null!==b){if(a===THREE.RGB_PVRTC_4BPPV1_Format)return" b.compressed_rgb_pvrtc_4bppv1_img;if(a="==THREE.RGB_PVRTC_2BPPV1_Format)return" b.compressed_rgb_pvrtc_2bppv1_img;if(a="==THREE.RGBA_PVRTC_4BPPV1_Format)return" b.compressed_rgba_pvrtc_4bppv1_img;if(a="==THREE.RGBA_PVRTC_2BPPV1_Format)return" b.compressed_rgba_pvrtc_2bppv1_img}b="S.get("EXT_blend_minmax");if(null!==b){if(a===THREE.MinEquation)return" b.min_ext;if(a="==THREE.MaxEquation)return" b.max_ext}return="" 0}console.log("three.webglrenderer",three.revision);a="a||{};var" l="void" 0!="=a.canvas?a.canvas:document.createElement("canvas"),Q=void" !0,ia="void" three.color(0),x="0,da=[],ca=[],ga=-1,Z=[],fa=-1,ma=new" float32array(8),ea="[],ja=[];this.domElement=L;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.gammaFactor=2;this.gammaOutput=this.gammaInput=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;var" aa="this,Aa=null,za=null,ta=-1,sa="",ra=null,ya=0,na=0,oa=0,pa=L.width,qa=L.height," da="0,Ea=0,Ba=new" three.frustum,xa="new" three.matrix4,v="new" three.vector3,y="new" three.vector3,wa="!0,Ca={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},la={geometries:0,textures:0},ka={calls:0,vertices:0,faces:0,points:0};this.info={render:ka,memory:la,programs:null};" var="" r;try{o="{alpha:O,depth:T,stencil:H,antialias:R,premultipliedAlpha:G,preserveDrawingBuffer:ia};r=Q||L.getContext("webgl",O)||L.getContext("experimental-webgl",O);if(null===r){if(null!==L.getContext("webgl"))throw"Error" creating="" webgl="" context="" with="" your="" selected attributes.";throw"error="" context.";}l.addeventlistener("webglcontextlost",e,!1)}catch(fa){console.error("three.webglrenderer:="" "+fa)}var="" s="new" three.webglextensions(r);s.get("oes_texture_float");s.get("oes_texture_float_linear");="" s.get("oes_texture_half_float");s.get("oes_texture_half_float_linear");s.get("oes_standard_derivatives");s.get("angle_instanced_arrays");s.get("oes_element_index_uint")&&(three.buffergeometry.maxindex="4294967296);var" ha="new" three.webglcapabilities(r,s,a),i="new" three.webglstate(r,s,n),w="new" three.webglproperties,va="new" three.webglobjects(r,w,this.info),ua="new" three.webglprograms(this,ha);this.info.programs="ua.programs;var" ga="new" three.webglbufferrenderer(r,s,ka),ha="new" three.webglindexedbufferrenderer(r,="" s,ka);c();this.context="r;this.capabilities=ha;this.extensions=S;this.state=I;var" $="new" three.webglshadowmap(this,da,va);this.shadowmap="$;var" ia="new" three.spriteplugin(this,ea),ja="new" three.lensflareplugin(this,ja);this.getcontext="function(){return" r};this.getcontextattributes="function(){return" r.getcontextattributes()};this.forcecontextloss="function(){S.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){var" a;return="" function(){if(void="" a;var="" b="S.get("EXT_texture_filter_anisotropic");" return="" ha.precision};this.getpixelratio="function(){return" e};this.setpixelratio="function(a){void" function(a){a.x="na/E;a.y=oa/E;a.z=pa/E;a.w=qa/E};this.setScissor=function(a,b,c,d){r.scissor(a*E,b*E,c*E,d*E)};this.enableScissorTest=function(a){I.setScissorTest(a)};this.getClearColor=function(){return" u};this.setclearcolor="function(a,c){U.set(a);X=void" x};this.setclearalpha="function(a){X=a;b(U.r,U.g,U.b,X)};this.clear=function(a,b,c){var" d="0;if(void" c||c)d|="r.STENCIL_BUFFER_BIT;r.clear(d)};this.clearColor=function(){r.clear(r.COLOR_BUFFER_BIT)};this.clearDepth=function(){r.clear(r.DEPTH_BUFFER_BIT)};this.clearStencil=function(){r.clear(r.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=d;this.dispose=function(){L.removeEventListener("webglcontextlost",e,!1)};this.renderBufferImmediate=function(a,b,c){I.initAttributes();var" r.createbuffer());a.hasnormals&&!d.normal&&(d.normal="r.createBuffer());a.hasUvs&&!d.uv&&(d.uv=r.createBuffer());a.hasColors&&!d.color&&(d.color=r.createBuffer());b=b.getAttributes();a.hasPositions&&(r.bindBuffer(r.ARRAY_BUFFER,d.position),r.bufferData(r.ARRAY_BUFFER,a.positionArray,r.DYNAMIC_DRAW),I.enableAttribute(b.position),r.vertexAttribPointer(b.position,3,r.FLOAT,!1,0,0));if(a.hasNormals){r.bindBuffer(r.ARRAY_BUFFER,d.normal);if("MeshPhongMaterial"!==c.type&&c.shading===THREE.FlatShading)for(var" e="0,f=3*a.count;e<f;e+=9){var" g="a.normalArray,h=(g[e+0]+g[e+3]+g[e+6])/3,k=(g[e+1]+g[e+4]+g[e+7])/3,l=(g[e+2]+g[e+5]+g[e+8])/3;g[e+0]=h;g[e+1]=k;g[e+2]=l;g[e+3]=h;g[e+4]=k;g[e+5]=l;g[e+6]=h;g[e+7]=k;g[e+8]=l}r.bufferData(r.ARRAY_BUFFER,a.normalArray,r.DYNAMIC_DRAW);I.enableAttribute(b.normal);r.vertexAttribPointer(b.normal,3,r.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(r.bindBuffer(r.ARRAY_BUFFER,d.uv),r.bufferData(r.ARRAY_BUFFER,a.uvArray,r.DYNAMIC_DRAW),I.enableAttribute(b.uv),r.vertexAttribPointer(b.uv,2,r.FLOAT," !1,0,0));a.hascolors&&c.vertexcolors!="=THREE.NoColors&&(r.bindBuffer(r.ARRAY_BUFFER,d.color),r.bufferData(r.ARRAY_BUFFER,a.colorArray,r.DYNAMIC_DRAW),I.enableAttribute(b.color),r.vertexAttribPointer(b.color,3,r.FLOAT,!1,0,0));I.disableUnusedAttributes();r.drawArrays(r.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f,g){t(e);var" h="v(a,b,c,e,f),l=!1;a=d.id+"_"+h.id+"_"+e.wireframe;a!==sa&&(sa=a,l=!0);b=f.morphTargetInfluences;if(void" n="b[c];a.push([n,c])}a.sort(k);8<a.length&&(a.length=8);var" m="d.morphAttributes;c=0;for(l=a.length;c<l;c++)n=a[c],ma[c]=n[0],0!==n[0]?(b=n[1],!0===e.morphTargets&&m.position&&d.addAttribute("morphTarget"+c,m.position[b]),!0===e.morphNormals&&m.normal&&d.addAttribute("morphNormal"+c,m.normal[b])):(!0===e.morphTargets&&d.removeAttribute("morphTarget"+c),!0===e.morphNormals&&d.removeAttribute("morphNormal"+c));a=h.getUniforms();null!==a.morphTargetInfluences&&r.uniform1fv(a.morphTargetInfluences,ma);l=" !0}b="d.index;c=d.attributes.position;!0===e.wireframe&&(b=va.getWireframeAttribute(d));null!==b?(a=Ha,a.setIndex(b)):a=Ga;if(l){a:{var" 0,q;if(d="" instanceof="" three.instancedbuffergeometry&&(q="S.get("ANGLE_instanced_arrays"),null===q)){console.error("THREE.WebGLRenderer.setupVertexAttributes:" using="" three.instancedbuffergeometry="" but="" hardware="" does="" not="" support="" extension="" angle_instanced_arrays.");break="" a}void="" p;for(p="" h){var="" u="n[p];if(void" w="u.itemSize,x=va.getAttributeBuffer(u);if(u" three.interleavedbufferattribute){var="" f="u.data,D=F.stride,u=u.offset;F" three.instancedinterleavedbuffer?(i.enableattributeanddivisor(s,f.meshperattribute,q),void="" three.instancedbufferattribute?(i.enableattributeanddivisor(s,u.meshperattribute,q),void="" if(void="" 2:r.vertexattrib2fv(s,w);break;case="" 3:r.vertexattrib3fv(s,w);break;case="" 4:r.vertexattrib4fv(s,w);break;default:r.vertexattrib1fv(s,w)}}}i.disableunusedattributes()}null!="=b&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER," va.getattributebuffer(b))}q="Infinity;null!==b?q=b.count:void" three.mesh?(!0="==e.wireframe?(I.setLineWidth(e.wireframeLinewidth*E),a.setMode(r.LINES)):a.setMode(r.TRIANGLES),d" three.instancedbuffergeometry&&0<d.maxinstancedcount?a.renderinstances(d):a.render(g,q)):f="" three.line?(d="e.linewidth,void" d&&(d="1),I.setLineWidth(d*E),f" three.linesegments?a.setmode(r.lines):a.setmode(r.line_strip),a.render(g,q)):f="" three.points&&(a.setmode(r.points),a.render(g,q))};this.render="function(a,b,c,d){if(!1===b" three.camera)console.error("three.webglrenderer.render:="" camera="" is="" an="" instance="" of="" three.camera.");else{var="" xa.multiplymatrices(b.projectionmatrix,b.matrixworldinverse);ba.setfrommatrix(xa);da.length="0;fa=ga=-1;ea.length=0;ja.length=0;q(a,b);ca.length=ga+1;Z.length=fa+1;!0===aa.sortObjects&&(ca.sort(m),Z.sort(p));$.render(a);ka.calls=0;ka.vertices=0;ka.faces=0;ka.points=0;this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);a.overrideMaterial?(d=a.overrideMaterial,s(ca,b,da,e,d),s(Z,b,da,e,d)):(I.setBlending(THREE.NoBlending),s(ca,b,da,e)," s(z,b,da,e));ia.render(a,b);ja.render(a,b,da,ea);c&&(a="c.texture,b=y(c),a.generateMipmaps&&b&&a.minFilter!==THREE.NearestFilter&&a.minFilter!==THREE.LinearFilter&&(a=c" three.webglrendertargetcube?r.texture_cube_map:r.texture_2d,c="W.get(c.texture).__webglTexture,I.bindTexture(a,c),r.generateMipmap(a),I.bindTexture(a,null)));I.setDepthTest(!0);I.setDepthWrite(!0);I.setColorWrite(!0)}};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?I.disable(r.CULL_FACE):(b===THREE.FrontFaceDirectionCW?" r.frontface(r.cw):r.frontface(r.ccw),a="==THREE.CullFaceBack?r.cullFace(r.BACK):a===THREE.CullFaceFront?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK),I.enable(r.CULL_FACE))};this.setTexture=function(a,b){var" c="W.get(a);if(0<a.version&&c.__version!==a.version){var" marked="" for="" update="" image="" undefined",a);else="" if(!1="==d.complete)console.warn("THREE.WebGLRenderer:" incomplete",a);else{void="" c.__webglinit&&(c.__webglinit="!0,a.addEventListener("dispose",g),c.__webglTexture=r.createTexture(),la.textures++);I.activeTexture(r.TEXTURE0+b);I.bindTexture(r.TEXTURE_2D,c.__webglTexture);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,a.flipY);r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);r.pixelStorei(r.UNPACK_ALIGNMENT,a.unpackAlignment);a.image=B(a.image,ha.maxTextureSize);if((a.wrapS!==THREE.ClampToEdgeWrapping||a.wrapT!==THREE.ClampToEdgeWrapping||a.minFilter!==THREE.NearestFilter&&" a.minfilter!="=THREE.LinearFilter)&&!1===y(a.image)){d=a.image;if(d" htmlimageelement||d="" htmlcanvaselement){var="" power="" two="" ("+d.width+"x"+d.height+").="" resized="" "+e.width+"x"+e.height,d);d="e}a.image=d}var" x(r.texture_2d,a,d);var="" k="a.mipmaps;if(a" three.datatexture)if(0<k.length&&d){for(var="" i.teximage2d(r.texture_2d,0,e,f.width,f.height,0,e,h,f.data);else="" three.compressedtexture)for(l="0,n=k.length;l<n;l++)f=k[l],a.format!==THREE.RGBAFormat&&a.format!==THREE.RGBFormat?-1<I.getCompressedTextureFormats().indexOf(e)?I.compressedTexImage2D(r.TEXTURE_2D,l,e,f.width," f.height,0,f.data):console.warn("three.webglrenderer:="" .uploadtexture()"):i.teximage2d(r.texture_2d,l,e,f.width,f.height,0,e,h,f.data);else="" if(0<k.length&&d){l="0;for(n=k.length;l<n;l++)f=k[l],I.texImage2D(r.TEXTURE_2D,l,e,e,h,f);a.generateMipmaps=!1}else" i.teximage2d(r.texture_2d,0,e,e,h,a.image);a.generatemipmaps&&d&&r.generatemipmap(r.texture_2d);c.__version="a.version;if(a.onUpdate)a.onUpdate(a)}}else" i.activetexture(r.texture0+b),i.bindtexture(r.texture_2d,="" c.__webgltexture)};this.setrendertarget="function(a){var" three.webglrendertargetcube;if(a&&void="" x(r.texture_cube_map,a.texture,e);for(d="0;6">d;d++)c.__webglFramebuffer[d]=r.createFramebuffer(),c.__webglRenderbuffer[d]=r.createRenderbuffer(),I.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,g,a.width,a.height,0,g,h,null),J(c.__webglFramebuffer[d],a,r.TEXTURE_CUBE_MAP_POSITIVE_X+d),F(c.__webglRenderbuffer[d],a);a.texture.generateMipmaps&&e&&r.generateMipmap(r.TEXTURE_CUBE_MAP)}else c.__webglFramebuffer=r.createFramebuffer(),c.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:
r.createRenderbuffer(),I.bindTexture(r.TEXTURE_2D,d.__webglTexture),x(r.TEXTURE_2D,a.texture,e),I.texImage2D(r.TEXTURE_2D,0,g,a.width,a.height,0,g,h,null),J(c.__webglFramebuffer,a,r.TEXTURE_2D),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,c.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,c.__webglRenderbuffer):F(c.__webglRenderbuffer,
a),a.texture.generateMipmaps&&e&&r.generateMipmap(r.TEXTURE_2D);b?I.bindTexture(r.TEXTURE_CUBE_MAP,null):I.bindTexture(r.TEXTURE_2D,null);r.bindRenderbuffer(r.RENDERBUFFER,null);r.bindFramebuffer(r.FRAMEBUFFER,null)}a?(c=W.get(a),d=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,c=a.width,e=a.height,h=g=0):(d=null,c=pa,e=qa,g=na,h=oa);d!==za&&(r.bindFramebuffer(r.FRAMEBUFFER,d),r.viewport(g,h,c,e),za=d);b&&(d=W.get(a.texture),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,
r.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,d.__webglTexture,0));Da=c;Ea=e};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(!1===a instanceof THREE.WebGLRenderTarget)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var g=W.get(a).__webglFramebuffer;if(g){var h=!1;g!==za&&(r.bindFramebuffer(r.FRAMEBUFFER,g),h=!0);try{var k=a.texture;k.format!==THREE.RGBAFormat&&N(k.format)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):
k.type===THREE.UnsignedByteType||N(k.type)===r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)||k.type===THREE.FloatType&&S.get("WEBGL_color_buffer_float")||k.type===THREE.HalfFloatType&&S.get("EXT_color_buffer_half_float")?r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE?r.readPixels(b,c,d,e,N(k.format),N(k.type),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{h&&
r.bindFramebuffer(r.FRAMEBUFFER,za)}}}};this.supportsFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return S.get("OES_texture_float")};this.supportsHalfFloatTextures=function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return S.get("OES_texture_half_float")};this.supportsStandardDerivatives=function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");
return S.get("OES_standard_derivatives")};this.supportsCompressedTextureS3TC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return S.get("WEBGL_compressed_texture_s3tc")};this.supportsCompressedTexturePVRTC=function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return S.get("WEBGL_compressed_texture_pvrtc")};this.supportsBlendMinMax=
function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return S.get("EXT_blend_minmax")};this.supportsVertexTextures=function(){return ha.vertexTextures};this.supportsInstancedArrays=function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return S.get("ANGLE_instanced_arrays")};this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};
this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Object.defineProperties(this,{shadowMapEnabled:{get:function(){return $.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");$.enabled=a}},
shadowMapType:{get:function(){return $.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");$.type=a}},shadowMapCullFace:{get:function(){return $.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");$.cullFace=a}},shadowMapDebug:{get:function(){return $.debug},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.");$.debug=a}}})};
THREE.WebGLRenderTarget=function(a,b,c){this.uuid=THREE.Math.generateUUID();this.width=a;this.height=b;c=c||{};void 0===c.minFilter&&(c.minFilter=THREE.LinearFilter);this.texture=new THREE.Texture(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.shareDepthFrom=void 0!==c.shareDepthFrom?c.shareDepthFrom:null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,get wrapS(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set wrapS(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a},get wrapT(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set wrapT(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a},
get magFilter(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set magFilter(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a},get minFilter(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set minFilter(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a},get anisotropy(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return this.texture.anisotropy},set anisotropy(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a},get offset(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set offset(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a},get repeat(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set repeat(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");
this.texture.repeat=a},get format(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set format(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a},get type(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set type(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a},get generateMipmaps(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");
return this.texture.generateMipmaps},set generateMipmaps(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a},setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose()},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.shareDepthFrom=
a.shareDepthFrom;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube;
THREE.WebGLBufferRenderer=function(a,b,c){var d;this.setMode=function(a){d=a};this.render=function(b,g){a.drawArrays(d,b,g);c.calls++;c.vertices+=g;d===a.TRIANGLES&&(c.faces+=g/3)};this.renderInstances=function(a){var c=b.get("ANGLE_instanced_arrays");if(null===c)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var f=a.attributes.position;f instanceof THREE.InterleavedBufferAttribute?c.drawArraysInstancedANGLE(d,
0,f.data.count,a.maxInstancedCount):c.drawArraysInstancedANGLE(d,0,f.count,a.maxInstancedCount)}}};
THREE.WebGLIndexedBufferRenderer=function(a,b,c){var d,e,g;this.setMode=function(a){d=a};this.setIndex=function(c){c.array instanceof Uint32Array&&b.get("OES_element_index_uint")?(e=a.UNSIGNED_INT,g=4):(e=a.UNSIGNED_SHORT,g=2)};this.render=function(b,h){a.drawElements(d,h,e,b*g);c.calls++;c.vertices+=h;d===a.TRIANGLES&&(c.faces+=h/3)};this.renderInstances=function(a){var c=b.get("ANGLE_instanced_arrays");null===c?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
c.drawElementsInstancedANGLE(d,a.index.array.length,e,0,a.maxInstancedCount)}};
THREE.WebGLExtensions=function(a){var b={};this.get=function(c){if(void 0!==b[c])return b[c];var d;switch(c){case "EXT_texture_filter_anisotropic":d=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
break;case "WEBGL_compressed_texture_pvrtc":d=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported.");return b[c]=d}};
THREE.WebGLCapabilities=function(a,b,c){function d(b){if("highp"===b){if(0<a.getshaderprecisionformat(a.vertex_shader,a.high_float).precision&&0<a.getshaderprecisionformat(a.fragment_shader,a.high_float).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getshaderprecisionformat(a.vertex_shader,a.medium_float).precision&&0<a.getshaderprecisionformat(a.fragment_shader,a.medium_float).precision?"mediump":"lowp"}this.getmaxprecision=d;this.precision=void 0="==b._bufferGeometry&&(b._bufferGeometry=(new" 0!="=c.precision?c.precision:"highp";" this.logarithmicdepthbuffer="void" this.maxfragmentuniforms="a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!b.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;c=d(this.precision);c!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not" supported,="" using",c,"instead."),this.precision="c);this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!b.get("EXT_frag_depth"))};" three.webglgeometries="function(a,b,c){function" d(a){a="a.target;var" h="g[a.id].attributes,l;for(l" in="" h)e(h[l]);a.removeeventlistener("dispose",d);delete="" g[a.id];l="b.get(a);l.wireframe&&e(l.wireframe);c.memory.geometries--}function" e(c){var="" d;d="c" instanceof="" three.interleavedbufferattribute?b.get(c.data).__webglbuffer:b.get(c).__webglbuffer;void="" three.interleavedbufferattribute?b.delete(c.data):b.delete(c))}var="" g="{};this.get=function(a){var" b="a.geometry;if(void" g[b.id])return="" g[b.id];b.addeventlistener("dispose",d);var="" e;b="" three.buffergeometry?e="b:b" three.geometry&&(void="" three.buffergeometry).setfromobject(a)),e="b._bufferGeometry);g[b.id]=e;c.memory.geometries++;return" e}};="" three.webglobjects="function(a,b,c){function" d(c,d){var="" e="c" three.interleavedbufferattribute?c.data:c,g="b.get(e);void" dynamic="" three.bufferattribute="" marked="" as="" needsupdate="" but="" updaterange.count="" is="" 0,="" ensure="" you="" are="" using="" set="" methods="" or="" updating="" manually."):="" (a.buffersubdata(d,e.updaterange.offset*e.array.bytes_per_element,e.array.subarray(e.updaterange.offset,e.updaterange.offset+e.updaterange.count)),e.updaterange.count="0),g.version=e.version)}function" e(a,b,c){if(b="">c){var d=b;b=c;c=d}d=a[b];return void 0===d?(a[b]=[c],!0):-1===d.indexOf(c)?(d.push(c),!0):!1}var g=new THREE.WebGLGeometries(a,b,c);this.getAttributeBuffer=function(a){return a instanceof THREE.InterleavedBufferAttribute?b.get(a.data).__webglBuffer:b.get(a).__webglBuffer};this.getWireframeAttribute=
function(c){var g=b.get(c);if(void 0!==g.wireframe)return g.wireframe;var l=[],k=c.index,m=c.attributes;c=m.position;if(null!==k)for(var m={},k=k.array,p=0,n=k.length;p<n;p+=3){var 0="==w){for(var" 1="" 2="" q="k[p+0],s=k[p+1],t=k[p+2];e(m,q,s)&&l.push(q,s);e(m,s,t)&&l.push(s,t);e(m,t,q)&&l.push(t,q)}else" for(k="m.position.array,p=0,n=k.length/3-1;p<n;p+=3)q=p+0,s=p+1,t=p+2,l.push(q,s,s,t,t,q);l=new" three.bufferattribute(new="" (65535<c.count?uint32array:uint16array)(l),1);d(l,a.element_array_buffer);return="" g.wireframe="l};this.update=" function(b){var="" c="g.get(b);b.geometry" instanceof="" three.geometry&&c.updatefromobject(b);b="c.index;var" e="c.attributes;null!==b&&d(b,a.ELEMENT_ARRAY_BUFFER);for(var" k="" in="" e)d(e[k],a.array_buffer);b="c.morphAttributes;for(k" b)for(var="" c}};="" three.webglprogram="function(){function" a(a){var="" b="[],c;for(c" a){var="" f="a[c];!1!==f&&b.push("#define" "+c+"="" "+f)}return="" b.join("\n")}function="" b(a){return""!="=a}var" function(d,e,g,f){var="" h="d.context,l=g.defines,k=g.__webglShader.vertexShader,m=g.__webglShader.fragmentShader,p="SHADOWMAP_TYPE_BASIC";f.shadowMapType===THREE.PCFShadowMap?p="SHADOWMAP_TYPE_PCF":f.shadowMapType===THREE.PCFSoftShadowMap&&(p="SHADOWMAP_TYPE_PCF_SOFT");var" n="ENVMAP_TYPE_CUBE" ,q="ENVMAP_MODE_REFLECTION" ,s="ENVMAP_BLENDING_MULTIPLY" ;="" if(f.envmap){switch(g.envmap.mapping){case="" three.cubereflectionmapping:case="" three.cuberefractionmapping:n="ENVMAP_TYPE_CUBE" ;break;case="" three.equirectangularreflectionmapping:case="" three.equirectangularrefractionmapping:n="ENVMAP_TYPE_EQUIREC" three.sphericalreflectionmapping:n="ENVMAP_TYPE_SPHERE" }switch(g.envmap.mapping){case="" three.cuberefractionmapping:case="" three.equirectangularrefractionmapping:q="ENVMAP_MODE_REFRACTION" }switch(g.combine){case="" three.multiplyoperation:s="ENVMAP_BLENDING_MULTIPLY" break;case="" three.mixoperation:s="ENVMAP_BLENDING_MIX" three.addoperation:s="ENVMAP_BLENDING_ADD" }}var="" t="0<d.gammaFactor?d.gammaFactor:1,v=a(l),u=h.createProgram();g" three.rawshadermaterial?d="l="":(l=["precision" "+f.precision+"="" float;","precision="" int;","#define="" shader_name="" "+g.__webglshader.name,v,f.supportsvertextextures?"#define="" vertex_textures":"",d.gammainput?"#define="" gamma_input":"",d.gammaoutput?"#define="" gamma_output":"","#define="" gamma_factor="" "+t,"#define="" max_dir_lights="" "+="" f.maxdirlights,"#define="" max_point_lights="" "+f.maxpointlights,"#define="" max_spot_lights="" "+f.maxspotlights,"#define="" max_hemi_lights="" "+f.maxhemilights,"#define="" max_shadows="" "+f.maxshadows,"#define="" max_bones="" "+f.maxbones,f.map?"#define="" use_map":"",f.envmap?"#define="" use_envmap":"",f.envmap?"#define="" "+q:"",f.lightmap?"#define="" use_lightmap":"",f.aomap?"#define="" use_aomap":"",f.emissivemap?"#define="" use_emissivemap":"",f.bumpmap?"#define="" use_bumpmap":"",f.normalmap?"#define="" use_normalmap":"",f.displacementmap&&="" f.supportsvertextextures?"#define="" use_displacementmap":"",f.specularmap?"#define="" use_specularmap":"",f.alphamap?"#define="" use_alphamap":"",f.vertexcolors?"#define="" use_color":"",f.flatshading?"#define="" flat_shaded":"",f.skinning?"#define="" use_skinning":"",f.usevertextexture?"#define="" bone_texture":"",f.morphtargets?"#define="" use_morphtargets":"",f.morphnormals&&!1="==f.flatShading?"#define" use_morphnormals":"",f.doublesided?"#define="" double_sided":"",f.flipsided?"#define="" flip_sided":"",f.shadowmapenabled?="" "#define="" use_shadowmap":"",f.shadowmapenabled?"#define="" "+p:"",f.shadowmapdebug?"#define="" shadowmap_debug":"",0<f.pointlightshadows?"#define="" point_light_shadows":"",f.sizeattenuation?"#define="" use_sizeattenuation":"",f.logarithmicdepthbuffer?"#define="" use_logdepthbuf":"",f.logarithmicdepthbuffer&&d.extensions.get("ext_frag_depth")?"#define="" use_logdepthbuf_ext":"","uniform="" mat4="" modelmatrix;","uniform="" modelviewmatrix;","uniform="" projectionmatrix;","uniform="" viewmatrix;","uniform="" mat3="" normalmatrix;",="" "uniform="" vec3="" cameraposition;","attribute="" position;","attribute="" normal;","attribute="" vec2="" uv;","#ifdef="" use_color","\tattribute="" color;","#endif","#ifdef="" use_morphtargets","\tattribute="" morphtarget0;","\tattribute="" morphtarget1;","\tattribute="" morphtarget2;","\tattribute="" morphtarget3;","\t#ifdef="" use_morphnormals","\t\tattribute="" morphnormal0;","\t\tattribute="" morphnormal1;","\t\tattribute="" morphnormal2;","\t\tattribute="" morphnormal3;","\t#else","\t\tattribute="" morphtarget4;",="" "\t\tattribute="" morphtarget5;","\t\tattribute="" morphtarget6;","\t\tattribute="" morphtarget7;","\t#endif","#endif","#ifdef="" use_skinning","\tattribute="" vec4="" skinindex;","\tattribute="" skinweight;","#endif","\n"].filter(b).join("\n"),d="[f.bumpMap||f.normalMap||f.flatShading||g.derivatives?"#extension" gl_oes_standard_derivatives="" :="" enable":"",f.logarithmicdepthbuffer&&d.extensions.get("ext_frag_depth")?"#extension="" gl_ext_frag_depth="" enable":"","precision="" f.precision+"="" "+g.__webglshader.name,v,"#define="" "+f.maxdirlights,"#define="" "+f.maxshadows,f.alphatest?"#define="" alphatest="" "+f.alphatest:"",d.gammainput?"#define="" "+t,f.usefog&&f.fog?"#define="" use_fog":"",f.usefog&&f.fogexp?"#define="" fog_exp2":="" "",f.map?"#define="" "+n:"",f.envmap?"#define="" "+q:"",f.envmap?"#define="" "+s:"",f.lightmap?"#define="" use_normalmap":"",f.specularmap?"#define="" flat_shaded":"",f.metal?"#define="" metal":="" "",f.doublesided?"#define="" flip_sided":"",f.shadowmapenabled?"#define="" point_light_shadows":"",f.logarithmicdepthbuffer?"#define="" cameraposition;","\n"].filter(b).join("\n"));m="d+m;" 0!="=g.index0AttributeName?h.bindAttribLocation(u,0,g.index0AttributeName):!0===f.morphTargets&&h.bindAttribLocation(u,0,"position");h.linkProgram(u);f=h.getProgramInfoLog(u);p=h.getShaderInfoLog(k);n=h.getShaderInfoLog(m);s=q=!0;if(!1===h.getProgramParameter(u,h.LINK_STATUS))q=!1,console.error("THREE.WebGLProgram:" shader="" error:="" ",h.geterror(),"gl.validate_status",h.getprogramparameter(u,="" h.validate_status),"gl.getprograminfolog",f,p,n);else="" if(""!="=f)console.warn("THREE.WebGLProgram:" gl.getprograminfolog()",f);else="" if(""="==p||""===n)s=!1;s&&(this.diagnostics={runnable:q,material:g,programLog:f,vertexShader:{log:p,prefix:l},fragmentShader:{log:n,prefix:d}});h.deleteShader(k);h.deleteShader(m);var" w;this.getuniforms="function(){if(void" a="{},b=h.getProgramParameter(u,h.ACTIVE_UNIFORMS),c=0;c<b;c++){var" d="h.getActiveUniform(u,c).name,e=h.getUniformLocation(u,d),f=d.lastIndexOf("[0]");" -1!="=f&&f===d.length-3&&(a[d.substr(0,f)]=e);a[d]=e}w=a}return" w};var="" d;this.getattributes="function(){if(void" d};this.destroy="function(){h.deleteProgram(u);this.program=void" 0};object.defineproperties(this,{uniforms:{get:function(){console.warn("three.webglprogram:="" .uniforms="" is="" now="" .getuniforms().");return="" this.getuniforms()}},attributes:{get:function(){console.warn("three.webglprogram:="" .attributes="" .getattributes().");="" return="" this.getattributes()}}});this.id="c++;this.code=e;this.usedTimes=1;this.program=u;this.vertexShader=k;this.fragmentShader=m;return" this}}();="" three.webglprograms="function(a,b){var" supportsvertextextures="" map="" envmap="" envmapmode="" lightmap="" aomap="" emissivemap="" bumpmap="" normalmap="" displacementmap="" specularmap="" alphamap="" combine="" vertexcolors="" fog="" usefog="" fogexp="" flatshading="" sizeattenuation="" logarithmicdepthbuffer="" skinning="" maxbones="" usevertextexture="" morphtargets="" morphnormals="" maxmorphtargets="" maxmorphnormals="" maxdirlights="" maxpointlights="" maxspotlights="" maxhemilights="" maxshadows="" shadowmapenabled="" pointlightshadows="" shadowmaptype="" shadowmapdebug="" metal="" doublesided="" flipsided".split("="" ");this.getparameters="function(c,e,h,l){var" k,m,p,n,q,s="d[c.type];k=q=n=p=m=0;for(var" v="e[k];!1!==v.visible&&(v" three.directionallight&&m++,v="" three.pointlight&&p++,v="" three.spotlight&&n++,v="" three.hemispherelight&&q++)}for(var="" w="e[v];w.castShadow&&((w" three.spotlight||w="" three.directionallight)&&t++,w="" three.pointlight&&(t++,k++))}e="t;b.floatVertexTextures&&l&&l.skeleton&&l.skeleton.useVertexTexture?" three.skinnedmesh&&(t="Math.min(l.skeleton.bones.length,t),t<l.skeleton.bones.length&&console.warn("WebGLRenderer:" too="" many="" bones="" -="" "+l.skeleton.bones.length+",="" this="" gpu="" supports="" just="" "+t+"="" (try="" opengl="" instead="" of="" angle)")));v="a.getPrecision();null!==c.precision&&(v=b.getMaxPrecision(c.precision),v!==c.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",c.precision,"not" supported,="" using",v,"instead."));return{shaderid:s,="" precision:v,supportsvertextextures:b.vertextextures,map:!!c.map,envmap:!!c.envmap,envmapmode:c.envmap&&c.envmap.mapping,lightmap:!!c.lightmap,aomap:!!c.aomap,emissivemap:!!c.emissivemap,bumpmap:!!c.bumpmap,normalmap:!!c.normalmap,displacementmap:!!c.displacementmap,specularmap:!!c.specularmap,alphamap:!!c.alphamap,combine:c.combine,vertexcolors:c.vertexcolors,fog:h,usefog:c.fog,fogexp:h="" three.fogexp2,flatshading:c.shading="==THREE.FlatShading,sizeAttenuation:c.sizeAttenuation,logarithmicDepthBuffer:b.logarithmicDepthBuffer," skinning:c.skinning,maxbones:t,usevertextexture:b.floatvertextextures&&l&&l.skeleton&&l.skeleton.usevertextexture,morphtargets:c.morphtargets,morphnormals:c.morphnormals,maxmorphtargets:a.maxmorphtargets,maxmorphnormals:a.maxmorphnormals,maxdirlights:m,maxpointlights:p,maxspotlights:n,maxhemilights:q,maxshadows:e,pointlightshadows:k,shadowmapenabled:a.shadowmap.enabled&&l.receiveshadow&&0<e,shadowmaptype:a.shadowmap.type,shadowmapdebug:a.shadowmap.debug,alphatest:c.alphatest,metal:c.metal,doublesided:c.side="==" three.doubleside,flipsided:c.side="==THREE.BackSide}};this.getProgramCode=function(a,b){var" a.defines)c.push(d),c.push(a.defines[d]);for(d="0;d<e.length;d++){var" c.join()};this.acquireprogram="function(b,d,e){for(var" l,k="0,m=c.length;k<m;k++){var" p="c[k];if(p.code===e){l=p;++l.usedTimes;break}}void" three.webglprogram(a,e,b,d),c.push(l));="" l};this.releaseprogram="function(a){if(0===--a.usedTimes){var" c};this.delete="function(b){delete" a[b.uuid]};this.clear="function(){a={}}};" three.webglshader="function(){function" a(a){a="a.split("\n");for(var" "+a[c];return="" a.join("\n")}return="" function(b,c,d){var="" couldn't="" compile.");""!="=b.getShaderInfoLog(e)&&console.warn("THREE.WebGLShader:" gl.getshaderinfolog()",c="==b.VERTEX_SHADER?"vertex":"fragment",b.getShaderInfoLog(e),a(d));return" e}}();="" three.webglshadowmap="function(a,b,c){function" d(a,b,c,d){var="" three.skinnedmesh&&b.skinning,g="0,void" f}function="" e(a,b){if(!1!="=a.visible){(a" three.mesh||a="" three.line||a="" three.points)&&a.castshadow&&(!1="==a.frustumCulled||!0===h.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,a.matrixWorld),p.push(a));for(var" g="a.context,f=a.state,h=new" three.frustum,l="new" three.matrix4;new="" three.vector3;new="" three.vector3;for(var="" three.vector3,m="new" three.vector3,p="[],n=Array(4),q=Array(4),s=[new" three.vector3(1,0,0),new="" three.vector3(-1,="" 0,0),new="" three.vector3(0,0,1),new="" three.vector3(0,0,-1),new="" three.vector3(0,1,0),new="" three.vector3(0,-1,0)],t="[new" three.vector3(0,0,-1)],v="[new" three.vector4,new="" three.vector4],u="new" three.vector4,w="THREE.ShaderLib.depthRGBA,D=THREE.UniformsUtils.clone(w.uniforms),x=THREE.ShaderLib.distanceRGBA,B=THREE.UniformsUtils.clone(x.uniforms)," y="0;4!==y;++y){var" z="0!==(y&1),A=0!==(y&2),J=new" three.shadermaterial({uniforms:d,vertexshader:w.vertexshader,fragmentshader:w.fragmentshader,morphtargets:z,skinning:a});j._shadowpass="!0;n[y]=J;z=new" three.shadermaterial({uniforms:b,vertexshader:x.vertexshader,fragmentshader:x.fragmentshader,morphtargets:z,skinning:a});z._shadowpass="!0;q[y]=z}var" q,="" w;if(!1!="=F.enabled&&(!1!==F.autoUpdate||!1!==F.needsUpdate)){g.clearColor(1,1,1,1);f.disable(g.BLEND);f.enable(g.CULL_FACE);g.frontFace(g.CCW);g.cullFace(F.cullFace===THREE.CullFaceFront?g.FRONT:g.BACK);f.setDepthTest(!0);a.getViewport(u);for(var" x="0,D=b.length;x<D;x++){var" three.pointlight){q="6;w=!0;var" v[5].set(h,0,h,j)}else="" three.webglrendertarget(a.x,a.y,{minfilter:h,magfilter:h,format:three.rgbaformat}),z.matrix="new" three.matrix4,y="" three.spotlight&&(b.aspect="A.x/A.y),B.updateProjectionMatrix());A=z.map;z=z.matrix;m.setFromMatrixPosition(y.matrixWorld);B.position.copy(m);a.setRenderTarget(A);a.clear();for(A=0;A<q;A++)for(w?(k.copy(B.position),k.add(s[A]),B.up.copy(t[A]),B.lookAt(k)," three.meshfacematerial)for(var="" da="0,ca=X.length;da<ca;da++){var" ga="X[da],Z=U[ga.materialIndex];!0===Z.visible&&(Z=d(G,Z,w,m),a.renderBufferDirect(B,b,null,ia,Z,G,ga))}else" three.webglstate="function(a,b,c){var" uint8array(16),g="new" uint8array(16),f="new" uint8array(16),h="{},l=null,k=null,m=null,p=null,n=null,q=null,s=null,t=null,v=null,u=null,w=null,D=null,x=null,B=null,y=null,z=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),A=void" 0,j="{};this.init=function(){a.clearColor(0,0,0,1);a.clearDepth(1);a.clearStencil(0);this.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.frontFace(a.CCW);a.cullFace(a.BACK);this.enable(a.CULL_FACE);this.enable(a.BLEND);a.blendEquation(a.FUNC_ADD);" a.blendfunc(a.src_alpha,a.one_minus_src_alpha)};this.initattributes="function(){for(var" c;b++)g[b]!="=e[b]&&(a.disableVertexAttribArray(b),g[b]=0)};this.enable=function(b){!0!==h[b]&&(a.enable(b),h[b]=!0)};this.disable=function(b){!1!==h[b]&&(a.disable(b),h[b]=!1)};this.getCompressedTextureFormats=function(){if(null===l&&(l=[],b.get("WEBGL_compressed_texture_pvrtc")||b.get("WEBGL_compressed_texture_s3tc")))for(var" l};this.setblending="function(b,d,e,f,g,h,l){b!==k&&(b===THREE.NoBlending?this.disable(a.BLEND):" a.one,a.one_minus_src_alpha)),k="b);if(b===THREE.CustomBlending){g=g||d;h=h||e;l=l||f;if(d!==m||g!==q)a.blendEquationSeparate(c(d),c(g)),m=d,q=g;if(e!==p||f!==n||h!==s||l!==t)a.blendFuncSeparate(c(e),c(f),c(h),c(l)),p=e,n=f,s=h,t=l}else" three.neverdepth:a.depthfunc(a.never);break;case="" three.alwaysdepth:a.depthfunc(a.always);break;case="" three.lessdepth:a.depthfunc(a.less);break;case="" three.lessequaldepth:a.depthfunc(a.lequal);="" three.equaldepth:a.depthfunc(a.equal);break;case="" three.greaterequaldepth:a.depthfunc(a.gequal);break;case="" three.greaterdepth:a.depthfunc(a.greater);break;case="" three.notequaldepth:a.depthfunc(a.notequal);break;default:a.depthfunc(a.lequal)}else="" a.depthfunc(a.lequal);v="b}};this.setDepthTest=function(b){b?this.enable(a.DEPTH_TEST):this.disable(a.DEPTH_TEST)};this.setDepthWrite=function(b){u!==b&&(a.depthMask(b),u=b)};this.setColorWrite=function(b){w!==b&&(a.colorMask(b,b,b,b),w=b)};this.setFlipSided=" function(b){d!="=b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),D=b)};this.setLineWidth=function(b){b!==x&&(a.lineWidth(b),x=b)};this.setPolygonOffset=function(b,c,d){b?this.enable(a.POLYGON_OFFSET_FILL):this.disable(a.POLYGON_OFFSET_FILL);!b||B===c&&y===d||(a.polygonOffset(c,d),B=c,y=d)};this.setScissorTest=function(b){b?this.enable(a.SCISSOR_TEST):this.disable(a.SCISSOR_TEST)};this.activeTexture=function(b){void" a&&d.activetexture();var="" 0,texture:void="" 0},j[a]="e);if(e.type!==b||e.texture!==c)a.bindTexture(b,c),e.type=b,e.texture=c};this.compressedTexImage2D=function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.texImage2D=function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}};this.reset=function(){for(var" three.lensflareplugin="function(a,b){var" c,d,e,g,f,h,l,k,m,p,n="a.context,q=a.state,s,t,v,u,w,D;this.render=function(x,B,y,z){if(0!==b.length){x=new" three.vector3;var="" three.vector2(c*a,c),l="new" three.vector3(1,1,0),q="new" three.vector2(1,1);if(void="" float32array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),m="new" uint16array([0,1,2,0,2,3]);s="n.createBuffer();t=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,s);n.bufferData(n.ARRAY_BUFFER,C,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER," t);n.bufferdata(n.element_array_buffer,m,n.static_draw);w="n.createTexture();D=n.createTexture();q.bindTexture(n.TEXTURE_2D,w);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);q.bindTexture(n.TEXTURE_2D,D);n.texImage2D(n.TEXTURE_2D,0," n.rgba,16,16,0,n.rgba,n.unsigned_byte,null);n.texparameteri(n.texture_2d,n.texture_wrap_s,n.clamp_to_edge);n.texparameteri(n.texture_2d,n.texture_wrap_t,n.clamp_to_edge);n.texparameteri(n.texture_2d,n.texture_mag_filter,n.nearest);n.texparameteri(n.texture_2d,n.texture_min_filter,n.nearest);var="" lowp="" int="" rendertype;\nuniform="" screenposition;\nuniform="" scale;\nuniform="" float="" rotation;\nuniform="" sampler2d="" occlusionmap;\nattribute="" position;\nattribute="" uv;\nvarying="" vuv;\nvarying="" vvisibility;\nvoid="" main()="" {\nvuv="uv;\nvec2" pos="position;\nif" (="" rendertype="=" )="" {\nvec4="" visibility="texture2D(" occlusionmap,="" vec2(="" 0.1,="" 0.1="" );\nvisibility="" +="texture2D(" 0.5,="" 0.9,="" 0.5="" 0.9="" );\nvvisibility="visibility.r" 9.0;\nvvisibility="" *="1.0" visibility.g="" visibility.a="" 9.0;\npos.x="cos(" rotation="" position.x="" sin(="" position.y;\npos.y="sin(" cos(="" position.y;\n}\ngl_position="vec4(" scale="" screenposition.xy="" ).xy,="" screenposition.z,="" 1.0="" );\n}",="" fragmentshader:"uniform="" map;\nuniform="" opacity;\nuniform="" color;\nvarying="" {\nif="" {\ngl_fragcolor="vec4(" 1.0,="" 0.0,="" 0.0="" );\n}="" else="" if="" map,="" vuv="" texture="texture2D(" );\ntexture.a="" vvisibility;\ngl_fragcolor="texture;\ngl_FragColor.rgb" rotation;\nattribute="" vuv;\nvoid="" {\npos.x="cos(" fragmentshader:"precision="" mediump="" float;\nuniform="" occlusionmap;\nuniform="" texture2d(="" ).rgb,="" {\nfloat="" ).a;\nvisibility="" 4.0="" );\nvec4="" visibility;\ngl_fragcolor="texture;\ngl_FragColor.rgb" m="n.createProgram(),K=n.createShader(n.FRAGMENT_SHADER),E=n.createShader(n.VERTEX_SHADER),O="precision" "+a.getprecision()+"="" float;\n";n.shadersource(k,o+c.fragmentshader);n.shadersource(e,o+c.vertexshader);n.compileshader(k);n.compileshader(e);n.attachshader(m,k);n.attachshader(m,e);n.linkprogram(m);v="M;m=n.getAttribLocation(v,"position");p=n.getAttribLocation(v,"uv");c=n.getUniformLocation(v,"renderType");d=n.getUniformLocation(v,"map");e=n.getUniformLocation(v,"occlusionMap");g=n.getUniformLocation(v," "opacity");f="n.getUniformLocation(v,"color");h=n.getUniformLocation(v,"scale");l=n.getUniformLocation(v,"rotation");k=n.getUniformLocation(v,"screenPosition")}n.useProgram(v);q.initAttributes();q.enableAttribute(m);q.enableAttribute(p);q.disableUnusedAttributes();n.uniform1i(e,0);n.uniform1i(d,1);n.bindBuffer(n.ARRAY_BUFFER,s);n.vertexAttribPointer(m,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(p,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t);q.disable(n.CULL_FACE);n.depthMask(!1);M=0;for(K=" b.length;m<k;m++)if(c="16/z,N.set(C*A,C),E=b[M],x.set(E.matrixWorld.elements[12],E.matrixWorld.elements[13],E.matrixWorld.elements[14]),x.applyMatrix4(B.matrixWorldInverse),x.applyProjection(B.projectionMatrix),L.copy(x),Q.x=L.x*J+J,Q.y=L.y*F+F,u||0<Q.x&&Q.x<y&&0<Q.y&&Q.y<z){q.activeTexture(n.TEXTURE0);q.bindTexture(n.TEXTURE_2D,null);q.activeTexture(n.TEXTURE1);q.bindTexture(n.TEXTURE_2D,w);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,Q.x-8,Q.y-8,16,16,0);n.uniform1i(c,0);n.uniform2f(h,N.x,N.y);n.uniform3f(k," l.x,l.y,l.z);q.disable(n.blend);q.enable(n.depth_test);n.drawelements(n.triangles,6,n.unsigned_short,0);q.activetexture(n.texture0);q.bindtexture(n.texture_2d,d);n.copyteximage2d(n.texture_2d,0,n.rgba,q.x-8,q.y-8,16,16,0);n.uniform1i(c,1);q.disable(n.depth_test);q.activetexture(n.texture1);q.bindtexture(n.texture_2d,w);n.drawelements(n.triangles,6,n.unsigned_short,0);e.positionscreen.copy(l);e.customupdatecallback?e.customupdatecallback(e):e.updatelensflares();n.uniform1i(c,2);q.enable(n.blend);for(var="" o="0,T=E.lensFlares.length;O<T;O++){var" three.spriteplugin="function(a,b){var" c,d,e,g,f,h,l,k,m,p,n,q,s,t,v,u,w;function="" d(a,b){return="" a.z!="=b.z?b.z-a.z:b.id-a.id}var" three.vector3,c="new" three.quaternion,n="new" three.vector3;this.render="function(L,Q){if(0!==b.length){if(void" float32array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),k="new" uint16array([0,1,2,0,2,3]);y="x.createBuffer();z=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,y);x.bufferData(x.ARRAY_BUFFER,M,x.STATIC_DRAW);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER," z);x.bufferdata(x.element_array_buffer,k,x.static_draw);var="" float;","uniform="" modelviewmatrix;\nuniform="" projectionmatrix;\nuniform="" uvoffset;\nuniform="" uvscale;\nattribute="" uv="" uvscale;\nvec2="" alignedposition="position" scale;\nvec2="" rotatedposition;\nrotatedposition.x="cos(" alignedposition.x="" alignedposition.y;\nrotatedposition.y="sin(" alignedposition.y;\nvec4="" finalposition;\nfinalposition="modelViewMatrix" vec4(="" );\nfinalposition.xy="" =="" projectionmatrix="" finalposition;\ngl_position="finalPosition;\n}"].join("\n"));" x.shadersource(e,["precision="" color;\nuniform="" fogtype;\nuniform="" fogcolor;\nuniform="" fogdensity;\nuniform="" fognear;\nuniform="" fogfar;\nuniform="" alphatest;\nvarying="" );\nif="" texture.a="" <="" discard;\ngl_fragcolor="vec4(" color="" texture.xyz,="" opacity="" fogtype=""> 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
x.compileShader(K);x.compileShader(E);x.attachShader(M,K);x.attachShader(M,E);x.linkProgram(M);A=M;u=x.getAttribLocation(A,"position");w=x.getAttribLocation(A,"uv");c=x.getUniformLocation(A,"uvOffset");d=x.getUniformLocation(A,"uvScale");e=x.getUniformLocation(A,"rotation");g=x.getUniformLocation(A,"scale");f=x.getUniformLocation(A,"color");h=x.getUniformLocation(A,"map");l=x.getUniformLocation(A,"opacity");k=x.getUniformLocation(A,"modelViewMatrix");m=x.getUniformLocation(A,"projectionMatrix");p=
x.getUniformLocation(A,"fogType");n=x.getUniformLocation(A,"fogDensity");q=x.getUniformLocation(A,"fogNear");s=x.getUniformLocation(A,"fogFar");t=x.getUniformLocation(A,"fogColor");v=x.getUniformLocation(A,"alphaTest");M=document.createElement("canvas");M.width=8;M.height=8;K=M.getContext("2d");K.fillStyle="white";K.fillRect(0,0,8,8);J=new THREE.Texture(M);J.needsUpdate=!0}x.useProgram(A);B.initAttributes();B.enableAttribute(u);B.enableAttribute(w);B.disableUnusedAttributes();B.disable(x.CULL_FACE);
B.enable(x.BLEND);x.bindBuffer(x.ARRAY_BUFFER,y);x.vertexAttribPointer(u,2,x.FLOAT,!1,16,0);x.vertexAttribPointer(w,2,x.FLOAT,!1,16,8);x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,z);x.uniformMatrix4fv(m,!1,Q.projectionMatrix.elements);B.activeTexture(x.TEXTURE0);x.uniform1i(h,0);K=M=0;(E=L.fog)?(x.uniform3f(t,E.color.r,E.color.g,E.color.b),E instanceof THREE.Fog?(x.uniform1f(q,E.near),x.uniform1f(s,E.far),x.uniform1i(p,1),K=M=1):E instanceof THREE.FogExp2&&(x.uniform1f(n,E.density),x.uniform1i(p,2),K=M=2)):
(x.uniform1i(p,0),K=M=0);for(var E=0,O=b.length;E<o;e++){var t="b[E];T.modelViewMatrix.multiplyMatrices(Q.matrixWorldInverse,T.matrixWorld);T.z=-T.modelViewMatrix.elements[14]}b.sort(D);for(var" h="[],E=0,O=b.length;E<O;E++){var" r.map.repeat.x,r.map.repeat.y)):(x.uniform2f(c,0,0),x.uniform2f(d,1,1));x.uniform1f(l,r.opacity);x.uniform3f(f,r.color.r,r.color.g,r.color.b);x.uniform1f(e,r.rotation);x.uniform2fv(g,h);b.setblending(r.blending,r.blendequation,r.blendsrc,r.blenddst);b.setdepthtest(r.depthtest);b.setdepthwrite(r.depthwrite);r.map&&r.map.image&&r.map.image.width?a.settexture(r.map,0):a.settexture(j,0);x.drawelements(x.triangles,6,x.unsigned_short,0)}b.enable(x.cull_face);a.resetglstate()}}};="" three.curveutils="{tangentQuadraticBezier:function(a,b,c,d){return" 2*(1-a)*(c-b)+2*a*(d-c)},tangentcubicbezier:function(a,b,c,d,e){return-3*b*(1-a)*(1-a)+3*c*(1-a)*(1-a)-6*a*c*(1-a)+6*a*d*(1-a)-3*a*a*d+3*a*a*e},tangentspline:function(a,b,c,d,e){return="" 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,b,c,d,e){a=".5*(c-a);d=.5*(d-b);var" g="e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}};" three.geometryutils="{merge:function(a,b,c){console.warn("THREE.GeometryUtils:" .merge()="" has="" been="" moved="" to="" geometry.="" use="" geometry.merge(="" geometry2,="" matrix,="" materialindexoffset="" )="" instead.");var="" d;b="" instanceof="" three.mesh&&(b.matrixautoupdate&&b.updatematrix(),d="b.matrix,b=b.geometry);a.merge(b,d,c)},center:function(a){console.warn("THREE.GeometryUtils:" .center()="" geometry.center()="" instead.");return="" a.center()}};="" three.imageutils="{crossOrigin:void" 0,loadtexture:function(a,b,c,d){console.warn("three.imageutils.loadtexture="" is="" being="" deprecated.="" three.textureloader()="" e="new" three.textureloader;e.setcrossorigin(this.crossorigin);a="e.load(a,c,void" 0,d);b&&(a.mapping="b);return" a},loadtexturecube:function(a,b,c,d){console.warn("three.imageutils.loadtexturecube="" three.cubetextureloader()="" three.cubetextureloader;e.setcrossorigin(this.crossorigin);a="e.load(a," c,void="" a},loadcompressedtexture:function(){console.error("three.imageutils.loadcompressedtexture="" removed.="" three.ddsloader="" instead.")},loadcompressedtexturecube:function(){console.error("three.imageutils.loadcompressedtexturecube="" instead.")}};="" three.sceneutils="{createMultiMaterialObject:function(a,b){for(var" c="new" three.group,d="0,e=b.length;d<e;d++)c.add(new" three.mesh(a,b[d]));return="" c},detach:function(a,b,c){a.applymatrix(b.matrixworld);b.remove(a);c.add(a)},attach:function(a,b,c){var="" d="new" three.matrix4;d.getinverse(c.matrixworld);a.applymatrix(d);b.remove(a);c.add(a)}};="" three.shapeutils="{area:function(a){for(var" b="a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return" function(a,b){var="">c)return null;var d=[],e=[],g=[],f,h,l;if(0<three.shapeutils.area(a))for(h=0;h<c;h++)e[h]=h;else for(h="0;h<c;h++)e[h]=c-1-h;var" k="2*c;for(h=c-1;2<c;){if(0">=k--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}f=h;c<=f&&(f=0);h=f+1;c<=h&&(h=0);l=h+1;c<=l&&(l=0);var m;a:{var="" p="m=void" 0,n="void" 0,q="void" 0,s="void" 0,t="void" 0,v="void" 0,u="void" 0,w="void" 0,p="a[e[f]].x,n=a[e[f]].y,q=a[e[h]].x,s=a[e[h]].y,t=a[e[l]].x,v=a[e[l]].y;if(Number.EPSILON">(q-p)*(v-n)-(s-n)*(t-p))m=!1;else{var D=void 0,x=void 0,B=void 0,y=void 0,z=void 0,A=void 0,J=void 0,F=void 0,C=void 0,N=void 0,C=F=J=w=u=void 0,D=t-q,x=v-s,B=p-t,y=n-v,z=q-p,A=s-n;for(m=0;m<c;m++)if(u=a[e[m]].x,w=a[e[m]].y,!(u===p&&w===n||u===q&&w===s||u===t&&w===v)&&(j=u-p,f=w-n,c=u-q,n=w-s,u-=t,w-=v,c=d*n-x*c,j=z*f-a*j,f=b*w-y*u,c>=-Number.EPSILON&&
F>=-Number.EPSILON&&J>=-Number.EPSILON)){m=!1;break a}m=!0}}if(m){d.push([a[e[f]],a[e[h]],a[e[l]]]);g.push([e[f],e[h],e[l]]);f=h;for(l=h+1;l<c;f++,l++)e[f]=e[l];c--;k=2*c}}return b?g:d}}(),triangulateshape:function(a,b){function="" c(a,b,c){return="" a.x!="=b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function" d(a,b,d,e,f){var="" g="b.x-a.x,h=b.y-a.y,k=e.x-d.x,l=e.y-d.y,m=a.x-d.x,p=a.y-d.y,z=h*k-g*l,A=h*m-g*p;if(Math.abs(z)">Number.EPSILON){if(0<z){if(0>A||A>
z)return[];k=l*m-k*p;if(0>k||k>z)return[]}else{if(0<a||a<z)return[];k=l*m-k*p;if(0<k||k<z)return[]}if(0===k)return!f||0!==a&&a!==z?[a]:[];if(k===z)return!f||0!==a&&a!==z?[b]:[];if(0===a)return[d];if(a===z)return[e];f=k z;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!="=A||l*m!==k*p)return[];h=0===g&&0===h;k=0===k&&0===l;if(h&&k)return" a.x!="=d.x||a.y!==d.y?[]:[a];if(h)return" c(d,e,a)?[a]:[];if(k)return="" c(a,b,d)?[d]:[];0!="=g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),d.x<e.x?(b=d,z=d.x,l=e,d=e.x):(b=" e,z="e.x,l=d,d=d.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),d.y<e.y?(b=d,z=d.y,l=e,d=e.y):(b=e,z=e.y,l=d,d=d.y));return" k<="z?a<z?[]:a===z?f?[]:[b]:a<=d?[b,h]:[b,l]:k">d?[]:k===d?f?[]:[g]:a<=d?[g,h]:[g,l]}function e(a,b,c,d){var="" e="b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var" g="d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return" math.abs(a)="">Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}var g,f,h,l,k,m="{};h=a.concat();g=0;for(f=b.length;g<f;g++)Array.prototype.push.apply(h,b[g]);g=0;for(f=" h.length;g<f;g++)k="h[g].x+":"+h[g].y,void" 0!="=m[k]&&console.warn("THREE.Shape:" duplicate="" point",k),m[k]="g;g=function(a,b){function" c(a,b){var="" d="h.length-1,f=a-1;0">f&&(f=d);var g=a+1;g>d&&(g=0);d=e(h[a],h[f],h[g],k[b]);if(!d)return!1;d=k.length-1;f=b-1;0>f&&(f=d);g=b+1;g>d&&(g=0);return(d=e(k[b],k[f],k[g],h[a]))?!0:!1}function f(a,b){var c,e;for(c=0;c<h.length;c++)if(e=c+1,e%=h.length,e=d(a,b,h[c],h[e],!0),0<e.length)return!0;return!1}function g(a,c){var="" e,f,h,k;for(e="0;e<l.length;e++)for(f=b[l[e]]," h="0;h<f.length;h++)if(k=h+1,k%=f.length,k=d(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var" q="2*l.length;0<l.length;){Q--;if(0">Q){console.log("Infinite Loop! Holes left:"+l.length+", Probably Hole outside Shape!");break}for(p=F;p<h.length;p++){y=h[p];m=-1;for(l=0;l<l.length;l++)if(z=l[l],a=y.x+":"+y.y+":"+z,void 0="==J[A]){k=b[z];for(C=0;C<k.length;C++)if(z=k[C],c(p,C)&&!f(y,z)&&!g(y,z)){m=C;l.splice(L,1);" f="h.slice(0,p+1);z=h.slice(p);C=k.slice(m);N=k.slice(0,m+1);h=F.concat(C).concat(N).concat(z);F=p;break}if(0<=m)break;J[A]=!0}if(0<=m)break}}return" h}(a,b);var="" p="THREE.ShapeUtils.triangulate(g,!1);g=0;for(f=p.length;g<f;g++)for(l=p[g],h=0;3">h;h++)k=l[h].x+":"+l[h].y,k=m[k],void 0!==k&&(l[h]=k);return p.concat()},isClockWise:function(a){return 0>THREE.ShapeUtils.area(a)},b2:function(){return function(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}}(),b3:function(){return function(a,b,c,d,e){var g=
1-a,f=1-a;return g*g*g*b+3*f*f*a*c+3*(1-a)*a*a*d+a*a*a*e}}()};THREE.Audio=function(a){THREE.Object3D.call(this);this.type="Audio";this.context=a.context;this.source=this.context.createBufferSource();this.source.onended=this.onEnded.bind(this);this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.panner=this.context.createPanner();this.panner.connect(this.gain);this.autoplay=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1};THREE.Audio.prototype=Object.create(THREE.Object3D.prototype);
THREE.Audio.prototype.constructor=THREE.Audio;THREE.Audio.prototype.load=function(a){var b=this,c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(a){b.context.decodeAudioData(this.response,function(a){b.source.buffer=a;b.autoplay&&b.play()})};c.send();return this};
THREE.Audio.prototype.play=function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{var a=this.context.createBufferSource();a.buffer=this.source.buffer;a.loop=this.source.loop;a.onended=this.source.onended;a.start(0,this.startTime);a.playbackRate.value=this.playbackRate;this.isPlaying=!0;this.source=a;this.connect()}};THREE.Audio.prototype.pause=function(){this.source.stop();this.startTime=this.context.currentTime};
THREE.Audio.prototype.stop=function(){this.source.stop();this.startTime=0};THREE.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)};THREE.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)};
THREE.Audio.prototype.setFilter=function(a){!0===this.isPlaying?(this.disconnect(),this.filter=a,this.connect()):this.filter=a};THREE.Audio.prototype.getFilter=function(){return this.filter};THREE.Audio.prototype.setPlaybackRate=function(a){this.playbackRate=a;!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate)};THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate};THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1};
THREE.Audio.prototype.setLoop=function(a){this.source.loop=a};THREE.Audio.prototype.getLoop=function(){return this.source.loop};THREE.Audio.prototype.setRefDistance=function(a){this.panner.refDistance=a};THREE.Audio.prototype.getRefDistance=function(){return this.panner.refDistance};THREE.Audio.prototype.setRolloffFactor=function(a){this.panner.rolloffFactor=a};THREE.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor};
THREE.Audio.prototype.setVolume=function(a){this.gain.gain.value=a};THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value};THREE.Audio.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3;return function(b){THREE.Object3D.prototype.updateMatrixWorld.call(this,b);a.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(a.x,a.y,a.z)}}();THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=new (window.AudioContext||window.webkitAudioContext)};
THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype);THREE.AudioListener.prototype.constructor=THREE.AudioListener;
THREE.AudioListener.prototype.updateMatrixWorld=function(){var a=new THREE.Vector3,b=new THREE.Quaternion,c=new THREE.Vector3,d=new THREE.Vector3;return function(e){THREE.Object3D.prototype.updateMatrixWorld.call(this,e);e=this.context.listener;var g=this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.setPosition(a.x,a.y,a.z);e.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}();THREE.Curve=function(){};
THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(a){console.warn("THREE.Curve: Warning, getPoint() not implemented!");return null},getPointAt:function(a){a=this.getUtoTmapping(a);return this.getPoint(a)},getPoints:function(a){a||(a=5);var b,c=[];for(b=0;b<=a;b++)c.push(this.getpoint(b a));return="" c},getspacedpoints:function(a){a||(a="5);var" b,c="[];for(b=0;b<=a;b++)c.push(this.getPointAt(b/a));return" c},getlength:function(){var="" a="this.getLengths();return" a[a.length-1]},getlengths:function(a){a||="" (a="this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return" this.cachearclengths;this.needsupdate="!1;var" b="[],c,d=this.getPoint(0),e,g=0;b.push(0);for(e=1;e<=a;e++)c=this.getPoint(e/a),g+=c.distanceTo(d),b.push(g),d=c;return" this.cachearclengths="b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var" c="this.getLengths(),d=0,e=c.length,g;g=b?b:a*c[e-1];for(var" f="0,h=e-" 1,l;f<="h;)if(d=Math.floor(f+(h-f)/2),l=c[d]-g,0">l)f=d+1;else if(0<l)h=d-1;else{h=d;break}d=h;if(c[d]===g)return d="" (e-1);f="c[d];return" c="(d+(g-f)/(c[d+1]-f))/(e-1)},getTangent:function(a){var" b="a-1E-4;a+=1E-4;0">b&&(b=0);1<a&&(a=1);b=this.getpoint(b);return this.getpoint(a).clone().sub(b).normalize()},gettangentat:function(a){a="this.getUtoTmapping(a);return" this.gettangent(a)}};three.curve.utils="THREE.CurveUtils;" three.curve.create="function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return" a};three.curvepath="function(){this.curves=[];this.autoClose=!1};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.constructor=THREE.CurvePath;THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};" three.curvepath.prototype.closepath="function(){var" a="this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new" three.linecurve(b,a))};three.curvepath.prototype.getpoint="function(a){for(var" b="a*this.getLength(),c=this.getCurveLengths(),d=0;d<c.length;){if(c[d]">=b)return a=this.curves[d],b=1-(c[d]-b)/a.getLength(),a.getPointAt(b);d++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};
THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getlength(),a.push(b);return this.cachelengths="a};THREE.CurvePath.prototype.createPointsGeometry=function(a){a=this.getPoints(a,!0);return" this.creategeometry(a)};three.curvepath.prototype.createspacedpointsgeometry="function(a){a=this.getSpacedPoints(a,!0);return" this.creategeometry(a)};="" three.curvepath.prototype.creategeometry="function(a){for(var" b="new" three.geometry,c="0,d=a.length;c<d;c++){var" e="a[c];b.vertices.push(new" three.vector3(e.x,e.y,e.z||0))}return="" b};three.path="function(a){THREE.CurvePath.call(this);this.actions=[];a&&this.fromPoints(a)};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.Path.prototype.constructor=THREE.Path;THREE.Path.prototype.fromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var" three.path.prototype.moveto="function(a,b){this.actions.push({action:"moveTo",args:[a,b]})};THREE.Path.prototype.lineTo=function(a,b){var" c="this.actions[this.actions.length-1].args,c=new" three.linecurve(new="" three.vector2(c[c.length-2],c[c.length-1]),new="" three.vector2(a,b));this.curves.push(c);this.actions.push({action:"lineto",args:[a,b]})};="" three.path.prototype.quadraticcurveto="function(a,b,c,d){var" three.quadraticbeziercurve(new="" three.vector2(e[e.length-2],e[e.length-1]),new="" three.vector2(a,b),new="" three.vector2(c,d));this.curves.push(e);this.actions.push({action:"quadraticcurveto",args:[a,b,c,d]})};="" three.path.prototype.beziercurveto="function(a,b,c,d,e,g){var" f="this.actions[this.actions.length-1].args,f=new" three.cubicbeziercurve(new="" three.vector2(f[f.length-2],f[f.length-1]),new="" three.vector2(c,d),new="" three.vector2(e,g));this.curves.push(f);this.actions.push({action:"beziercurveto",args:[a,b,c,d,e,g]})};="" three.path.prototype.splinethru="function(a){var" three.vector2(c[c.length-2],c[c.length-1])];array.prototype.push.apply(c,a);c="new" three.splinecurve(c);this.curves.push(c);this.actions.push({action:"splinethru",args:b})};three.path.prototype.arc="function(a,b,c,d,e,g){var" three.path.prototype.absarc="function(a,b,c,d,e,g){this.absellipse(a,b,c,c,d,e,g)};THREE.Path.prototype.ellipse=function(a,b,c,d,e,g,f,h){var" l="this.actions[this.actions.length-1].args;this.absellipse(a+l[l.length-2],b+l[l.length-1],c,d,e,g,f,h)};THREE.Path.prototype.absellipse=function(a,b,c,d,e,g,f,h){var" three.ellipsecurve(a,b,c,d,e,g,f,h);this.curves.push(a);a="a.getPoint(1);l.push(a.x);l.push(a.y);this.actions.push({action:"ellipse",args:l})};" three.path.prototype.getspacedpoints="function(a,b){a||(a=40);for(var" c};="" three.path.prototype.getpoints="function(a,b){a=a||12;for(var" u="q.args;switch(q.action){case" "moveto":e.push(new="" three.vector2(u[0],u[1]));break;case="" "lineto":e.push(new="" "quadraticcurveto":g="u[2];f=u[3];k=u[0];m=u[1];0<e.length?(q=e[e.length-1],p=q.x,n=q.y):(q=this.actions[t-1].args,p=q[q.length-2],n=q[q.length-1]);for(u=1;u<=a;u++)s=u/a," q="c(s,p,k,g),s=c(s,n,m,f),e.push(new" three.vector2(q,s));break;case="" "beziercurveto":g="u[4];f=u[5];k=u[0];m=u[1];h=u[2];l=u[3];0<e.length?(q=e[e.length-1],p=q.x,n=q.y):(q=this.actions[t-1].args,p=q[q.length-2],n=q[q.length-1]);for(u=1;u<=a;u++)s=u/a,q=d(s,p,k,h,g),s=d(s,n,m,l,f),e.push(new" "splinethru":q="this.actions[t-1].args;s=[new" three.vector2(q[q.length-2],q[q.length-1])];q="a*u[0].length;s=s.concat(u[0]);s=new" three.splinecurve(s);for(u="1;u<=q;u++)e.push(s.getPointAt(u/" q));break;case="" "arc":g="u[0];f=u[1];m=u[2];h=u[3];q=u[4];k=!!u[5];p=q-h;n=2*a;for(u=1;u<=n;u++)s=u/n,k||(s=1-s),s=h+s*p,q=g+m*Math.cos(s),s=f+m*Math.sin(s),e.push(new" "ellipse":g="u[0];f=u[1];m=u[2];l=u[3];h=u[4];q=u[5];k=!!u[6];var" w="u[7];p=q-h;n=2*a;var" d,x;0!="=w&&(D=Math.cos(w),x=Math.sin(w));for(u=1;u<=n;u++){s=u/n;k||(s=1-s);s=h+s*p;q=g+m*Math.cos(s);s=f+l*Math.sin(s);if(0!==w){var" three.vector2(q,s))}}}c="e[e.length-" 1];math.abs(c.x-e[0].x)<number.epsilon&&math.abs(c.y-e[0].y)<number.epsilon&&e.splice(e.length-1,1);b&&e.push(e[0]);return="" e};="" three.path.prototype.toshapes="function(a,b){function" c(a){for(var="" three.shape;f.actions="e.actions;f.curves=e.curves;b.push(f)}return" b}function="" d(a,b){for(var="" g="b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)">Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x|| 0="=a?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.constructor=THREE.SplineCurve;" g.x<="a.x&&a.x<=h.x))return!0}return" d}var="" e="THREE.ShapeUtils.isClockWise,g=function(a){for(var" b="[],c=new" three.path,d="0,e=a.length;d<e;d++){var" f="a[d],g=f.args,f=f.action;"moveTo"===f&&0!==c.actions.length&&(b.push(c),c=new" three.path);c[f].apply(c,g)}0!="=c.actions.length&&b.push(c);return" b}(this.actions);if(0="==g.length)return[];if(!0===b)return" c(g);var="" f,h,l,k="[];if(1===g.length)return" h="g[0],l=new" three.shape,l.actions="h.actions,l.curves=h.curves,k.push(l),k;var" m="!e(g[0].getPoints()),m=a?!m:" m;l="[];var" p="[],n=[],q=0,s;p[q]=void" 0;n[q]="[];for(var" t="0,v=g.length;t<v;t++)h=g[t],s=h.getPoints(),f=e(s),(f=a?!f:f)?(!m&&p[q]&&q++,p[q]={s:new" three.shape,p:s},p[q].s.actions="h.actions,p[q].s.curves=h.curves,m&&q++,n[q]=[]):n[q].push({h:h,p:s[0]});if(!p[0])return" c(g);if(1<p.length){t="!1;h=[];e=0;for(g=p.length;e<g;e++)l[e]=[];e=0;for(g=p.length;e<g;e++)for(f=n[e],m=0;m<f.length;m++){q=f[m];s=!0;for(v=0;v<p.length;v++)d(q.p,p[v].p)&&(e!==v&&h.push({froms:e,tos:v,hole:m}),s?(s=!1,l[v].push(q)):" k};three.shape="function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.constructor=THREE.Shape;THREE.Shape.prototype.extrude=function(a){return" new="" three.extrudegeometry(this,a)};three.shape.prototype.makegeometry="function(a){return" three.shapegeometry(this,a)};="" three.shape.prototype.getpointsholes="function(a){for(var" b};three.shape.prototype.extractallpoints="function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){return" this.extractallpoints(a)};three.shape.utils="THREE.ShapeUtils;THREE.LineCurve=function(a,b){this.v1=a;this.v2=b};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);" three.linecurve.prototype.constructor="THREE.LineCurve;THREE.LineCurve.prototype.getPoint=function(a){var" b};three.linecurve.prototype.getpointat="function(a){return" this.getpoint(a)};three.linecurve.prototype.gettangent="function(a){return" this.v2.clone().sub(this.v1).normalize()};three.quadraticbeziercurve="function(a,b,c){this.v0=a;this.v1=b;this.v2=c};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);" three.quadraticbeziercurve.prototype.constructor="THREE.QuadraticBezierCurve;THREE.QuadraticBezierCurve.prototype.getPoint=function(a){var" three.vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))};three.quadraticbeziercurve.prototype.gettangent="function(a){var" three.vector2(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y))).normalize()};="" three.cubicbeziercurve="function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve;THREE.CubicBezierCurve.prototype.getPoint=function(a){var" three.vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))};="" three.cubicbeziercurve.prototype.gettangent="function(a){var" three.vector2(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()};three.splinecurve="function(a){this.points=void" three.splinecurve.prototype.getpoint="function(a){var" c="Math.floor(a);a-=c;var" d="b[0===c?c:c-1],e=b[c],g=b[c">b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector2(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a))};THREE.EllipseCurve=function(a,b,c,d,e,g,f,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=g;this.aClockwise=f;this.aRotation=h||0};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);
THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve;
THREE.EllipseCurve.prototype.getPoint=function(a){var b=this.aEndAngle-this.aStartAngle;0>b&&(b+=2*Math.PI);b>2*Math.PI&&(b-=2*Math.PI);b=!0===this.aClockwise?this.aEndAngle+(1-a)*(2*Math.PI-b):this.aStartAngle+a*b;a=this.aX+this.xRadius*Math.cos(b);var c=this.aY+this.yRadius*Math.sin(b);if(0!==this.aRotation){var b=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a;a=(e-this.aX)*b-(c-this.aY)*d+this.aX;c=(e-this.aX)*d+(c-this.aY)*b+this.aY}return new THREE.Vector2(a,c)};
THREE.ArcCurve=function(a,b,c,d,e,g){THREE.EllipseCurve.call(this,a,b,c,c,d,e,g)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.ArcCurve.prototype.constructor=THREE.ArcCurve;THREE.LineCurve3=THREE.Curve.create(function(a,b){this.v1=a;this.v2=b},function(a){var b=new THREE.Vector3;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});
THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,b,c){this.v0=a;this.v1=b;this.v2=c},function(a){var b=THREE.ShapeUtils.b2;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x),b(a,this.v0.y,this.v1.y,this.v2.y),b(a,this.v0.z,this.v1.z,this.v2.z))});
THREE.CubicBezierCurve3=THREE.Curve.create(function(a,b,c,d){this.v0=a;this.v1=b;this.v2=c;this.v3=d},function(a){var b=THREE.ShapeUtils.b3;return new THREE.Vector3(b(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),b(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))});
THREE.SplineCurve3=THREE.Curve.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3");this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-1;var c=Math.floor(a);a-=c;var d=b[0==c?c:c-1],e=b[c],g=b[c>b.length-2?b.length-1:c+1],b=b[c>b.length-3?b.length-1:c+2],c=THREE.CurveUtils.interpolate;return new THREE.Vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});
THREE.CatmullRomCurve3=function(){function a(){}var b=new THREE.Vector3,c=new a,d=new a,e=new a;a.prototype.init=function(a,b,c,d){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-d;this.c3=2*a-2*b+c+d};a.prototype.initNonuniformCatmullRom=function(a,b,c,d,e,m,p){a=((b-a)/e-(c-a)/(e+m)+(c-b)/m)*m;d=((c-b)/m-(d-b)/(m+p)+(d-c)/p)*m;this.init(b,c,a,d)};a.prototype.initCatmullRom=function(a,b,c,d,e){this.init(b,c,e*(c-a),e*(d-b))};a.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*
b*a};return THREE.Curve.create(function(a){this.points=a||[]},function(a){var f=this.points,h,l;l=f.length;2>l&&console.log("duh, you need at least 2 points");a*=l-1;h=Math.floor(a);a-=h;0===a&&h===l-1&&(h=l-2,a=1);var k,m,p;0===h?(b.subVectors(f[0],f[1]).add(f[0]),k=b):k=f[h-1];m=f[h];p=f[h+1];h+2<l?f=f[h+2]:(b.subvectors(f[l-1],f[l-2]).add(f[l-2]),f=b);if(void 0="==this.type||"centripetal"===this.type||"chordal"===this.type){var" n="chordal" =="=this.type?.5:.25;l=Math.pow(k.distanceToSquared(m),n);" h="Math.pow(m.distanceToSquared(p),n);n=Math.pow(p.distanceToSquared(f),n);1E-4">h&&(h=1);1E-4>l&&(l=h);1E-4>n&&(n=h);c.initNonuniformCatmullRom(k.x,m.x,p.x,f.x,l,h,n);d.initNonuniformCatmullRom(k.y,m.y,p.y,f.y,l,h,n);e.initNonuniformCatmullRom(k.z,m.z,p.z,f.z,l,h,n)}else"catmullrom"===this.type&&(l=void 0!==this.tension?this.tension:.5,c.initCatmullRom(k.x,m.x,p.x,f.x,l),d.initCatmullRom(k.y,m.y,p.y,f.y,l),e.initCatmullRom(k.z,m.z,p.z,f.z,l));return new THREE.Vector3(c.calc(a),d.calc(a),e.calc(a))})}();
THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=void 0==a?[]:a},function(a){var b=this.points;a*=b.length-0;var c=Math.floor(a);a-=c;var c=c+(0<c?0:(math.floor(math.abs(c) b.length)+1)*b.length),d="b[(c-1)%b.length],e=b[c%b.length],g=b[(c+1)%b.length],b=b[(c+2)%b.length],c=THREE.CurveUtils.interpolate;return" new="" three.vector3(c(d.x,e.x,g.x,b.x,a),c(d.y,e.y,g.y,b.y,a),c(d.z,e.z,g.z,b.z,a))});="" three.boxgeometry="function(a,b,c,d,e,g){function" f(a,b,c,d,e,f,g,t){var="" v,u="h.widthSegments,w=h.heightSegments,D=e/2,x=f/2,B=h.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)v="z";else" if("x"="==a&&"z"===b||"z"===a&&"x"===b)v="y",w=h.depthSegments;else" if("z"="==a&&"y"===b||"y"===a&&"z"===b)v="x",u=h.depthSegments;var" y="u+1,z=w+1,A=e/u,J=f/w,F=new" three.vector3;f[v]="0<g?1:-1;for(e=0;e<z;e++)for(f=0;f<y;f++){var" c="new" three.vector3;c[a]="(f*A-D)*c;C[b]=(e*J-x)*d;C[v]=g;h.vertices.push(C)}for(e=" 0;e<w;e++)for(f="0;f<u;f++)x=f+y*e,a=f+y*(e+1),b=f+1+y*(e+1),c=f+1+y*e,d=new" three.vector2(f="" u,1-e="" w),g="new" u,1-(e+1)="" w),v="new" three.vector2((f+1)="" w),d="new" w),x="new" three.face3(x+b,a+b,c+b),x.normal.copy(f),x.vertexnormals.push(f.clone(),f.clone(),f.clone()),x.materialindex="t,h.faces.push(x),h.faceVertexUvs[0].push([d,g,D]),x=new" three.face3(a+b,b+b,c+b),x.normal.copy(f),x.vertexnormals.push(f.clone(),f.clone(),f.clone()),x.materialindex="t,h.faces.push(x)," h.facevertexuvs[0].push([g.clone(),v,d.clone()])}three.geometry.call(this);this.type="BoxGeometry" ;this.parameters="{width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:g};this.widthSegments=d||1;this.heightSegments=e||1;this.depthSegments=g||1;var" h="this;d=a/2;e=b/2;g=c/2;f("z","y",-1,-1,c,b,d,0);f("z","y",1,-1,c,b,-d,1);f("x","z",1,1,a,c,e,2);f("x","z",1,-1,a,c,-e,3);f("x","y",1,-1,a,b,g,4);f("x","y",-1,-1,a,b,-g,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);" three.boxgeometry.prototype.constructor="THREE.BoxGeometry;THREE.BoxGeometry.prototype.clone=function(){var" a="this.parameters;return" three.boxgeometry(a.width,a.height,a.depth,a.widthsegments,a.heightsegments,a.depthsegments)};three.cubegeometry="THREE.BoxGeometry;THREE.CircleGeometry=function(a,b,c,d){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new" three.circlebuffergeometry(a,b,c,d))};="" three.circlegeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry;THREE.CircleGeometry.prototype.clone=function(){var" three.circlegeometry(a.radius,a.segments,a.thetastart,a.thetalength)};="" three.circlebuffergeometry="function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="CircleBufferGeometry";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};a=a||50;b=void" 0!="=b?Math.max(3,b):8;c=void" e="b+2,g=new" float32array(3*e),f="new" float32array(3*e),e="new" float32array(2*e);f[2]="1;e[0]=.5;e[1]=.5;for(var" m="c+h/b*d;g[l]=a*Math.cos(m);g[l+1]=a*Math.sin(m);f[l+2]=1;e[k]=(g[l]/a+1)/2;e[k+1]=(g[l+1]/a+1)/2}c=" [];for(l="1;l<=b;l++)c.push(l,l+1,0);this.setIndex(new" three.bufferattribute(new="" uint16array(c),1));this.addattribute("position",new="" three.bufferattribute(g,3));this.addattribute("normal",new="" three.bufferattribute(f,3));this.addattribute("uv",new="" three.bufferattribute(e,2));this.boundingsphere="new" three.sphere(new="" three.vector3,a)};three.circlebuffergeometry.prototype="Object.create(THREE.BufferGeometry.prototype);THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry;" three.circlebuffergeometry.prototype.clone="function(){var" three.circlebuffergeometry(a.radius,a.segments,a.thetastart,a.thetalength)};="" three.cylindergeometry="function(a,b,c,d,e,g,f,h){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:g,thetaStart:f,thetaLength:h};a=void" l="c/2,k,m,p=[],n=[];for(m=0;m<=e;m++){var" q="[],s=[],t=m/e,v=t*(b-a)+a;for(k=0;k<=d;k++){var" u="k/d,w=new" three.vector3;w.x="v*Math.sin(u*h+" f);w.y="-t*c+l;w.z=v*Math.cos(u*h+f);this.vertices.push(w);q.push(this.vertices.length-1);s.push(new" three.vector2(u,1-t))}p.push(q);n.push(s)}c="(b-a)/c;for(k=0;k<d;k++)for(0!==a?(f=this.vertices[p[0][k]].clone(),h=this.vertices[p[0][k+1]].clone()):(f=this.vertices[p[1][k]].clone(),h=this.vertices[p[1][k+1]].clone()),f.setY(Math.sqrt(f.x*f.x+f.z*f.z)*c).normalize(),h.setY(Math.sqrt(h.x*h.x+h.z*h.z)*c).normalize(),m=0;m<e;m++){var" d="h.clone(),x=h.clone(),B=n[m][k].clone(),y=n[m+1][k].clone(),z=n[m+1][k+1].clone(),A=n[m][k+1].clone();this.faces.push(new" three.face3(q,s,v,[u,w,x]));this.facevertexuvs[0].push([b,y,a]);this.faces.push(new="" three.face3(s,t,v,[w.clone(),d,x.clone()]));this.facevertexuvs[0].push([y.clone(),z,a.clone()])}if(!1="==g&&0<a)for(this.vertices.push(new" three.vector3(0,l,0)),k="0;k<d;k++)q=p[0][k],s=p[0][k+1],t=this.vertices.length-1,u=new" three.vector3(0,1,0),w="new" three.vector3(0,1,0),d="new" three.vector3(0,="" 1,0),b="n[0][k].clone(),y=n[0][k+1].clone(),z=new" three.vector2(y.x,0),this.faces.push(new="" three.face3(q,s,t,[u,w,d],void="" 0,1)),this.facevertexuvs[0].push([b,y,z]);if(!1="==g&&0<b)for(this.vertices.push(new" three.vector3(0,-l,0)),k="0;k<d;k++)q=p[e][k+1],s=p[e][k],t=this.vertices.length-1,u=new" three.vector3(0,-1,0),w="new" three.vector3(0,-1,0),d="new" three.vector3(0,-1,0),b="n[e][k+1].clone(),y=n[e][k].clone(),z=new" three.vector2(y.x,1),this.faces.push(new="" 0,2)),this.facevertexuvs[0].push([b,="" y,z]);this.computefacenormals()};three.cylindergeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry;THREE.CylinderGeometry.prototype.clone=function(){var" three.cylindergeometry(a.radiustop,a.radiusbottom,a.height,a.radialsegments,a.heightsegments,a.openended,a.thetastart,a.thetalength)};="" three.edgesgeometry="function(a,b){function" c(a,b){return="" a-b}three.buffergeometry.call(this);var="" instanceof="" three.buffergeometry?(h="new" three.geometry,h.frombuffergeometry(a)):h="a.clone();h.mergeVertices();h.computeFaceNormals();var" k="0,m=h.length;k<m;k++)for(var" p="h[k],n=0;3">n;n++){e[0]=p[f[n]];e[1]=p[f[(n+1)%3]];e.sort(c);var q=e.toString();void 0===g[q]?g[q]={vert1:e[0],vert2:e[1],face1:k,
face2:void 0}:g[q].face2=k}e=[];for(q in g)if(f=g[q],void 0===f.face2||h[f.face1].normal.dot(h[f.face2].normal)<=d)k=l[f.vert1],e.push(k.x),e.push(k.y),e.push(k.z),k=l[f.vert2],e.push(k.x),e.push(k.y),e.push(k.z);this.addattribute("position",new three.bufferattribute(new="" float32array(e),3))};three.edgesgeometry.prototype="Object.create(THREE.BufferGeometry.prototype);THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry;" three.extrudegeometry="function(a,b){"undefined"!==typeof" a&&(three.geometry.call(this),this.type="ExtrudeGeometry" ,a="Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry;THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var" c="a.length,d=0;d<c;d++)this.addShape(a[d],b)};" three.extrudegeometry.prototype.addshape="function(a,b){function" c(a,b,c){b||console.error("three.extrudegeometry:="" vec="" does="" not="" exist");return="" b.clone().multiplyscalar(c).add(a)}function="" d(a,b,c){var="" d="1,d=a.x-b.x,e=a.y-b.y,f=c.x-a.x,g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)">Number.EPSILON){var k=Math.sqrt(h),l=Math.sqrt(f*f+g*g),h=b.x-e/k;b=b.y+d/k;f=((c.x-g/l-h)*g-(c.y+f/l-b)*f)/(d*g-e*f);c=h+d*f-a.x;a=b+e*f-a.y;d=c*c+a*a;if(2>=d)return new THREE.Vector2(c,a);d=Math.sqrt(d/2)}else a=!1,d>Number.EPSILON?
f>Number.EPSILON&&(a=!0):d<-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(c=-e,a=d,d=math.sqrt(h)):(c=d,a=e,d=math.sqrt(h 2));return="" new="" three.vector2(c="" d,a="" d)}function="" e(a,b){var="" c,d;for(g="a.length;0<=--G;){c=G;d=G-1;0">d&&(d=a.length-1);for(var e=0,f=q+2*m,e=0;e<f;e++){var g="T*e,h=T*(e+1),k=b+c+g,g=b+d+g,l=b+d+h,h=b+c+h,k=k+F,g=g+F,l=l+F,h=h+F;J.faces.push(new" three.face3(k,g,h,null,null,1));j.faces.push(new="" three.face3(g,l,h,null,null,1));k="u.generateSideWallUV(J," k,g,l,h);j.facevertexuvs[0].push([k[0],k[1],k[3]]);j.facevertexuvs[0].push([k[1],k[2],k[3]])}}}function="" g(a,b,c){j.vertices.push(new="" three.vector3(a,b,c))}function="" f(a,b,c){a+="F;b+=F;c+=F;J.faces.push(new" three.face3(a,b,c,null,null,0));a="u.generateTopUV(J,a,b,c);J.faceVertexUvs[0].push(a)}var" h="void" 0!="=b.amount?b.amount:100,l=void" n="void" three.tubegeometry.frenetframes(s,q,!1),d="new" three.vector3,x="new" three.vector3,b="new" three.vector3);p||(k="l=m=0);var" y,z,a,j="this,F=this.vertices.length,s=a.extractPoints(n),n=s.shape,C=s.holes;if(s=!THREE.ShapeUtils.isClockWise(n)){n=n.reverse();" z="0;for(A=C.length;z<A;z++)y=C[z],THREE.ShapeUtils.isClockWise(y)&&(C[z]=y.reverse());s=!1}var" q,m,k,e,o,t="n.length,H,R=N.length,s=[],G=0;K=L.length;Q=K-1;for(M=G+1;G<K;G++,Q++,M++)Q===K&&(Q=0),M===K&&(M=0),s[G]=d(L[G],L[Q],L[M]);var" ia="[],U,X=s.concat();z=0;for(A=C.length;z<A;z++){y=C[z];U=[];G=0;K=y.length;Q=K-1;for(M=G+1;G<K;G++,Q++,M++)Q===K&&(Q=0),M===K&&(M=0),U[G]=d(y[G],y[Q],y[M]);ia.push(U);X=" x.concat(u)}for(q="0;Q<m;Q++){K=Q/m;E=l*(1-K);M=k*Math.sin(K*Math.PI/2);G=0;for(K=L.length;G<K;G++)O=c(L[G],s[G],M),g(O.x,O.y,-E);z=0;for(A=C.length;z<A;z++)for(y=C[z],U=ia[z],G=0,K=y.length;G<K;G++)O=c(y[G],U[G],M),g(O.x,O.y,-E)}M=k;for(G=0;G<T;G++)O=p?c(n[G],X[G],M):n[G],v?(x.copy(w.normals[0]).multiplyScalar(O.x),D.copy(w.binormals[0]).multiplyScalar(O.y),B.copy(t[0]).add(x).add(D),g(B.x,B.y,B.z)):g(O.x,O.y,0);for(K=1;K<=q;K++)for(G=0;G<T;G++)O=p?c(n[G],X[G],M):n[G],v?(x.copy(w.normals[K]).multiplyScalar(O.x)," d.copy(w.binormals[k]).multiplyscalar(o.y),b.copy(t[k]).add(x).add(d),g(b.x,b.y,b.z)):g(o.x,o.y,h="" q*k);for(q="m-1;0<=Q;Q--){K=Q/m;E=l*(1-K);M=k*Math.sin(K*Math.PI/2);G=0;for(K=L.length;G<K;G++)O=c(L[G],s[G],M),g(O.x,O.y,h+E);z=0;for(A=C.length;z<A;z++)for(y=C[z],U=ia[z],G=0,K=y.length;G<K;G++)O=c(y[G],U[G],M),v?g(O.x,O.y+t[q-1].y,t[q-1].x+E):g(O.x,O.y,h+E)}(function(){if(p){var" a;a="0*T;for(G=0;G<R;G++)H=N[G],f(H[2]+a,H[1]+a,H[0]+a);a=q+2*m;a*=T;for(G=0;G<R;G++)H=N[G],f(H[0]+a,H[1]+a,H[2]+a)}else{for(G=" 0;g<r;g++)h="N[G],f(H[2],H[1],H[0]);for(G=0;G<R;G++)H=N[G],f(H[0]+T*q,H[1]+T*q,H[2]+T*q)}})();(function(){var" a="0;e(L,a);a+=L.length;z=0;for(A=C.length;z<A;z++)y=C[z],e(y,a),a+=y.length})()};" three.extrudegeometry.worlduvgenerator="{generateTopUV:function(a,b,c,d){a=a.vertices;b=a[b];c=a[c];d=a[d];return[new" three.vector2(b.x,b.y),new="" three.vector2(c.x,c.y),new="" three.vector2(d.x,d.y)]},generatesidewalluv:function(a,b,c,d,e){a="a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01">Math.abs(b.y-c.y)?[new THREE.Vector2(b.x,1-b.z),new THREE.Vector2(c.x,1-c.z),new THREE.Vector2(d.x,1-d.z),new THREE.Vector2(e.x,1-e.z)]:[new THREE.Vector2(b.y,1-b.z),new THREE.Vector2(c.y,1-c.z),new THREE.Vector2(d.y,
1-d.z),new THREE.Vector2(e.y,1-e.z)]}};THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);this.type="ShapeGeometry";!1===Array.isArray(a)&&(a=[a]);this.addShapeList(a,b);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry;THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,d=a.length;c<d;c++)this.addshape(a[c],b);return 0="==b&&(b={});var" this};="" three.shapegeometry.prototype.addshape="function(a,b){void" c="b.material,d=void" 0!="=b.curveSegments?b.curveSegments:12);var" l="e.shape,k=e.holes;if(!THREE.ShapeUtils.isClockWise(l))for(l=l.reverse(),e=0,g=k.length;e<g;e++)f=k[e],THREE.ShapeUtils.isClockWise(f)&&(k[e]=f.reverse());var" m="THREE.ShapeUtils.triangulateShape(l,k);e=0;for(g=k.length;e<g;e++)f=k[e],l=l.concat(f);" k="l.length;g=m.length;for(e=0;e<k;e++)f=l[e],this.vertices.push(new" three.vector3(f.x,f.y,0));for(e="0;e<g;e++)k=m[e],l=k[0]+h,f=k[1]+h,k=k[2]+h,this.faces.push(new" three.face3(l,f,k,null,null,c)),this.facevertexuvs[0].push(d.generatetopuv(this,l,f,k))};="" three.lathegeometry="function(a,b,c,d){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=b||12;c=c||0;d=d||2*Math.PI;for(var" e="1/(a.length-1),g=1/b,f=0,h=b;f<=h;f++)for(var" n="a[l],q=new" three.vector3;q.x="k*n.x-m*n.y;q.y=m*n.x+k*n.y;q.z=n.z;this.vertices.push(q)}c=a.length;f=0;for(h=b;f<h;f++)for(l=0,p=a.length-1;l<p;l++){b=m=l+c*f;d=m+c;var" n+g,t="q+e;this.faces.push(new" three.face3(b,d,m));this.facevertexuvs[0].push([new="" three.vector2(n,q),new="" three.vector2(s,q),new="" three.vector2(n,t)]);this.faces.push(new="" three.face3(d,k,m));this.facevertexuvs[0].push([new="" three.vector2(s,t),new="" three.vector2(n,t)])}this.mergevertices();this.computefacenormals();this.computevertexnormals()};three.lathegeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry;" three.planegeometry="function(a,b,c,d){THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new" three.planebuffergeometry(a,b,c,d))};three.planegeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry;THREE.PlaneGeometry.prototype.clone=function(){var" a="this.parameters;return" new="" three.planegeometry(a.width,a.height,a.widthsegments,a.heightsegments)};="" three.planebuffergeometry="function(a,b,c,d){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};var" f="c+1,h=d+1,l=a/c,k=b/d;b=new" float32array(f*h*3);a="new" float32array(f*h*3);for(var="" float32array(f*h*2),p="0,n=0,q=0;q<h;q++)for(var" s="q*k-g,t=0;t<f;t++)b[p]=t*l-e,b[p+1]=-s,a[p+2]=1,m[n]=t/c,m[n+1]=1-q/d,p+=3,n+=2;p=0;e=new" (65535<b.length="" 3?uint32array:uint16array)(c*="" d*6);for(q="0;q<d;q++)for(t=0;t<c;t++)g=t+f*(q+1),h=t+1+f*(q+1),l=t+1+f*q,e[p]=t+f*q,e[p+1]=g,e[p+2]=l,e[p+3]=g,e[p+4]=h,e[p+5]=l,p+=6;this.setIndex(new" three.bufferattribute(e,1));this.addattribute("position",new="" three.bufferattribute(b,3));this.addattribute("normal",new="" three.bufferattribute(a,3));this.addattribute("uv",new="" three.bufferattribute(m,2))};three.planebuffergeometry.prototype="Object.create(THREE.BufferGeometry.prototype);THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry;" three.planebuffergeometry.prototype.clone="function(){var" three.planebuffergeometry(a.width,a.height,a.widthsegments,a.heightsegments)};="" three.ringgeometry="function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:g};a=a||0;b=b||50;e=void" f,h="[],l=a,k=(b-a)/d;for(a=0;a<d+1;a++){for(f=0;f<c+1;f++){var" three.vector3,p="e+f/c*g;m.x=l*Math.cos(p);m.y=l*Math.sin(p);this.vertices.push(m);h.push(new" three.vector2((m.x="" b+1)="" 2,="" (m.y="" 2))}l+="k}b=new" three.vector3(0,0,1);for(a="0;a<d;a++)for(e=a*(c+1),f=0;f<c;f++)g=p=f+e,k=p+c+1,m=p+c+2,this.faces.push(new" three.face3(g,k,m,[b.clone(),b.clone(),b.clone()])),this.facevertexuvs[0].push([h[g].clone(),h[k].clone(),h[m].clone()]),g="p,k=p+c+2,m=p+1,this.faces.push(new" three.face3(g,k,m,[b.clone(),b.clone(),b.clone()])),this.facevertexuvs[0].push([h[g].clone(),h[k].clone(),h[m].clone()]);this.computefacenormals();this.boundingsphere="new" three.sphere(new="" three.vector3,l)};="" three.ringgeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.RingGeometry.prototype.constructor=THREE.RingGeometry;THREE.RingGeometry.prototype.clone=function(){var" three.ringgeometry(a.innerradius,a.outerradius,a.thetasegments,a.phisegments,a.thetastart,a.thetalength)};="" three.spheregeometry="function(a,b,c,d,e,g,f){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:f};this.fromBufferGeometry(new" three.spherebuffergeometry(a,b,c,d,e,g,f))};three.spheregeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry;" three.spheregeometry.prototype.clone="function(){var" three.spheregeometry(a.radius,a.widthsegments,a.heightsegments,a.phistart,a.philength,a.thetastart,a.thetalength)};="" three.spherebuffergeometry="function(a,b,c,d,e,g,f){THREE.BufferGeometry.call(this);this.type="SphereBufferGeometry";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:g,thetaLength:f};a=a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void" h="g+f,l=(b+1)*(c+1),k=new" three.bufferattribute(new="" float32array(3*l),3),m="new" float32array(3*="" l),3),l="new" float32array(2*l),2),p="0,n=[],q=new" three.vector3,s="0;s<=c;s++){for(var" t="[],v=s/c,u=0;u<=b;u++){var" w="u/b,D=-a*Math.cos(d+w*e)*Math.sin(g+v*f),x=a*Math.cos(g+v*f),B=a*Math.sin(d+w*e)*Math.sin(g+v*f);q.set(D,x,B).normalize();k.setXYZ(p,D,x,B);m.setXYZ(p,q.x,q.y,q.z);l.setXY(p,w,1-v);t.push(p);p++}n.push(t)}d=[];for(s=0;s<c;s++)for(u=0;u<b;u++)e=n[s][u+1],f=n[s][u],p=n[s+1][u],q=n[s+1][u+1],(0!==s||0<g)&&d.push(e,f,q),(s!==c-1||h<Math.PI)&&d.push(f,p,q);this.setIndex(new" (65535<="" k.count?three.uint32attribute:three.uint16attribute)(d,1));this.addattribute("position",k);this.addattribute("normal",m);this.addattribute("uv",l);this.boundingsphere="new" three.vector3,a)};three.spherebuffergeometry.prototype="Object.create(THREE.BufferGeometry.prototype);THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry;" three.spherebuffergeometry.prototype.clone="function(){var" three.spherebuffergeometry(a.radius,a.widthsegments,a.heightsegments,a.phistart,a.philength,a.thetastart,a.thetalength)};="" three.torusgeometry="function(a,b,c,d,e){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||100;b=b||40;c=c||8;d=d||6;e=e||2*Math.PI;for(var" g="new" three.vector3,f="[],h=[],l=0;l<=c;l++)for(var" three.vector3;n.x="(a+b*Math.cos(p))*Math.cos(m);n.y=(a+b*Math.cos(p))*Math.sin(m);n.z=b*Math.sin(p);this.vertices.push(n);f.push(new" three.vector2(k="" d,l="" c));h.push(n.clone().sub(g).normalize())}for(l="1;l<=c;l++)for(k=1;k<=d;k++)a=(d+1)*l+k-1,b=(d+1)*(l-1)+k-1,e=(d+1)*(l-1)+k,g=(d+1)*l+k,m=new" three.face3(a,b,g,[h[a].clone(),h[b].clone(),h[g].clone()]),this.faces.push(m),this.facevertexuvs[0].push([f[a].clone(),f[b].clone(),f[g].clone()]),m="new" three.face3(b,e,g,[h[b].clone(),h[e].clone(),h[g].clone()]),this.faces.push(m),this.facevertexuvs[0].push([f[b].clone(),f[e].clone(),f[g].clone()]);this.computefacenormals()};="" three.torusgeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry;THREE.TorusGeometry.prototype.clone=function(){var" three.torusgeometry(a.radius,a.tube,a.radialsegments,a.tubularsegments,a.arc)};="" three.torusknotgeometry="function(a,b,c,d,e,g,f){function" h(a,b,c,d,e){var="" three.vector3(f,g,d)}three.geometry.call(this);this.type="TorusKnotGeometry" ;this.parameters="{radius:a,tube:b,radialSegments:c,tubularSegments:d,p:e,q:g,heightScale:f};a=a||100;b=b||40;c=c||64;d=d||8;e=e||2;g=g||3;f=f||1;for(var" three.vector3,m="new" three.vector3,n="0;n<c;++n){l[n]=" array(d);var="" q="n/c*2*e*Math.PI,s=h(q,g,e,a,f),q=h(q+.01,g,e,a,f);k.subVectors(q,s);m.addVectors(q,s);p.crossVectors(k,m);m.crossVectors(p,k);p.normalize();m.normalize();for(q=0;q<d;++q){var" three.vector3;u.x="s.x+v*m.x+t*p.x;u.y=s.y+v*m.y+t*p.y;u.z=s.z+v*m.z+t*p.z;l[n][q]=this.vertices.push(u)-1}}for(n=0;n<c;++n)for(q=0;q<d;++q)e=(n+1)%c,g=(q+1)%d,a=l[n][q],b=l[e][q],e=l[e][g],g=l[n][g],f=new" three.vector2(n="" c,q="" d),k="new" three.vector2((n+1)="" c,="" d),m="new" c,(q+1)="" d),p="new" d),this.faces.push(new="" three.face3(a,b,g)),this.facevertexuvs[0].push([f,k,p]),this.faces.push(new="" three.face3(b,e,g)),this.facevertexuvs[0].push([k.clone(),m,p.clone()]);this.computefacenormals();this.computevertexnormals()};three.torusknotgeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry;" three.torusknotgeometry.prototype.clone="function(){var" three.torusknotgeometry(a.radius,a.tube,a.radialsegments,a.tubularsegments,a.p,a.q,a.heightscale)};="" three.tubegeometry="function(a,b,c,d,e,g){THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:a,segments:b,radius:c,radialSegments:d,closed:e,taper:g};b=b||64;c=c||1;d=d||8;e=e||!1;g=g||THREE.TubeGeometry.NoTaper;var" three.vector3,v,u,w;v="new" three.tubegeometry.frenetframes(a,b,e);u="v.normals;w=v.binormals;this.tangents=v.tangents;this.normals=u;this.binormals=w;for(v=0;v<k;v++)for(f[v]=[],m=v/(k-1),s=a.getPointAt(m),h=u[v],l=w[v],n=c*g(m),m=0;m<" d;m++)p="m/d*2*Math.PI,q=-n*Math.cos(p),p=n*Math.sin(p),t.copy(s),t.x+=q*h.x+p*l.x,t.y+=q*h.y+p*l.y,t.z+=q*h.z+p*l.z,f[v][m]=this.vertices.push(new" three.vector3(t.x,t.y,t.z))-1;for(v="0;v<b;v++)for(m=0;m<d;m++)g=e?(v+1)%b:v+1,k=(m+1)%d,a=f[v][m],c=f[g][m],g=f[g][k],k=f[v][k],t=new" three.vector2(v="" b,m="" d),u="new" three.vector2((v+1)="" d),w="new" b,(m+1)="" d),h="new" three.face3(a,c,k)),this.facevertexuvs[0].push([t,u,h]),this.faces.push(new="" three.face3(c,="" g,k)),this.facevertexuvs[0].push([u.clone(),w,h.clone()]);this.computefacenormals();this.computevertexnormals()};three.tubegeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry;THREE.TubeGeometry.prototype.clone=function(){return" this.constructor(this.parameters.path,this.parameters.segments,this.parameters.radius,this.parameters.radialsegments,this.parameters.closed,this.parameters.taper)};three.tubegeometry.notaper="function(a){return" 1};="" three.tubegeometry.sinusoidaltaper="function(a){return" math.sin(math.pi*a)};="" three.tubegeometry.frenetframes="function(a,b,c){var" d="new" three.vector3,e="[],g=[],f=[],h=new" three.vector3,l="new" three.matrix4;b+="1;var" k,m,p;this.tangents="e;this.normals=g;this.binormals=f;for(k=0;k<b;k++)m=k/(b-1),e[k]=a.getTangentAt(m),e[k].normalize();g[0]=new" three.vector3;f[0]="new" three.vector3;a="Number.MAX_VALUE;k=Math.abs(e[0].x);m=Math.abs(e[0].y);p=Math.abs(e[0].z);k<=a&&(a=k,d.set(1,0,0));m<=a&&(a=m,d.set(0,1,0));p<=a&&d.set(0,0,1);h.crossVectors(e[0],d).normalize();g[0].crossVectors(e[0]," h);f[0].crossvectors(e[0],g[0]);for(k="1;k<b;k++)g[k]=g[k-1].clone(),f[k]=f[k-1].clone(),h.crossVectors(e[k-1],e[k]),h.length()">Number.EPSILON&&(h.normalize(),d=Math.acos(THREE.Math.clamp(e[k-1].dot(e[k]),-1,1)),g[k].applyMatrix4(l.makeRotationAxis(h,d))),f[k].crossVectors(e[k],g[k]);if(c)for(d=Math.acos(THREE.Math.clamp(g[0].dot(g[b-1]),-1,1)),d/=b-1,0<e[0].dot(h.crossvectors(g[0],g[b-1]))&&(d=-d),k=1;k<b;k++)g[k].applymatrix4(l.makerotationaxis(e[k],d*k)),f[k].crossvectors(e[k],g[k])}; three.polyhedrongeometry="function(a,b,c,d){function" e(a){var="" b="a.normalize().clone();b.index=l.vertices.push(b)-1;var" c="Math.atan2(a.z,-a.x)/2/Math.PI+.5;a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;b.uv=new" three.vector2(c,1-a);return="" b}function="" g(a,b,c,d){d="new" three.face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()],void="" 0,d);l.faces.push(d);v.copy(a).add(b).add(c).dividescalar(3);d="Math.atan2(v.z,-v.x);l.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])}function" f(a,="" b){for(var="" p="e(d.clone().lerp(h,m/c)),q=e(f.clone().lerp(h,m/c)),s=c-m,t=0;t<=s;t++)k[m][t]=0===t&&m===c?p:e(p.clone().lerp(q,t/s))}for(m=0;m<c;m++)for(t=0;t<2*(c-m)-1;t++)d=Math.floor(t/2),0===t%2?g(k[m][d+1],k[m+1][d],k[m][d],n):g(k[m][d+1],k[m+1][d+1],k[m+1][d],n)}function" h(a,b,c){0="">c&&1===a.x&&(a=new THREE.Vector2(a.x-1,a.y));0===b.x&&0===b.z&&(a=new THREE.Vector2(c/
2/Math.PI+.5,a.y));return a.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;for(var l=this,k=0,m=a.length;k<m;k+=3)e(new three.vector3(a[k],a[k+1],a[k+2]));a="this.vertices;for(var" p="[],n=k=0,m=b.length;k<m;k+=3,n++){var" q="a[b[k]],s=a[b[k+1]],t=a[b[k+2]];p[n]=new" three.face3(q.index,s.index,t.index,[q.clone(),s.clone(),t.clone()],void="" 0,n)}for(var="" v="new" three.vector3,k="0,m=p.length;k<m;k++)f(p[k],d);k=0;for(m=this.faceVertexUvs[0].length;k<" m;k++)b="this.faceVertexUvs[0][k],d=b[0].x,a=b[1].x,p=b[2].x,n=Math.max(d,a,p),q=Math.min(d,a,p),.9<n&&.1">q&&(.2>d&&(b[0].x+=1),.2>a&&(b[1].x+=1),.2>p&&(b[2].x+=1));k=0;for(m=this.vertices.length;k<m;k++)this.vertices[k].multiplyscalar(c);this.mergevertices();this.computefacenormals();this.boundingsphere=new three.sphere(new="" three.vector3,c)};three.polyhedrongeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry;" three.polyhedrongeometry.prototype.clone="function(){var" a="this.parameters;return" new="" three.polyhedrongeometry(a.vertices,a.indices,a.radius,a.detail)};="" three.dodecahedrongeometry="function(a,b){var" c="(1+Math.sqrt(5))/2,d=1/c;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1," 12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronGeometry" ;this.parameters="{radius:a,detail:b}};THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry;THREE.DodecahedronGeometry.prototype.clone=function(){var" three.dodecahedrongeometry(a.radius,a.detail)};="" three.icosahedrongeometry="function(a,b){var" three.icosahedrongeometry.prototype.constructor="THREE.IcosahedronGeometry;THREE.IcosahedronGeometry.prototype.clone=function(){var" three.icosahedrongeometry(a.radius,a.detail)};three.octahedrongeometry="function(a,b){THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b}};THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);" three.octahedrongeometry.prototype.constructor="THREE.OctahedronGeometry;THREE.OctahedronGeometry.prototype.clone=function(){var" three.octahedrongeometry(a.radius,a.detail)};three.tetrahedrongeometry="function(a,b){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype);" three.tetrahedrongeometry.prototype.constructor="THREE.TetrahedronGeometry;THREE.TetrahedronGeometry.prototype.clone=function(){var" three.tetrahedrongeometry(a.radius,a.detail)};="" three.parametricgeometry="function(a,b,c){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};var" d="this.vertices,e=this.faces,g=this.faceVertexUvs[0],f,h,l,k,m=b+1;for(f=0;f<=c;f++)for(k=f/c,h=0;h<=b;h++)l=h/b,l=a(l,k),d.push(l);var" p,n,q,s;for(f="0;f<c;f++)for(h=0;h<b;h++)a=f*m+h,d=f*m+h+1,k=(f+1)*m+h+1,l=(f+1)*m+h,p=new" three.vector2(h="" b,f="" c),n="new" three.vector2((h+1)="" c),q="new" b,(f+1)="" c),s="new" c),e.push(new="" three.face3(a,="" d,l)),g.push([p,n,s]),e.push(new="" three.face3(d,k,l)),g.push([n.clone(),q,s.clone()]);this.computefacenormals();this.computevertexnormals()};three.parametricgeometry.prototype="Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry;" three.wireframegeometry="function(a){function" b(a,b){return="" a-b}three.buffergeometry.call(this);var="" instanceof="" three.geometry){var="" g="a.vertices,f=a.faces,h=0,l=new" uint32array(6*f.length);a="0;for(var" k="f.length;a<k;a++)for(var" m="f[a],p=0;3">p;p++){c[0]=m[e[p]];c[1]=m[e[(p+1)%3]];c.sort(b);var n=c.toString();void 0===d[n]&&(l[2*h]=c[0],l[2*h+1]=c[1],d[n]=!0,h++)}c=new Float32Array(6*h);a=0;for(k=h;a<k;a++)for(p=0;2>p;p++)d=g[l[2*a+p]],h=6*a+3*p,c[h+0]=d.x,c[h+1]=d.y,
c[h+2]=d.z;this.addAttribute("position",new THREE.BufferAttribute(c,3))}else if(a instanceof THREE.BufferGeometry){if(null!==a.index){k=a.index.array;g=a.attributes.position;e=a.drawcalls;h=0;0===e.length&&a.addGroup(0,k.length);l=new Uint32Array(2*k.length);f=0;for(m=e.length;f<m;++f){a=e[f];p=a.start;n=a.count;a=p;for(var q="p+n;a<q;a+=3)for(p=0;3">p;p++)c[0]=k[a+p],c[1]=k[a+(p+1)%3],c.sort(b),n=c.toString(),void 0===d[n]&&(l[2*h]=c[0],l[2*h+1]=c[1],d[n]=!0,h++)}c=new Float32Array(6*h);a=0;for(k=
h;a<k;a++)for(p=0;2>p;p++)h=6*a+3*p,d=l[2*a+p],c[h+0]=g.getX(d),c[h+1]=g.getY(d),c[h+2]=g.getZ(d)}else for(g=a.attributes.position.array,h=g.length/3,l=h/3,c=new Float32Array(6*h),a=0,k=l;a<k;a++)for(p=0;3>p;p++)h=18*a+6*p,l=9*a+3*p,c[h+0]=g[l],c[h+1]=g[l+1],c[h+2]=g[l+2],d=9*a+(p+1)%3*3,c[h+3]=g[d],c[h+4]=g[d+1],c[h+5]=g[d+2];this.addAttribute("position",new THREE.BufferAttribute(c,3))}};THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);
THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry;THREE.AxisHelper=function(a){a=a||1;var b=new Float32Array([0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a]),c=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.BufferAttribute(b,3));a.addAttribute("color",new THREE.BufferAttribute(c,3));b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,a,b)};THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype);
THREE.AxisHelper.prototype.constructor=THREE.AxisHelper;
THREE.ArrowHelper=function(){var a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var b=new THREE.CylinderGeometry(0,.5,1,5,1);b.translate(0,-.5,0);return function(c,d,e,g,f,h){THREE.Object3D.call(this);void 0===g&&(g=16776960);void 0===e&&(e=1);void 0===f&&(f=.2*e);void 0===h&&(h=.2*f);this.position.copy(d);f<e&&(this.line=new three.line(a,new="" three.linebasicmaterial({color:g})),this.line.matrixautoupdate="!1,this.add(this.line));this.cone=new" three.mesh(b,new="" three.meshbasicmaterial({color:g}));="" this.cone.matrixautoupdate="!1;this.add(this.cone);this.setDirection(c);this.setLength(e,f,h)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper;THREE.ArrowHelper.prototype.setDirection=function(){var" a="new" three.vector3,b;return="" function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999="">c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);b<a&&(this.line.scale.set(1,a-b,1),this.line.updatematrix());this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updatematrix()};three.arrowhelper.prototype.setcolor=function(a){void 0="==g[a]&&(g[a]=[]);g[a].push(d.vertices.length-1)}var" 0!="=this.line&&this.line.material.color.set(a);this.cone.material.color.set(a)};" three.boxhelper="function(a){var" b="new" uint16array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c="new" float32array(24),d="new" three.buffergeometry;d.setindex(new="" three.bufferattribute(b,1));d.addattribute("position",new="" three.bufferattribute(c,3));three.linesegments.call(this,d,new="" three.linebasicmaterial({color:16776960}));void="" three.boxhelper.prototype.update="function(){var" a="new" three.box3;return="" function(b){a.setfromobject(b);if(!a.empty()){b="a.min;var" c="a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();" three.boundingboxhelper="function(a,b){var" three.box3;three.mesh.call(this,new="" three.boxgeometry(1,1,1),new="" three.meshbasicmaterial({color:c,wireframe:!0}))};three.boundingboxhelper.prototype="Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper;THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};" three.camerahelper="function(a){function" b(a,b,d){c(a,d);c(b,d)}function="" c(a,b){d.vertices.push(new="" three.vector3);d.colors.push(new="" three.color(b));void="" d="new" three.geometry,e="new" three.linebasicmaterial({color:16777215,vertexcolors:three.facecolors}),g="{};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);" b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);three.linesegments.call(this,d,e);this.camera="a;this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};" three.camerahelper.prototype="Object.create(THREE.LineSegments.prototype);THREE.CameraHelper.prototype.constructor=THREE.CameraHelper;" three.camerahelper.prototype.update="function(){function" a(a,f,h,l){d.set(f,h,l).unproject(e);a="c[a];if(void" b,c,d="new" three.vector3,e="new" three.camera;return="" function(){b="this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1," -1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.verticesneedupdate="!0}}();" three.directionallighthelper="function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var" three.geometry;c.vertices.push(new="" three.vector3(-b,b,0),new="" three.vector3(b,b,0),new="" three.vector3(b,-b,0),new="" three.vector3(-b,-b,0),new="" three.vector3(-b,b,0));var="" three.linebasicmaterial({fog:!1});d.color.copy(this.light.color).multiplyscalar(this.light.intensity);this.lightplane="new" three.line(c,d);this.add(this.lightplane);="" three.vector3,new="" three.vector3);d="new" three.linebasicmaterial({fog:!1});d.color.copy(this.light.color).multiplyscalar(this.light.intensity);this.targetline="new" three.line(c,d);this.add(this.targetline);this.update()};three.directionallighthelper.prototype="Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper;" three.directionallighthelper.prototype.dispose="function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};" three.directionallighthelper.prototype.update="function(){var" three.vector3,b="new" three.vector3,c="new" three.vector3;return="" function(){a.setfrommatrixposition(this.light.matrixworld);b.setfrommatrixposition(this.light.target.matrixworld);c.subvectors(b,a);this.lightplane.lookat(c);this.lightplane.material.color.copy(this.light.color).multiplyscalar(this.light.intensity);this.targetline.geometry.vertices[1].copy(c);this.targetline.geometry.verticesneedupdate="!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();" three.edgeshelper="function(a,b,c){b=void" three.edgesgeometry(a.geometry,c),new="" three.linebasicmaterial({color:b}));this.matrix="a.matrixWorld;this.matrixAutoUpdate=!1};THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper;" three.facenormalshelper="function(a,b,c,d){this.object=a;this.size=void" instanceof="" three.geometry?b="c.faces.length:console.warn("THREE.FaceNormalsHelper:" only="" three.geometry="" is="" supported.="" use="" three.vertexnormalshelper,="" instead.");c="new" three.buffergeometry;b="new" three.float32attribute(6*b,3);c.addattribute("position",b);three.linesegments.call(this,c,new="" three.linebasicmaterial({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper;" three.facenormalshelper.prototype.update="function(){var" three.matrix3;return="" function(){this.object.updatematrixworld(!0);c.getnormalmatrix(this.object.matrixworld);for(var="" m="g[l],p=m.normal;a.copy(f[m.a]).add(f[m.b]).add(f[m.c]).divideScalar(3).applyMatrix4(d);b.copy(p).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);" e.setxyz(h,a.x,a.y,a.z);h+="1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0;return" this}}();="" three.gridhelper="function(a,b){var" three.geometry,d="new" three.linebasicmaterial({vertexcolors:three.vertexcolors});this.color1="new" three.color(4473924);this.color2="new" three.color(8947848);for(var="" e="-a;e<=a;e+=b){c.vertices.push(new" three.vector3(-a,0,e),new="" three.vector3(a,0,e),new="" three.vector3(e,0,-a),new="" three.vector3(e,0,a));var="" g="0===e?this.color1:this.color2;c.colors.push(g,g,g,g)}THREE.LineSegments.call(this,c,d)};THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype);" three.gridhelper.prototype.constructor="THREE.GridHelper;THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};" three.hemispherelighthelper="function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new" three.color,new="" three.color];var="" three.spheregeometry(b,4,2);c.rotatex(-math.pi="" 2);for(var="">d;d++)c.faces[d].color=this.colors[4>d?0:1];d=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(c,d);this.add(this.lightSphere);this.update()};
THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper;THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),d=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,d);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper;
THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SkeletonHelper=function(a){this.bones=this.getBoneList(a);for(var b=new THREE.Geometry,c=0;c<this.bones.length;c++)this.bones[c].parent instanceof="" three.bone&&(b.vertices.push(new="" three.vector3),b.vertices.push(new="" three.vector3),b.colors.push(new="" three.color(0,0,1)),b.colors.push(new="" three.color(0,1,0)));b.dynamic="!0;c=new" three.linebasicmaterial({vertexcolors:three.vertexcolors,depthtest:!1,depthwrite:!1,transparent:!0});three.linesegments.call(this,b,c);this.root="a;this.matrix=a.matrixWorld;" this.matrixautoupdate="!1;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper;THREE.SkeletonHelper.prototype.getBoneList=function(a){var" b="[];a" three.bone&&b.push(a);for(var="" c="0;c<a.children.length;c++)b.push.apply(b,this.getBoneList(a.children[c]));return" b};="" three.skeletonhelper.prototype.update="function(){for(var" a="this.geometry,b=(new" three.matrix4).getinverse(this.root.matrixworld),c="new" three.matrix4,d="0,e=0;e<this.bones.length;e++){var" g="this.bones[e];g.parent" three.bone&&(c.multiplymatrices(b,g.matrixworld),a.vertices[d].setfrommatrixposition(c),c.multiplymatrices(b,g.parent.matrixworld),a.vertices[d+1].setfrommatrixposition(c),d+="2)}a.verticesNeedUpdate=!0;a.computeBoundingSphere()};" three.spotlighthelper="function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new" three.cylindergeometry(0,1,1,8,1,!0);a.translate(0,-.5,0);a.rotatex(-math.pi="" 2);var="" three.meshbasicmaterial({wireframe:!0,fog:!1});this.cone="new" three.mesh(a,b);this.add(this.cone);this.update()};three.spotlighthelper.prototype="Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper;" three.spotlighthelper.prototype.dispose="function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var" three.vector3,b="new" three.vector3;return="" function(){var="" three.vertexnormalshelper="function(a,b,c,d){this.object=a;this.size=void" 0!="=b?b:1;a=void" three.geometry?b="3*c.faces.length:c" three.buffergeometry&&(b="c.attributes.normal.count);c=new" three.buffergeometry;b="new" three.float32attribute(6*b,3);c.addattribute("position",b);three.linesegments.call(this,c,new="" three.linebasicmaterial({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()};" three.vertexnormalshelper.prototype="Object.create(THREE.LineSegments.prototype);THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper;" three.vertexnormalshelper.prototype.update="function(){var" three.vector3,c="new" three.matrix3;return="" d="["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var" e="this.object.matrixWorld,g=this.geometry.attributes.position,f=this.object.geometry;if(f" three.geometry)for(var="" h="f.vertices,l=f.faces,k=f=0,m=l.length;k<m;k++)for(var" p="l[k],n=0,q=p.vertexNormals.length;n<q;n++){var" s="p.vertexNormals[n];a.copy(h[p[d[n]]]).applyMatrix4(e);" b.copy(s).applymatrix3(c).normalize().multiplyscalar(this.size).add(a);g.setxyz(f,a.x,a.y,a.z);f+="1;g.setXYZ(f,b.x,b.y,b.z);f+=1}else" if(f="" three.buffergeometry)for(d="f.attributes.position,h=f.attributes.normal,n=f=0,q=d.count;n<q;n++)a.set(d.getX(n),d.getY(n),d.getZ(n)).applyMatrix4(e),b.set(h.getX(n),h.getY(n),h.getZ(n)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),g.setXYZ(f,a.x,a.y,a.z),f+=1,g.setXYZ(f,b.x,b.y,b.z),f+=1;g.needsUpdate=!0;return" this}}();="" three.wireframehelper="function(a,b){var" three.wireframegeometry(a.geometry),new="" three.linebasicmaterial({color:c}));this.matrix="a.matrixWorld;this.matrixAutoUpdate=!1};THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype);THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper;THREE.ImmediateRenderObject=function(a){THREE.Object3D.call(this);this.material=a;this.render=function(a){}};" three.immediaterenderobject.prototype="Object.create(THREE.Object3D.prototype);THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject;THREE.MorphBlendMesh=function(a,b){THREE.Mesh.call(this,a,b);this.animationsMap={};this.animationsList=[];var" three.morphblendmesh.prototype.createanimation="function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};" three.morphblendmesh.prototype.autocreateanimations="function(a){for(var" l="h[1];d[l]||(d[l]={start:Infinity,end:-Infinity});h=d[l];g<h.start&&(h.start=g);g">h.end&&(h.end=g);c||(c=l)}}for(l in d)h=d[l],this.createAnimation(l,h.start,h.end,a);this.firstAnimation=c};
THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};
THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};
THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};
THREE.MorphBlendMesh.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d="this.animationsList[b];if(d.active){var" e="d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time">d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var g=d.start+THREE.Math.clamp(Math.floor(d.time/e),0,d.length-1),f=d.weight;g!==d.currentFrame&&
(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*f,this.morphTargetInfluences[g]=0,d.lastFrame=d.currentFrame,d.currentFrame=g);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*f,this.morphTargetInfluences[d.lastFrame]=(1-e)*f):this.morphTargetInfluences[d.currentFrame]=f}}};
</c;b++){var></this.bones.length;c++)this.bones[c].parent></a&&(this.line.scale.set(1,a-b,1),this.line.updatematrix());this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updatematrix()};three.arrowhelper.prototype.setcolor=function(a){void></e&&(this.line=new></k;a++)for(p=0;3></k;a++)for(p=0;2></m;++f){a=e[f];p=a.start;n=a.count;a=p;for(var></k;a++)for(p=0;2></m;k++)this.vertices[k].multiplyscalar(c);this.mergevertices();this.computefacenormals();this.boundingsphere=new></m;k+=3)e(new></e[0].dot(h.crossvectors(g[0],g[b-1]))&&(d=-d),k=1;k<b;k++)g[k].applymatrix4(l.makerotationaxis(e[k],d*k)),f[k].crossvectors(e[k],g[k])};></d;c++)this.addshape(a[c],b);return></f;e++){var></-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(c=-e,a=d,d=math.sqrt(h)):(c=d,a=e,d=math.sqrt(h></=d)k=l[f.vert1],e.push(k.x),e.push(k.y),e.push(k.z),k=l[f.vert2],e.push(k.x),e.push(k.y),e.push(k.z);this.addattribute("position",new></c?0:(math.floor(math.abs(c)></l?f=f[h+2]:(b.subvectors(f[l-1],f[l-2]).add(f[l-2]),f=b);if(void></=a.x&&a.x<=g.x||></g.y||a.y></d;c++)b+=this.curves[c].getlength(),a.push(b);return></a&&(a=1);b=this.getpoint(b);return></l)h=d-1;else{h=d;break}d=h;if(c[d]===g)return></=a;b++)c.push(this.getpoint(b></h.length;p++){y=h[p];m=-1;for(l=0;l<l.length;l++)if(z=l[l],a=y.x+":"+y.y+":"+z,void></h.length;c++)if(e=c+1,e%=h.length,e=d(a,b,h[c],h[e],!0),0<e.length)return!0;return!1}function></a?0<=e&&0<=b:0<=e||0<=b):0<e}var></=d?[g,h]:[g,l]}function></a||a<z)return[];k=l*m-k*p;if(0<k||k<z)return[]}if(0===k)return!f||0!==a&&a!==z?[a]:[];if(k===z)return!f||0!==a&&a!==z?[b]:[];if(0===a)return[d];if(a===z)return[e];f=k></z){if(0></c;f++,l++)e[f]=e[l];c--;k=2*c}}return></c;m++)if(u=a[e[m]].x,w=a[e[m]].y,!(u===p&&w===n||u===q&&w===s||u===t&&w===v)&&(j=u-p,f=w-n,c=u-q,n=w-s,u-=t,w-=v,c=d*n-x*c,j=z*f-a*j,f=b*w-y*u,c></=f&&(f=0);h=f+1;c<=h&&(h=0);l=h+1;c<=l&&(l=0);var></three.shapeutils.area(a))for(h=0;h<c;h++)e[h]=h;else></o;e++){var></n;p+=3){var></a.getshaderprecisionformat(a.vertex_shader,a.high_float).precision&&0<a.getshaderprecisionformat(a.fragment_shader,a.high_float).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getshaderprecisionformat(a.vertex_shader,a.medium_float).precision&&0<a.getshaderprecisionformat(a.fragment_shader,a.medium_float).precision?"mediump":"lowp"}this.getmaxprecision=d;this.precision=void></s;p++)m=q[p],a.format!==three.rgbaformat&&a.format!==three.rgbformat?-1<i.getcompressedtextureformats().indexof(l)?i.compressedteximage2d(r.texture_cube_map_positive_x+h,p,l,m.width,m.height,0,m.data):console.warn("three.webglrenderer:></a.version&&c.__version!==a.version){c.__image__webgltexturecube||(a.addeventlistener("dispose",g),c.__image__webgltexturecube=r.createtexture(),la.textures++);i.activetexture(r.texture0+b);i.bindtexture(r.texture_cube_map,c.__image__webgltexturecube);r.pixelstorei(r.unpack_flip_y_webgl,a.flipy);for(var></b.anisotropy||w.get(b).__currentanisotropy)||(r.texparameterf(a,c.texture_max_anisotropy_ext,></g;c++){var></b;a++)c=this.lensflares[a],c.x=this.positionscreen.x+d*c.distance,c.y=this.positionscreen.y+e*c.distance,c.wantedrotation=c.x*math.pi*.25,c.rotation+=.25*(c.wantedrotation-c.rotation)};></g;e++)d[e].object.visible=!1}}}();></n;c+=3){if(b=y[c],j=y[c+1],f=y[c+2],a=c(this,u,e,x,z,b,j,f))a.faceindex=math.floor(c></this.geometry.morphtargets.length){this.morphtargetbase=-1;this.morphtargetinfluences=[];this.morphtargetdictionary={};for(var></d.near||t></l-1;n+=p)t=b.distancesqtosegment(h[n],h[n+1],m,k),t></d.near||t></s;n+=p)h.fromarray(q,3*n),l.fromarray(q,></d.near||t></p;k++){var></l){var></a.y)switch(this.wrapt){case></a.x)switch(this.wraps){case></this.alphatest&&(b.alphatest=this.alphatest);!0===this.wireframe&&(b.wireframe=this.wireframe);1<this.wireframelinewidth&&(b.wireframelinewidth=this.wireframelinewidth);return></f;d+=b)c.skinweights.push(new></b;d++)for(v=a.uvs[d],c.facevertexuvs[d][h]=[],f=0;3></d;c+=2){var></this.keys.length;b++){var></this.keys.length;b++){var></a.bones.length;c++){var></this.keys.length-1;c++){var></c+e&&(this.keys=this.keys.splice(c,this.keys.length-></this.keys.length;b++)this.keys[b].time+=a;return></this.lastindex&&a<this.keys[this.lastindex-1].time;)this.lastindex--;if(this.lastindex></this.keys.length&&a></e.length;g++)c.propertybindings[g].accumulate(e[g],></this.actions.length;b++)if(this.actions[b].name===a)return></this.tracks.length;a++)b=this.tracks[a],this.duration=math.max(b.keys[b.keys.length-1].time);this.trim();this.optimize();this.results=[]};></=g;g--)for(e=a[g],this.faces.splice(e,></a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)}};three.clock=function(a){this.autostart=void></c;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return></a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getpoint=function(a){e=(this.points.length-1)*a;g=math.floor(e);f=e-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g></=b)return></=b)return></g?void></b},intersectline:function(){var></a||0></g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;></a)return!1;return!0},intersectsbox:function(){var></=this.radius*this.radius},distancetopoint:function(a){return></f;g++)e=math.max(e,d.distancetosquared(b[g]));this.radius=math.sqrt(e);return></=c?c:d,b)},intersecttriangle:function(){var></d||d!==d)d=f;return></d||d!==d)d=g;0<=f?(e=(a.min.z-h.z)*f,f*=a.max.z-h.z):(e=(a.max.z-h.z)*f,f*=a.min.z-h.z);if(c></=a?a:null},intersectplane:function(a,b){var></=q?(h=1></n?(d=l*m-k,e=l*k-m,q=h*n,0<=d?e></arguments.length&&console.error("three.matrix3:></this.min.z||a.min.z></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getparameter:function(a,b){return(b||new></this.min.z||a.z></this.min.y||a.y></c;b++)this.expandbypoint(a[b]);return></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getparameter:function(a,b){return(b||new></this.min.y||a.y></c;b++)this.expandbypoint(a[b]);return></=f)return></d?6:0);break;case></a.length&&(c=three.colorkeywords[a],></2></d&&(d-=1);return></a?1:+a});></b.length&&!self.requestanimationframe;++c)self.requestanimationframe=self[b[c]+"requestanimationframe"],self.cancelanimationframe=self[b[c]+"cancelanimationframe"]||self[b[c]+"cancelrequestanimationframe"];void>