<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Dodecahedron | Olmer</title><meta name="description"><meta name="generator" content="Olmer"><meta name="author" content="Oleg Shlyazhko"><meta name="keywords" content="olmer, oleg shlyahko, developer, backend, python, messengers, vr, machine learning, bots, ai"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/"><img src="/char_logo.png" alt="Olmer" title="Olmer"></a><h1><a href="/" alt="Olmer" title="Olmer" itemprop="headline">Olmer</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url">Home</a></li><li itemprop="name"><a href="/articles" alt="Articles" title="Articles" itemprop="url">Articles</a></li><li itemprop="name"><a href="/dodecahedron" alt="Dodecahedron" title="Dodecahedron" itemprop="url">Dodecahedron</a></li><li itemprop="name"><a href="/about" alt="About me" title="About me" itemprop="url">About me</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Dodecahedron</h1><span class="post-meta">Last updated on<time itemprop="dateModified" datetime="2016-01-18T09:09:16.000Z"> Monday, January 18th 2016 at 18:52</time></span><p>My first experiment with WebGL and Three.js.<br>
</p><p id="view"></p>
<script src="/scripts/three.min.js"></script>
<script src="/scripts/postprocessing/EffectComposer.js"></script>
<script src="/scripts/shaders/CopyShader.js"></script>
<script src="/scripts/shaders/ConvolutionShader.js"></script>

<script src="/scripts/postprocessing/EffectComposer.js"></script>
<script src="/scripts/postprocessing/RenderPass.js"></script>
<script src="/scripts/postprocessing/MaskPass.js"></script>
<script src="/scripts/postprocessing/BloomPass.js"></script>
<script src="/scripts/postprocessing/ShaderPass.js"></script>
<script>
    var scene, camera, renderer;
    var geometry, material, mesh;
    var composer;
    var clock;

    var width = 400;
    var height = 400;

    var dt = 0
    var loop_sec = 10
    var fps = 30
    var amplitude = 0.5;
    var velocities = [];

    init();
    animate();

    function init() {
        clock = new THREE.Clock()

        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera( 75, width / height, 0.1, 50 );
        camera.position.z = 30;

        var ambientLight = new THREE.AmbientLight( 0x000000 );
        scene.add( ambientLight );
        var lights = [];
        brightness = 0.2
        lights[0] = new THREE.PointLight( 0xffffff, brightness, 0 );
        lights[1] = new THREE.PointLight( 0xffffff, brightness, 0 );
        lights[0].position.set( 0, 200, 0 );
        lights[1].position.set( 100, 200, 100 );
        scene.add( lights[0] );
        scene.add( lights[1] );

        geometry = new THREE.DodecahedronGeometry(10, 1);
        material = new THREE.MeshPhongMaterial({
            color: 0x156289,
            emissive: 0x072534,
            side: THREE.DoubleSide,
            shading: THREE.FlatShading
        });

        mesh = new THREE.Mesh( geometry, material );
        scene.add( mesh );

        renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.autoClear = false;
        renderer.setClearColor( 0x000000, 0 ); // the default
        renderer.setSize( width, height );

        var parameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, stencilBuffer: false };
        var renderTarget = new THREE.WebGLRenderTarget( width, height, parameters );
        composer = new THREE.EffectComposer(renderer, renderTarget);
        var renderPass = new THREE.RenderPass(scene, camera);
        composer.addPass(renderPass);
        // 1. BloomPass: blurry, glowing effect
        var bloomPass = new THREE.BloomPass(3);
        bloomPass.renderTargetX.format = THREE.RGBAFormat;
        bloomPass.renderTargetY.format = THREE.RGBAFormat;
        composer.addPass(bloomPass)

        // EffectCopy, which output the result as is:
        var effectCopy = new THREE.ShaderPass(THREE.CopyShader);
        effectCopy.renderToScreen = true;
        composer.addPass(effectCopy);

        document.getElementById('view').appendChild( renderer.domElement );
        for (var i = 0; i < geometry.vertices.length; i++) {
            rnd = 1-2*Math.random()
            velocities.push(rnd)
        }
    }

    function animate() {
        requestAnimationFrame( animate );
        dt += 1
        delta = amplitude*Math.sin(dt*2*Math.PI/(loop_sec*fps))/fps
        for (var i=0;i < mesh.geometry.vertices.length; i++) {
            coeff = velocities[i]
            len = mesh.geometry.vertices[i].length()
            new_len = len + delta * coeff
            scale = new_len / len
            mesh.geometry.vertices[i].multiplyScalar(scale)
        }
        mesh.geometry.verticesNeedUpdate = true
        mesh.rotation.x += 0.005;
        mesh.rotation.y += 0.005;

        // renderer.render( scene, camera );
        var delta = clock.getDelta();
        renderer.clear();
        composer.render(delta);
    }
</script>
<p></p>
</article></main><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-51338010-2');ga('send','pageview');</script></body></html>